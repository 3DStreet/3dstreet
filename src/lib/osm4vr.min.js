!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,(()=>(()=>{var e={960:e=>{function t(e,t){if(0!==e.length){n(e[0],t);for(var r=1;r<e.length;r++)n(e[r],!t)}}function n(e,t){for(var n=0,r=0,o=0,i=e.length,a=i-1;o<i;a=o++){var s=(e[o][0]-e[a][0])*(e[a][1]+e[o][1]),u=n+s;r+=Math.abs(n)>=Math.abs(s)?n-u+s:s-u+n,n=u}n+r>=0!=!!t&&e.reverse()}e.exports=function e(n,r){var o,i=n&&n.type;if("FeatureCollection"===i)for(o=0;o<n.features.length;o++)e(n.features[o],r);else if("GeometryCollection"===i)for(o=0;o<n.geometries.length;o++)e(n.geometries[o],r);else if("Feature"===i)e(n.geometry,r);else if("Polygon"===i)t(n.coordinates,r);else if("MultiPolygon"===i)for(o=0;o<n.coordinates.length;o++)t(n.coordinates[o],r);return n}},167:(e,t,n)=>{"use strict";n.r(t);var r=n(834),o=n.n(r);AFRAME.registerComponent("osm-geojson",{schema:{lat:{type:"number"},lon:{type:"number"},src:{type:"asset"},radius_m:{type:"number",default:0},zoom:{type:"number",default:17},trackId:{type:"string"}},init:function(){this.EQUATOR_M=40075017,this.POLES_M=40007863,this.FEET_TO_METER=.3048,this.LEVEL_HEIGHT_M=3,this.DEFAULT_BUILDING_HEIGHT_M=6,this.BUILDING_TO_METER={church:20,water_tower:20,bungalow:this.LEVEL_HEIGHT_M,cabin:this.LEVEL_HEIGHT_M,ger:this.LEVEL_HEIGHT_M,houseboat:this.LEVEL_HEIGHT_M,static_caravan:this.LEVEL_HEIGHT_M,kiosk:this.LEVEL_HEIGHT_M,chapel:this.LEVEL_HEIGHT_M,shrine:this.LEVEL_HEIGHT_M,bakehouse:this.LEVEL_HEIGHT_M,toilets:this.LEVEL_HEIGHT_M,stable:this.LEVEL_HEIGHT_M,boathouse:this.LEVEL_HEIGHT_M,hut:this.LEVEL_HEIGHT_M,shed:this.LEVEL_HEIGHT_M,carport:this.LEVEL_HEIGHT_M,garage:this.LEVEL_HEIGHT_M,garages:this.LEVEL_HEIGHT_M,beach_hut:this.LEVEL_HEIGHT_M,container:this.LEVEL_HEIGHT_M,guardhouse:this.LEVEL_HEIGHT_M},this.tilesLoaded=new Set,this.featuresLoaded={},this.loader=new THREE.FileLoader,this.onSrcLoaded=this.onSrcLoaded.bind(this)},update:function(e){if(this.data!==e&&(this.trackElement=null,this.trackPosition=null,this.el.innerHTML="",this.tilesLoaded.clear(),this.featuresLoaded={},this.tileSize_m=this.lat2tileWidth_m(this.data.lat,this.data.zoom),this.tileBase=this.latlon2fractionalTileId(this.data.lat,this.data.lon),this.data.src&&this.loader.load(this.data.src,this.onSrcLoaded),this.loadTilesAround(new THREE.Vector3(0,0,0)),this.data.trackId)){const e=document.getElementById(this.data.trackId);e&&e.object3D&&(this.trackElement=e,this.trackPosition=new THREE.Vector3)}},tick:function(){this.trackElement&&(this.trackElement.object3D.getWorldPosition(this.trackPosition),this.loadTilesAround(this.trackPosition))},onSrcLoaded:function(e){const t=JSON.parse(e);if(0==this.data.lat&&0==this.data.lon){const e=this.features2center(t.features);this.data.lat=e[0],this.data.lon=e[1]}this.addBuildings(t)},lat2tileWidth_m:function(e,t){const n=2**t;return this.EQUATOR_M*Math.cos(e*Math.PI/180)/n},latlon2fractionalTileId:function(e,t){const n=2**this.data.zoom,r=e*Math.PI/180;return[n*(t+180)/360,n*(1-Math.log(Math.tan(r)+1/Math.cos(r))/Math.PI)/2]},logFeature:function(e){let t='{"type": "Feature", "properties": {\n';t+=Object.entries(e.properties).map((([e,t])=>{if(!e.startsWith("tmp_"))return`  "${e}": "${t}"`})).join(",\n")+"\n",t+=`}, "geometry": {"type": "${e.geometry.type}", "coordinates": [\n`;let n=[];for(let t of e.geometry.coordinates)n.push("  ["+t.map((([e,t])=>`[${e.toFixed(5)},${t.toFixed(5)}]`)).join(",")+"]");t+=n.join(",\n")+`\n]},\n "id": "${e.id}"\n},`},logFeatures:function(e,t){let n=[],r=[];for(let o=0;o<e.length;o++){let i=e[o].properties;!("building"in i)||t&&!t.includes(i.name)?"building:part"in i&&r.push(o):n.push(o)}for(let t of n){let n=e[t];this.logFeature(n);for(let t of r){let r=e[t];"tmp_bbox"in r.properties&&n.properties.tmp_bbox.containsBox(r.properties.tmp_bbox)&&this.logFeature(r)}}},features2center:function(e){let t=0,n=0,r=0;for(const o of e){const e=o.geometry.coordinates[0][0];e&&2==e.length&&(n+=e[0],t+=e[1],r+=1)}return t/=r,n/=r,[t,n]},loadOSMbuildingsBbox:async function(e){const t=e.join(","),n=`[out:json][timeout:30];(\n        way["building"](${t});\n        relation["building"]["type"="multipolygon"](${t});\n        way["building:part"](${t});\n        relation["building:part"]["type"="multipolygon"](${t});\n        );out;>;out qt;\n        `,r=await fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:"data="+encodeURIComponent(n)});if(r.ok)return await r.json()},geojsonCoords2plane:function(e,t,n){1==e.length&&e[0].length>2&&(e=e[0]);let r=this.EQUATOR_M*Math.cos(t*Math.PI/180);return e.map((([e,o])=>new THREE.Vector2((e-n)/360*r,(o-t)/360*this.POLES_M)))},createGeometry:function(e,t,n,r){let o=new THREE.Shape(e);if(null===n){const e=o.getLength();n=Math.min(this.DEFAULT_BUILDING_HEIGHT_M,e/5)}for(let e of t)o.holes.push(new THREE.Path(e));n-=r;const i=new THREE.ExtrudeGeometry(o,{depth:n,bevelEnabled:!1});return i.rotateX(-Math.PI/2),r&&i.translate(0,r,0),i},createBuilding:function(e,t,n,r=0){const o=this.createGeometry(e,t,n,r),i=new THREE.MeshBasicMaterial({color:11189196}),a=new THREE.Mesh(o,i),s=document.createElement("a-entity");return s.setObject3D("mesh",a),s.setAttribute("data-ignore-raycaster",""),s.classList.add("autocreated"),s},createDome:function(e,t,n=0){let r=(new THREE.Box2).setFromPoints(e),o=(r.max.x-r.min.x)/2,i=new THREE.Vector2;r.getCenter(i);let a=new THREE.SphereGeometry(1,32,16,0,2*Math.PI,0,.5*Math.PI);a.scale(o,t-n,o),a.translate(i.x,n,-i.y);let s=new THREE.MeshBasicMaterial({color:11189196}),u=new THREE.Mesh(a,s),l=document.createElement("a-entity");return l.setObject3D("mesh",u),l},createDomeGeometry:function(e,t,n=0){let r=(new THREE.Box2).setFromPoints(e),o=(r.max.x-r.min.x)/2,i=new THREE.Vector2;r.getCenter(i);let a=new THREE.SphereGeometry(1,32,16,0,2*Math.PI,0,.5*Math.PI);return a.scale(o,t-n,o),a.translate(i.x,n,-i.y),a},height2meters:function(e){return e.indexOf("'")>0?parseFloat(e)*this.FEET_TO_METER:parseFloat(e)},feature2height:function(e){const t=e.properties;return"height"in t?this.height2meters(t.height):"building:levels"in t?parseInt(t["building:levels"])*this.LEVEL_HEIGHT_M:"roof:height"in t?this.height2meters(t["roof:height"]):t.building in this.BUILDING_TO_METER?this.BUILDING_TO_METER[t.building]:t.man_made in this.BUILDING_TO_METER?this.BUILDING_TO_METER[t.man_made]:null},feature2minHeight:function(e){const t=e.properties;return"min_height"in t?this.height2meters(t.min_height):"building:min_level"in t?parseInt(t["building:min_level"])*this.LEVEL_HEIGHT_M:0},feature2color:function(e){const t=e.properties;return"building:colour"in t?t["building:colour"]:"gray"},feature2building:function(e,t,n){const r=e.geometry.coordinates,o=this.geojsonCoords2plane(r[0],t,n),i=[];for(let e=1;e<r.length;e++)i.push(this.geojsonCoords2plane(r[e],t,n));const a=this.feature2height(e);if(0===a)return null;let s=this.feature2minHeight(e),u=this.createBuilding(o,i,a,s);!("roof:shape"in e.properties)&&!("building:shape"in e.properties)||"dome"!=e.properties["roof:shape"]&&"dome"!=e.properties["building:shape"]||(u=this.createDome(o,a,s));const l=`color: ${this.feature2color(e)}; opacity: 1.0;`;return u.setAttribute("material",l),u},feature2geometry:function(e,t,n){let r=e.geometry.coordinates,o=this.geojsonCoords2plane(r[0],t,n),i=[];for(let e=1;e<r.length;e++)i.push(this.geojsonCoords2plane(r[e],t,n));let a=this.feature2height(e);if(0===a)return null;let s=this.feature2minHeight(e),u=this.createGeometry(o,i,a,s);return!("roof:shape"in e.properties)&&!("building:shape"in e.properties)||"dome"!=e.properties["roof:shape"]&&"dome"!=e.properties["building:shape"]||(u=this.createDomeGeometry(o,a,s)),u},tile2bbox:function(e,t,n){const r=2**n,o=180*Math.atan(Math.sinh(Math.PI*(1-2*t/r)))/Math.PI;return[180*Math.atan(Math.sinh(Math.PI*(1-2*(t+1)/r)))/Math.PI,e/r*360-180,o,(e+1)/r*360-180]},findBaseBuilding:function(e,t,n){let r=0;for(let o of t)n[o].properties.tmp_bbox.containsBox(e.properties.tmp_bbox)&&(r?n[r].properties.tmp_bbox.containsBox(n[o].properties.tmp_bbox)&&(r=o):r=o);return r},isRoof:function(e){return"building:part"in e.properties&&"roof"==e.properties["building:part"]},filterBuildingParts:function(e,t,n,r){let o={},i=new Set,a=new Set,s=0;for(let u of e){let e=u.properties,l=u.geometry,c="LineString"!=l.type&&"Point"!=l.type;if(!t[u.id]&&c&&("building"in e||"building:part"in e)){t[u.id]=!0;let s=u.geometry.coordinates;s[0].length;let l=this.geojsonCoords2plane(s[0],n,r);e.tmp_outline=l,e.tmp_bbox=(new THREE.Box2).setFromPoints(l),o[u.id]=u,"building"in e?i.add(u.id):a.add(u.id)}else!this.featuresLoaded[u.id]&&l.type,s+=1}let u=new Set,l=new Set,c={};for(let e of a){let t=o[e];if(this.isRoof(t))continue;let n=this.findBaseBuilding(t,i,o,u);n&&(u.add(n),c[n]=c[n]||new Set,c[n].add(e))}for(let e of u){if(1==c[e].size)continue;let t=o[e];for(let n of c[e]){let r=o[n];"min_height"in r.properties&&"height"in t.properties&&r.properties.min_height>=t.properties.height||l.add(e)}}let f=new Set;for(let e of Object.keys(o))l.has(e)||f.add(e);return f},addBuildings:function(e){let t=0,n=0,r=0,o=performance.now(),i=this.filterBuildingParts(e.features,this.featuresLoaded,this.data.lat,this.data.lon),a=performance.now();o=a,this.el;let s=[];for(let o of e.features){if(!i.has(o.id)){n+=1;continue}let e=this.feature2geometry(o,this.data.lat,this.data.lon);if(e){e=e.toNonIndexed();let n=new THREE.Color(this.feature2color(o));const r=[],i=e.getAttribute("position");for(let e=0;e<i.count;e++)r.push(n.r,n.g,n.b);const a=new THREE.Float32BufferAttribute(r,3);e.setAttribute("color",a),s.push(e),t+=1}else r+=1}let u=THREE.BufferGeometryUtils.mergeGeometries(s,!1),l=new THREE.MeshStandardMaterial({vertexColors:!0}),c=new THREE.Mesh(u,l);this.el.setObject3D("mesh",c),a=performance.now()},loadTilesAround:function(e){if(this.data.radius_m<=0)return;const t=this.tileBase[0]+e.x/this.tileSize_m,n=this.tileBase[1]+e.z/this.tileSize_m,r=this.data.radius_m/this.tileSize_m,i=2**this.data.zoom;let a=Math.floor(t-r);const s=Math.max(0,Math.floor(n-r));let u=Math.ceil(t+r);const l=Math.min(i,Math.ceil(n+r));a=(a+i)%i,u=(u+i)%i;let c=[];for(let e=s;e<l;e++)for(let t=a;t<u;t++){const n=(e<<this.data.zoom)+t;if(!this.tilesLoaded.has(n)){const r=this.tile2bbox(t,e,this.data.zoom);0==c.length?c=r:(c[0]=Math.min(c[0],r[0]),c[1]=Math.min(c[1],r[1]),c[2]=Math.max(c[2],r[2]),c[3]=Math.max(c[3],r[3])),this.tilesLoaded.add(n)}}c.length>0&&this.loadOSMbuildingsBbox(c).then((e=>{const t=o()(e);this.addBuildings(t)}))}})},989:()=>{AFRAME.registerComponent("osm-tiles",{schema:{lat:{type:"number"},lon:{type:"number"},radius_m:{type:"number",default:500},zoom:{type:"number",default:17},trackId:{type:"string"},url:{type:"string",default:"https://tile.openstreetmap.org/"}},init:function(){this.tilesLoaded=new Set},update:function(e){if(this.data!==e&&(this.trackElement=null,this.trackPosition=null,this.el.innerHTML="",this.tilesLoaded.clear(),this.tileSize_m=this.lat2tileWidth_m(this.data.lat,this.data.zoom),this.tileBase=this.latlon2fractionalTileId(this.data.lat,this.data.lon),this.loadTilesAround(new THREE.Vector3(0,0,0)),this.data.trackId)){const e=document.getElementById(this.data.trackId);e&&e.object3D&&(this.trackElement=e,this.trackPosition=new THREE.Vector3)}},tick:function(){this.trackElement&&(this.trackElement.object3D.getWorldPosition(this.trackPosition),this.loadTilesAround(this.trackPosition))},lat2tileWidth_m:function(e,t){const n=2**t;return 40075017*Math.cos(e*Math.PI/180)/n},latlon2fractionalTileId:function(e,t){const n=2**this.data.zoom,r=e*Math.PI/180;return[n*(t+180)/360,n*(1-Math.log(Math.tan(r)+1/Math.cos(r))/Math.PI)/2]},createTile:function(e,t,n){const r=document.createElement("a-plane");return r.setAttribute("src",n),r.setAttribute("width",this.tileSize_m),r.setAttribute("height",this.tileSize_m),r.setAttribute("position",{x:e,y:t,z:0}),r.setAttribute("data-ignore-raycaster",""),r.classList.add("autocreated"),r},loadTile:function(e,t){const n=this.data.url+`${this.data.zoom}/${e}/${t}.png`,r=(e-this.tileBase[0]+.5)*this.tileSize_m,o=(t-this.tileBase[1]+.5)*this.tileSize_m;return this.createTile(r,-o,n)},loadTilesAround:function(e){const t=this.tileBase[0]+e.x/this.tileSize_m,n=this.tileBase[1]+e.z/this.tileSize_m,r=this.data.radius_m/this.tileSize_m,o=2**this.data.zoom;let i=Math.floor(t-r);const a=Math.max(0,Math.floor(n-r));let s=Math.ceil(t+r);const u=Math.min(o,Math.ceil(n+r));i=(i+o)%o,s=(s+o)%o;for(let e=a;e<u;e++)for(let t=i;t<s;t++){const n=(e<<this.data.zoom)+t;if(!this.tilesLoaded.has(n)){const r=this.loadTile(t,e);this.el.appendChild(r),this.tilesLoaded.add(n)}}}})},835:(e,t,n)=>{e.exports=n(386)},834:(e,t,n)=>{var r,o=n(808),i=n(960),a={};function s(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:o.merge(e,t)}function u(e){for(var t,n,r,o,i,a,s=function(e){return e[0]},u=function(e){return e[e.length-1]},l=function(e,t){return void 0!==e&&void 0!==t&&e.id===t.id},c=[];e.length;)for(t=e.pop().nodes.slice(),c.push(t);e.length&&!l(s(t),u(t));){for(n=s(t),r=u(t),o=0;o<e.length;o++){if(l(r,s(a=e[o].nodes))){i=t.push,a=a.slice(1);break}if(l(r,u(a))){i=t.push,a=a.slice(0,-1).reverse();break}if(l(n,u(a))){i=t.unshift,a=a.slice(0,-1);break}if(l(n,s(a))){i=t.unshift,a=a.slice(1).reverse();break}a=i=null}if(!a)break;e.splice(o,1),i.apply(t,a)}return c}n(835).forEach((function(e){if("all"===e.polygon)a[e.key]=!0;else{var t="whitelist"===e.polygon?"included_values":"excluded_values",n={};e.values.forEach((function(e){n[e]=!0})),a[e.key]={},a[e.key][t]=n}})),r=function(e,t,n){return t=o.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:a,deduplicator:s},t),"undefined"!=typeof XMLDocument&&e instanceof XMLDocument||"undefined"==typeof XMLDocument&&e.childNodes?function(e){var t,n,i=new Array,a=new Array,s=new Array;function u(e,t,n){e.hasAttribute(n)&&(t[n]=e.getAttribute(n))}function l(e,t){var n=o.clone(e);u(t,n,"lat"),u(t,n,"lon"),n.__is_center_placeholder=!0,i.push(n)}function c(e,t){var n=o.clone(e);function r(e,t,r){var o={type:"node",id:"_"+n.type+"/"+n.id+"bounds"+r,lat:e,lon:t};n.nodes.push(o.id),i.push(o)}n.nodes=[],r(t.getAttribute("minlat"),t.getAttribute("minlon"),1),r(t.getAttribute("maxlat"),t.getAttribute("minlon"),2),r(t.getAttribute("maxlat"),t.getAttribute("maxlon"),3),r(t.getAttribute("minlat"),t.getAttribute("maxlon"),4),n.nodes.push(n.nodes[0]),n.__is_bounds_placeholder=!0,a.push(n)}return o.each(e.getElementsByTagName("node"),(function(e,t){var n={};o.each(e.getElementsByTagName("tag"),(function(e){n[e.getAttribute("k")]=e.getAttribute("v")}));var r={type:"node"};u(e,r,"id"),u(e,r,"lat"),u(e,r,"lon"),u(e,r,"version"),u(e,r,"timestamp"),u(e,r,"changeset"),u(e,r,"uid"),u(e,r,"user"),o.isEmpty(n)||(r.tags=n),i.push(r)})),o.each(e.getElementsByTagName("way"),(function(e,r){var s={},f=[];o.each(e.getElementsByTagName("tag"),(function(e){s[e.getAttribute("k")]=e.getAttribute("v")}));var d=!1;o.each(e.getElementsByTagName("nd"),(function(e,t){var n;(n=e.getAttribute("ref"))&&(f[t]=n),!d&&e.getAttribute("lat")&&(d=!0)}));var h={type:"way"};u(e,h,"id"),u(e,h,"version"),u(e,h,"timestamp"),u(e,h,"changeset"),u(e,h,"uid"),u(e,h,"user"),f.length>0&&(h.nodes=f),o.isEmpty(s)||(h.tags=s),(t=e.getElementsByTagName("center")[0])&&l(h,t),d?function(e,t){o.isArray(e.nodes)||(e.nodes=[],o.each(t,(function(t,n){e.nodes.push("_anonymous@"+t.getAttribute("lat")+"/"+t.getAttribute("lon"))}))),o.each(t,(function(t,n){var r,o,a,s;t.getAttribute("lat")&&(r=t.getAttribute("lat"),o=t.getAttribute("lon"),a=e.nodes[n],s={type:"node",id:a,lat:r,lon:o},i.push(s),s.id)}))}(h,e.getElementsByTagName("nd")):(n=e.getElementsByTagName("bounds")[0])&&c(h,n),a.push(h)})),o.each(e.getElementsByTagName("relation"),(function(e,r){var f={},d=[];o.each(e.getElementsByTagName("tag"),(function(e){f[e.getAttribute("k")]=e.getAttribute("v")}));var h=!1;o.each(e.getElementsByTagName("member"),(function(e,t){d[t]={},u(e,d[t],"ref"),u(e,d[t],"role"),u(e,d[t],"type"),(!h&&"node"==d[t].type&&e.getAttribute("lat")||"way"==d[t].type&&e.getElementsByTagName("nd").length>0)&&(h=!0)}));var p={type:"relation"};u(e,p,"id"),u(e,p,"version"),u(e,p,"timestamp"),u(e,p,"changeset"),u(e,p,"uid"),u(e,p,"user"),d.length>0&&(p.members=d),o.isEmpty(f)||(p.tags=f),(t=e.getElementsByTagName("center")[0])&&l(p,t),h?function(e,t){function n(e,t){if(!a.some((function(e){return"way"==e.type&&e.id==t}))){var n={type:"way",id:t,nodes:[]};o.each(e,(function(e){var t,r,o;e.getAttribute("lat")?(t=e.getAttribute("lat"),r=e.getAttribute("lon"),o={type:"node",id:"_anonymous@"+t+"/"+r,lat:t,lon:r},n.nodes.push(o.id),i.push(o)):n.nodes.push(void 0)})),a.push(n)}}o.each(t,(function(t,r){var o,a,s,u;"node"==e.members[r].type?t.getAttribute("lat")&&(o=t.getAttribute("lat"),a=t.getAttribute("lon"),s=e.members[r].ref,u={type:"node",id:s,lat:o,lon:a},i.push(u)):"way"==e.members[r].type&&t.getElementsByTagName("nd").length>0&&(e.members[r].ref="_fullGeom"+e.members[r].ref,n(t.getElementsByTagName("nd"),e.members[r].ref))}))}(p,e.getElementsByTagName("member")):(n=e.getElementsByTagName("bounds")[0])&&c(p,n),s.push(p)})),r(i,a,s)}(e):function(e){var t=new Array,n=new Array,i=new Array;function a(e){var n=o.clone(e);n.lat=e.center.lat,n.lon=e.center.lon,n.__is_center_placeholder=!0,t.push(n)}function s(e){var r=o.clone(e);function i(e,n,o){var i={type:"node",id:"_"+r.type+"/"+r.id+"bounds"+o,lat:e,lon:n};r.nodes.push(i.id),t.push(i)}r.nodes=[],i(r.bounds.minlat,r.bounds.minlon,1),i(r.bounds.maxlat,r.bounds.minlon,2),i(r.bounds.maxlat,r.bounds.maxlon,3),i(r.bounds.minlat,r.bounds.maxlon,4),r.nodes.push(r.nodes[0]),r.__is_bounds_placeholder=!0,n.push(r)}function u(e){o.isArray(e.nodes)||(e.nodes=e.geometry.map((function(e){return null!==e?"_anonymous@"+e.lat+"/"+e.lon:"_anonymous@unknown_location"}))),e.geometry.forEach((function(n,r){var o,i,a;n&&(o=n.lat,i=n.lon,a={type:"node",id:e.nodes[r],lat:o,lon:i},t.push(a))}))}function l(e){e.members.forEach((function(e,r){var o,i,a;"node"==e.type?e.lat&&(o=e.lat,i=e.lon,a={type:"node",id:e.ref,lat:o,lon:i},t.push(a)):"way"==e.type&&e.geometry&&(e.ref="_fullGeom"+e.ref,function(e,r){if(!n.some((function(e){return"way"==e.type&&e.id==r}))){var o={type:"way",id:r,nodes:[]};e.forEach((function(e){var n,r,i;e?(i={type:"node",id:"_anonymous@"+(n=e.lat)+"/"+(r=e.lon),lat:n,lon:r},o.nodes.push(i.id),t.push(i)):o.nodes.push(void 0)})),n.push(o)}}(e.geometry,e.ref))}))}for(var c=0;c<e.elements.length;c++)switch(e.elements[c].type){case"node":var f=e.elements[c];t.push(f);break;case"way":var d=o.clone(e.elements[c]);d.nodes=o.clone(d.nodes),n.push(d),d.center&&a(d),d.geometry?u(d):d.bounds&&s(d);break;case"relation":var h=o.clone(e.elements[c]);h.members=o.clone(h.members),i.push(h);var p=h.members&&h.members.some((function(e){return"node"==e.type&&e.lat||"way"==e.type&&e.geometry&&e.geometry.length>0}));h.center&&a(h),p?l(h):h.bounds&&s(h)}return r(t,n,i)}(e);function r(e,r,a){function s(e,n){if("object"!=typeof n&&(n={}),"function"==typeof t.uninterestingTags)return!t.uninterestingTags(e,n);for(var r in e)if(!0!==t.uninterestingTags[r]&&!0!==n[r]&&n[r]!==e[r])return!0;return!1}function c(e){var t={timestamp:e.timestamp,version:e.version,changeset:e.changeset,user:e.user,uid:e.uid};for(var n in t)void 0===t[n]&&delete t[n];return t}for(var f=new Object,d=new Object,h=0;h<e.length;h++)void 0!==f[(_=e[h]).id]&&(_=t.deduplicator(_,f[_.id])),f[_.id]=_,void 0!==_.tags&&s(_.tags)&&(d[_.id]=!0);for(h=0;h<a.length;h++)if(o.isArray(a[h].members))for(var p=0;p<a[h].members.length;p++)"node"==a[h].members[p].type&&(d[a[h].members[p].ref]=!0);var y=new Object,g=new Object;for(h=0;h<r.length;h++){var m=r[h];if(y[m.id]&&(m=t.deduplicator(m,y[m.id])),y[m.id]=m,o.isArray(m.nodes))for(p=0;p<m.nodes.length;p++)"object"!=typeof m.nodes[p]&&(g[m.nodes[p]]=!0,m.nodes[p]=f[m.nodes[p]])}var b=new Array;for(var v in f){var _=f[v];g[v]&&!d[v]||b.push(_)}var E=new Array;for(h=0;h<a.length;h++)E[(T=a[h]).id]&&(T=t.deduplicator(T,E[T.id])),E[T.id]=T;var w,M={node:{},way:{},relation:{}};for(var v in E){var T=E[v];if(o.isArray(T.members))for(p=0;p<T.members.length;p++){var j=T.members[p].type,A=T.members[p].ref;"number"!=typeof A&&(A=A.replace("_fullGeom","")),M[j]?(void 0===M[j][A]&&(M[j][A]=[]),M[j][A].push({role:T.members[p].role,rel:T.id,reltags:T.tags})):t.verbose&&console.warn("Relation",T.type+"/"+T.id,"member",j+"/"+A,"ignored because it has an invalid type")}else t.verbose&&console.warn("Relation",T.type+"/"+T.id,"ignored because it has no members")}var k=[];for(h=0;h<b.length;h++)if(void 0!==b[h].lon&&void 0!==b[h].lat){var L={type:"Feature",id:b[h].type+"/"+b[h].id,properties:{type:b[h].type,id:b[h].id,tags:b[h].tags||{},relations:M.node[b[h].id]||[],meta:c(b[h])},geometry:{type:"Point",coordinates:[+b[h].lon,+b[h].lat]}};b[h].__is_center_placeholder&&(L.properties.geometry="center"),n?n(L):k.push(L)}else t.verbose&&console.warn("POI",b[h].type+"/"+b[h].id,"ignored because it lacks coordinates");var I=[],H=[];for(h=0;h<a.length;h++)if(E[a[h].id]===a[h]){if(void 0!==a[h].tags&&("route"==a[h].tags.type||"waterway"==a[h].tags.type)){if(!o.isArray(a[h].members)){t.verbose&&console.warn("Route",a[h].type+"/"+a[h].id,"ignored because it has no members");continue}if(a[h].members.forEach((function(e){y[e.ref]&&!s(y[e.ref].tags)&&(y[e.ref].is_skippablerelationmember=!0)})),!1===(L=x(a[h]))){t.verbose&&console.warn("Route relation",a[h].type+"/"+a[h].id,"ignored because it has invalid geometry");continue}function x(e){var n,r,i,a=!1;if(n=(n=e.members.filter((function(e){return"way"===e.type}))).map((function(n){var r=y[n.ref];return void 0===r||void 0===r.nodes?(t.verbose&&console.warn("Route "+e.type+"/"+e.id,"tainted by a missing or incomplete  way",n.type+"/"+n.ref),void(a=!0)):{id:n.ref,role:n.role,way:r,nodes:r.nodes.filter((function(r){return void 0!==r||(a=!0,t.verbose&&console.warn("Route",e.type+"/"+e.id,"tainted by a way",n.type+"/"+n.ref,"with a missing node"),!1)}))}})),r=u(n=o.compact(n)),i=o.compact(r.map((function(e){return o.compact(e.map((function(e){return[+e.lon,+e.lat]})))}))),0==i.length)return t.verbose&&console.warn("Route",e.type+"/"+e.id,"contains no coordinates"),!1;var s={type:"Feature",id:e.type+"/"+e.id,properties:{type:e.type,id:e.id,tags:e.tags||{},relations:M[e.type][e.id]||[],meta:c(e)},geometry:{type:1===i.length?"LineString":"MultiLineString",coordinates:1===i.length?i[0]:i}};return a&&(t.verbose&&console.warn("Route",e.type+"/"+e.id,"is tainted"),s.properties.tainted=!0),s}n?n(i(L)):H.push(L)}if(void 0!==a[h].tags&&("multipolygon"==a[h].tags.type||"boundary"==a[h].tags.type)){if(!o.isArray(a[h].members)){t.verbose&&console.warn("Multipolygon",a[h].type+"/"+a[h].id,"ignored because it has no members");continue}var O=0;for(p=0;p<a[h].members.length;p++)"outer"==a[h].members[p].role?O++:t.verbose&&"inner"!=a[h].members[p].role&&console.warn("Multipolygon",a[h].type+"/"+a[h].id,"member",a[h].members[p].type+"/"+a[h].members[p].ref,'ignored because it has an invalid role: "'+a[h].members[p].role+'"');if(a[h].members.forEach((function(e){y[e.ref]&&("outer"!==e.role||s(y[e.ref].tags,a[h].tags)||(y[e.ref].is_skippablerelationmember=!0),"inner"!==e.role||s(y[e.ref].tags)||(y[e.ref].is_skippablerelationmember=!0))})),0==O){t.verbose&&console.warn("Multipolygon relation",a[h].type+"/"+a[h].id,"ignored because it has no outer ways");continue}var B=!1;if(1!=O||s(a[h].tags,{type:!0})||(B=!0),L=null,B){var S=a[h].members.filter((function(e){return"outer"===e.role}))[0];if(void 0===(S=y[S.ref])){t.verbose&&console.warn("Multipolygon relation",a[h].type+"/"+a[h].id,"ignored because outer way",S.type+"/"+S.ref,"is missing");continue}S.is_skippablerelationmember=!0,L=P(S,a[h])}else L=P(a[h],a[h]);if(!1===L){t.verbose&&console.warn("Multipolygon relation",a[h].type+"/"+a[h].id,"ignored because it has invalid geometry");continue}function P(e,n){var r,i,a,s,l=!1,f=B?"way":"relation",d="number"==typeof e.id?e.id:+e.id.replace("_fullGeom","");function h(e){var t,n=function(e,t){for(var n=0;n<t.length;n++)if(o(t[n],e))return!0;return!1},r=function(e){return e.map((function(e){return[+e.lat,+e.lon]}))},o=function(e,t){for(var n=e[0],r=e[1],o=!1,i=0,a=t.length-1;i<t.length;a=i++){var s=t[i][0],u=t[i][1],l=t[a][0],c=t[a][1];u>r!=c>r&&n<(l-s)*(r-u)/(c-u)+s&&(o=!o)}return o};for(e=r(e),t=0;t<i.length;t++)if(n(r(i[t]),e))return t}r=(r=n.members.filter((function(e){return"way"===e.type}))).map((function(e){var n=y[e.ref];return void 0===n||void 0===n.nodes?(t.verbose&&console.warn("Multipolygon",f+"/"+d,"tainted by a missing or incomplete way",e.type+"/"+e.ref),void(l=!0)):{id:e.ref,role:e.role||"outer",way:n,nodes:n.nodes.filter((function(n){return void 0!==n||(l=!0,t.verbose&&console.warn("Multipolygon",f+"/"+d,"tainted by a way",e.type+"/"+e.ref,"with a missing node"),!1)}))}})),r=o.compact(r),i=u(r.filter((function(e){return"outer"===e.role}))),a=u(r.filter((function(e){return"inner"===e.role}))),s=i.map((function(e){return[e]}));for(var p=0;p<a.length;p++){var g=h(a[p]);void 0!==g?s[g].push(a[p]):t.verbose&&console.warn("Multipolygon",f+"/"+d,"contains an inner ring with no containing outer")}var m=[];if(m=o.compact(s.map((function(e){var n=o.compact(e.map((function(e){if(!(e.length<4))return o.compact(e.map((function(e){return[+e.lon,+e.lat]})));t.verbose&&console.warn("Multipolygon",f+"/"+d,"contains a ring with less than four nodes")})));if(0!=n.length)return n;t.verbose&&console.warn("Multipolygon",f+"/"+d,"contains an empty ring cluster")}))),0==m.length)return t.verbose&&console.warn("Multipolygon",f+"/"+d,"contains no coordinates"),!1;var b="MultiPolygon";1===m.length&&(b="Polygon",m=m[0]);var v={type:"Feature",id:e.type+"/"+d,properties:{type:e.type,id:d,tags:e.tags||{},relations:M[e.type][e.id]||[],meta:c(e)},geometry:{type:b,coordinates:m}};return l&&(t.verbose&&console.warn("Multipolygon",f+"/"+d,"is tainted"),v.properties.tainted=!0),v}n?n(i(L)):H.push(L)}}for(h=0;h<r.length;h++)if(y[r[h].id]===r[h])if(o.isArray(r[h].nodes)){if(!r[h].is_skippablerelationmember){"number"!=typeof r[h].id&&(r[h].id=+r[h].id.replace("_fullGeom","")),r[h].tainted=!1,r[h].hidden=!1;var R=new Array;for(p=0;p<r[h].nodes.length;p++)"object"==typeof r[h].nodes[p]?R.push([+r[h].nodes[p].lon,+r[h].nodes[p].lat]):(t.verbose&&console.warn("Way",r[h].type+"/"+r[h].id,"is tainted by an invalid node"),r[h].tainted=!0);if(R.length<=1)t.verbose&&console.warn("Way",r[h].type+"/"+r[h].id,"ignored because it contains too few nodes");else{var G="LineString";void 0!==r[h].nodes[0]&&void 0!==r[h].nodes[r[h].nodes.length-1]&&r[h].nodes[0].id===r[h].nodes[r[h].nodes.length-1].id&&(void 0!==r[h].tags&&l(r[h].tags)||r[h].__is_bounds_placeholder)&&(G="Polygon",R=[R]),L={type:"Feature",id:r[h].type+"/"+r[h].id,properties:{type:r[h].type,id:r[h].id,tags:r[h].tags||{},relations:M.way[r[h].id]||[],meta:c(r[h])},geometry:{type:G,coordinates:R}},r[h].tainted&&(t.verbose&&console.warn("Way",r[h].type+"/"+r[h].id,"is tainted"),L.properties.tainted=!0),r[h].__is_bounds_placeholder&&(L.properties.geometry="bounds"),n?n(i(L)):"LineString"==G?I.push(L):H.push(L)}}}else t.verbose&&console.warn("Way",r[h].type+"/"+r[h].id,"ignored because it has no nodes");return!!n||((w={type:"FeatureCollection",features:[]}).features=w.features.concat(H),w.features=w.features.concat(I),w.features=w.features.concat(k),t.flatProperties&&w.features.forEach((function(e){e.properties=o.merge(e.properties.meta,e.properties.tags,{id:e.properties.type+"/"+e.properties.id})})),i(w))}function l(e){var n=t.polygonFeatures;if("function"==typeof n)return n(e);if("no"===e.area)return!1;for(var r in e){var o=e[r],i=n[r];if(void 0!==i&&"no"!==o){if(!0===i)return!0;if(i.included_values&&!0===i.included_values[o])return!0;if(i.excluded_values&&!0!==i.excluded_values[o])return!0}}return!1}},r.toGeojson=r,e.exports=r},808:function(e,t,n){e=n.nmd(e),function(){var r,o="__lodash_hash_undefined__",i=1,a=2,s=1/0,u=9007199254740991,l="[object Arguments]",c="[object Array]",f="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Function]",y="[object GeneratorFunction]",g="[object Map]",m="[object Number]",b="[object Object]",v="[object Promise]",_="[object RegExp]",E="[object Set]",w="[object String]",M="[object Symbol]",T="[object WeakMap]",j="[object ArrayBuffer]",A="[object DataView]",k="[object Float32Array]",L="[object Float64Array]",I="[object Int8Array]",H="[object Int16Array]",x="[object Int32Array]",O="[object Uint8Array]",B="[object Uint8ClampedArray]",S="[object Uint16Array]",P="[object Uint32Array]",R=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G=/^\w*$/,F=/^\./,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V=/\\(\\)?/g,N=/\w*$/,D=/^\[object .+?Constructor\]$/,$=/^(?:0|[1-9]\d*)$/,C={};C[k]=C[L]=C[I]=C[H]=C[x]=C[O]=C[B]=C[S]=C[P]=!0,C[l]=C[c]=C[j]=C[f]=C[A]=C[d]=C[h]=C[p]=C[g]=C[m]=C[b]=C[_]=C[E]=C[w]=C[T]=!1;var U={};U[l]=U[c]=U[j]=U[A]=U[f]=U[d]=U[k]=U[L]=U[I]=U[H]=U[x]=U[g]=U[m]=U[b]=U[_]=U[E]=U[w]=U[M]=U[O]=U[B]=U[S]=U[P]=!0,U[h]=U[p]=U[T]=!1;var W="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,X="object"==typeof self&&self&&self.Object===Object&&self,Q=W||X||Function("return this")(),q=t&&!t.nodeType&&t,J=q&&e&&!e.nodeType&&e,K=J&&J.exports===q,Y=K&&W.process,Z=function(){try{return Y&&Y.binding("util")}catch(e){}}(),ee=Z&&Z.isTypedArray;function te(e,t){return e.set(t[0],t[1]),e}function ne(e,t){return e.add(t),e}function re(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););return e}function oe(e,t,n,r){var o=-1,i=e?e.length:0;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function ie(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function ae(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function se(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ue(e,t){return function(n){return e(t(n))}}function le(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var ce,fe=Array.prototype,de=Function.prototype,he=Object.prototype,pe=Q["__core-js_shared__"],ye=(ce=/[^.]+$/.exec(pe&&pe.keys&&pe.keys.IE_PROTO||""))?"Symbol(src)_1."+ce:"",ge=de.toString,me=he.hasOwnProperty,be=ge.call(Object),ve=he.toString,_e=RegExp("^"+ge.call(me).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ee=K?Q.Buffer:r,we=Q.Symbol,Me=Q.Uint8Array,Te=ue(Object.getPrototypeOf,Object),je=Object.create,Ae=he.propertyIsEnumerable,ke=fe.splice,Le=Object.getOwnPropertySymbols,Ie=Ee?Ee.isBuffer:r,He=ue(Object.keys,Object),xe=Math.max,Oe=_t(Q,"DataView"),Be=_t(Q,"Map"),Se=_t(Q,"Promise"),Pe=_t(Q,"Set"),Re=_t(Q,"WeakMap"),Ge=_t(Object,"create"),Fe=!Ae.call({valueOf:1},"valueOf"),ze=Ht(Oe),Ve=Ht(Be),Ne=Ht(Se),De=Ht(Pe),$e=Ht(Re),Ce=we?we.prototype:r,Ue=Ce?Ce.valueOf:r,We=Ce?Ce.toString:r;function Xe(){}function Qe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Je(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ke(e){var t=-1,n=e?e.length:0;for(this.__data__=new Je;++t<n;)this.add(e[t])}function Ye(e){this.__data__=new qe(e)}function Ze(e,t){var n=Pt(e)||St(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!me.call(e,i)||o&&("length"==i||Mt(i,r))||n.push(i);return n}function et(e,t,n){(n!==r&&!Bt(e[t],n)||"number"==typeof t&&n===r&&!(t in e))&&(e[t]=n)}function tt(e,t,n){var o=e[t];me.call(e,t)&&Bt(o,n)&&(n!==r||t in e)||(e[t]=n)}function nt(e,t){for(var n=e.length;n--;)if(Bt(e[n][0],t))return n;return-1}function rt(e,t,n,o,i,a,s){var u;if(o&&(u=a?o(e,i,a,s):o(e)),u!==r)return u;if(!Nt(e))return e;var c=Pt(e);if(c){if(u=function(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&me.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!t)return yt(e,u)}else{var h=wt(e),v=h==p||h==y;if(Ft(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if(h==b||h==l||v&&!a){if(ae(e))return a?e:{};if(u=function(e){return"function"!=typeof e.constructor||jt(e)?{}:Nt(t=Te(e))?je(t):{};var t}(v?{}:e),!t)return function(e,t){return gt(e,Et(e),t)}(e,function(e,t){return e&&gt(t,Kt(t),e)}(u,e))}else{if(!U[h])return a?e:{};u=function(e,t,n,r){var o,i=e.constructor;switch(t){case j:return pt(e);case f:case d:return new i(+e);case A:return function(e,t){var n=t?pt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case k:case L:case I:case H:case x:case O:case B:case S:case P:return function(e,t){var n=t?pt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case g:return function(e,t,n){return oe(t?n(se(e),!0):se(e),te,new e.constructor)}(e,r,n);case m:case w:return new i(e);case _:return function(e){var t=new e.constructor(e.source,N.exec(e));return t.lastIndex=e.lastIndex,t}(e);case E:return function(e,t,n){return oe(t?n(le(e),!0):le(e),ne,new e.constructor)}(e,r,n);case M:return o=e,Ue?Object(Ue.call(o)):{}}}(e,h,rt,t)}}s||(s=new Ye);var T=s.get(e);if(T)return T;if(s.set(e,u),!c)var R=n?function(e){return function(e,t,n){var r=t(e);return Pt(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,Kt,Et)}(e):Kt(e);return re(R||e,(function(r,i){R&&(r=e[i=r]),tt(u,i,rt(r,t,n,o,i,e,s))})),u}Qe.prototype.clear=function(){this.__data__=Ge?Ge(null):{}},Qe.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Qe.prototype.get=function(e){var t=this.__data__;if(Ge){var n=t[e];return n===o?r:n}return me.call(t,e)?t[e]:r},Qe.prototype.has=function(e){var t=this.__data__;return Ge?t[e]!==r:me.call(t,e)},Qe.prototype.set=function(e,t){return this.__data__[e]=Ge&&t===r?o:t,this},qe.prototype.clear=function(){this.__data__=[]},qe.prototype.delete=function(e){var t=this.__data__,n=nt(t,e);return!(n<0||(n==t.length-1?t.pop():ke.call(t,n,1),0))},qe.prototype.get=function(e){var t=this.__data__,n=nt(t,e);return n<0?r:t[n][1]},qe.prototype.has=function(e){return nt(this.__data__,e)>-1},qe.prototype.set=function(e,t){var n=this.__data__,r=nt(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Je.prototype.clear=function(){this.__data__={hash:new Qe,map:new(Be||qe),string:new Qe}},Je.prototype.delete=function(e){return vt(this,e).delete(e)},Je.prototype.get=function(e){return vt(this,e).get(e)},Je.prototype.has=function(e){return vt(this,e).has(e)},Je.prototype.set=function(e,t){return vt(this,e).set(e,t),this},Ke.prototype.add=Ke.prototype.push=function(e){return this.__data__.set(e,o),this},Ke.prototype.has=function(e){return this.__data__.has(e)},Ye.prototype.clear=function(){this.__data__=new qe},Ye.prototype.delete=function(e){return this.__data__.delete(e)},Ye.prototype.get=function(e){return this.__data__.get(e)},Ye.prototype.has=function(e){return this.__data__.has(e)},Ye.prototype.set=function(e,t){var n=this.__data__;if(n instanceof qe){var r=n.__data__;if(!Be||r.length<199)return r.push([e,t]),this;n=this.__data__=new Je(r)}return n.set(e,t),this};var ot,it=(ot=function(e,t){return e&&at(e,t,Kt)},function(e,t){if(null==e)return e;if(!Rt(e))return ot(e,t);for(var n=e.length,r=-1,o=Object(e);++r<n&&!1!==t(o[r],r,o););return e}),at=function(e,t,n){for(var r=-1,o=Object(e),i=n(e),a=i.length;a--;){var s=i[++r];if(!1===t(o[s],s,o))break}return e};function st(e,t){for(var n=0,o=(t=Tt(t,e)?[t]:ht(t)).length;null!=e&&n<o;)e=e[It(t[n++])];return n&&n==o?e:r}function ut(e,t){return null!=e&&t in Object(e)}function lt(e,t,n,o,s){return e===t||(null==e||null==t||!Nt(e)&&!Dt(t)?e!=e&&t!=t:function(e,t,n,o,s,u){var p=Pt(e),y=Pt(t),v=c,T=c;p||(v=(v=wt(e))==l?b:v),y||(T=(T=wt(t))==l?b:T);var k=v==b&&!ae(e),L=T==b&&!ae(t),I=v==T;if(I&&!k)return u||(u=new Ye),p||Wt(e)?mt(e,t,n,o,s,u):function(e,t,n,r,o,s,u){switch(n){case A:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case j:return!(e.byteLength!=t.byteLength||!r(new Me(e),new Me(t)));case f:case d:case m:return Bt(+e,+t);case h:return e.name==t.name&&e.message==t.message;case _:case w:return e==t+"";case g:var l=se;case E:var c=s&a;if(l||(l=le),e.size!=t.size&&!c)return!1;var p=u.get(e);if(p)return p==t;s|=i,u.set(e,t);var y=mt(l(e),l(t),r,o,s,u);return u.delete(e),y;case M:if(Ue)return Ue.call(e)==Ue.call(t)}return!1}(e,t,v,n,o,s,u);if(!(s&a)){var H=k&&me.call(e,"__wrapped__"),x=L&&me.call(t,"__wrapped__");if(H||x){var O=H?e.value():e,B=x?t.value():t;return u||(u=new Ye),n(O,B,o,s,u)}}return!!I&&(u||(u=new Ye),function(e,t,n,o,i,s){var u=i&a,l=Kt(e),c=l.length;if(c!=Kt(t).length&&!u)return!1;for(var f=c;f--;){var d=l[f];if(!(u?d in t:me.call(t,d)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var p=!0;s.set(e,t),s.set(t,e);for(var y=u;++f<c;){var g=e[d=l[f]],m=t[d];if(o)var b=u?o(m,g,d,t,e,s):o(g,m,d,e,t,s);if(!(b===r?g===m||n(g,m,o,i,s):b)){p=!1;break}y||(y="constructor"==d)}if(p&&!y){var v=e.constructor,_=t.constructor;v==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _||(p=!1)}return s.delete(e),s.delete(t),p}(e,t,n,o,s,u))}(e,t,lt,n,o,s))}function ct(e){return"function"==typeof e?e:null==e?en:"object"==typeof e?Pt(e)?(o=e[0],s=e[1],Tt(o)&&At(s)?kt(It(o),s):function(e){var t=qt(e,o);return t===r&&t===s?Jt(e,o):lt(s,t,r,i|a)}):(n=function(e){for(var t=Kt(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,At(o)]}return t}(t=e),1==n.length&&n[0][2]?kt(n[0][0],n[0][1]):function(e){return e===t||function(e,t,n,o){var s=n.length,u=s;if(null==e)return!u;for(e=Object(e);s--;){var l=n[s];if(l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<u;){var c=(l=n[s])[0],f=e[c],d=l[1];if(l[2]){if(f===r&&!(c in e))return!1}else{var h,p=new Ye;if(!(h===r?lt(d,f,o,i|a,p):h))return!1}}return!0}(e,0,n)}):nn(e);var t,n,o,s}function ft(e){if(!Nt(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=jt(e),n=[];for(var r in e)("constructor"!=r||!t&&me.call(e,r))&&n.push(r);return n}function dt(e,t,n,o,i){if(e!==t){if(!Pt(t)&&!Wt(t))var a=ft(t);re(a||t,(function(s,u){if(a&&(s=t[u=s]),Nt(s))i||(i=new Ye),function(e,t,n,o,i,a,s){var u=e[n],l=t[n],c=s.get(l);if(c)et(e,n,c);else{var f=a?a(u,l,n+"",e,t,s):r,d=f===r;d&&(f=l,Pt(l)||Wt(l)?Pt(u)?f=u:Gt(u)?f=yt(u):(d=!1,f=rt(l,!0)):$t(l)||St(l)?St(u)?f=Xt(u):!Nt(u)||o&&zt(u)?(d=!1,f=rt(l,!0)):f=u:d=!1),d&&(s.set(l,f),i(f,l,o,a,s),s.delete(l)),et(e,n,f)}}(e,t,u,n,dt,o,i);else{var l=o?o(e[u],s,u+"",e,t,i):r;l===r&&(l=s),et(e,u,l)}}))}}function ht(e){return Pt(e)?e:Lt(e)}function pt(e){var t=new e.constructor(e.byteLength);return new Me(t).set(new Me(e)),t}function yt(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function gt(e,t,n,o){n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],u=o?o(n[s],e[s],s,n,e):r;tt(n,s,u===r?e[s]:u)}return n}function mt(e,t,n,o,s,u){var l=s&a,c=e.length,f=t.length;if(c!=f&&!(l&&f>c))return!1;var d=u.get(e);if(d&&u.get(t))return d==t;var h=-1,p=!0,y=s&i?new Ke:r;for(u.set(e,t),u.set(t,e);++h<c;){var g=e[h],m=t[h];if(o)var b=l?o(m,g,h,t,e,u):o(g,m,h,e,t,u);if(b!==r){if(b)continue;p=!1;break}if(y){if(!ie(t,(function(e,t){if(!y.has(t)&&(g===e||n(g,e,o,s,u)))return y.add(t)}))){p=!1;break}}else if(g!==m&&!n(g,m,o,s,u)){p=!1;break}}return u.delete(e),u.delete(t),p}function bt(){var e=Xe.iteratee||tn;return e=e===tn?ct:e,arguments.length?e(arguments[0],arguments[1]):e}function vt(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function _t(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return function(e){return!(!Nt(e)||(t=e,ye&&ye in t))&&(zt(e)||ae(e)?_e:D).test(Ht(e));var t}(n)?n:r}var Et=Le?ue(Le,Object):rn,wt=function(e){return ve.call(e)};function Mt(e,t){return!!(t=null==t?u:t)&&("number"==typeof e||$.test(e))&&e>-1&&e%1==0&&e<t}function Tt(e,t){if(Pt(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ct(e))||G.test(e)||!R.test(e)||null!=t&&e in Object(t)}function jt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||he)}function At(e){return e==e&&!Nt(e)}function kt(e,t){return function(n){return null!=n&&n[e]===t&&(t!==r||e in Object(n))}}(Oe&&wt(new Oe(new ArrayBuffer(1)))!=A||Be&&wt(new Be)!=g||Se&&wt(Se.resolve())!=v||Pe&&wt(new Pe)!=E||Re&&wt(new Re)!=T)&&(wt=function(e){var t=ve.call(e),n=t==b?e.constructor:r,o=n?Ht(n):r;if(o)switch(o){case ze:return A;case Ve:return g;case Ne:return v;case De:return E;case $e:return T}return t});var Lt=Ot((function(e){e=Qt(e);var t=[];return F.test(e)&&t.push(""),e.replace(z,(function(e,n,r,o){t.push(r?o.replace(V,"$1"):n||e)})),t}));function It(e){if("string"==typeof e||Ct(e))return e;var t=e+"";return"0"==t&&1/e==-s?"-0":t}function Ht(e){if(null!=e){try{return ge.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function xt(e,t){return(Pt(e)?re:it)(e,bt(t,3))}function Ot(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new(Ot.Cache||Je),n}function Bt(e,t){return e===t||e!=e&&t!=t}function St(e){return Gt(e)&&me.call(e,"callee")&&(!Ae.call(e,"callee")||ve.call(e)==l)}Ot.Cache=Je;var Pt=Array.isArray;function Rt(e){return null!=e&&Vt(e.length)&&!zt(e)}function Gt(e){return Dt(e)&&Rt(e)}var Ft=Ie||on;function zt(e){var t=Nt(e)?ve.call(e):"";return t==p||t==y}function Vt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=u}function Nt(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Dt(e){return!!e&&"object"==typeof e}function $t(e){if(!Dt(e)||ve.call(e)!=b||ae(e))return!1;var t=Te(e);if(null===t)return!0;var n=me.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ge.call(n)==be}function Ct(e){return"symbol"==typeof e||Dt(e)&&ve.call(e)==M}var Ut,Wt=ee?(Ut=ee,function(e){return Ut(e)}):function(e){return Dt(e)&&Vt(e.length)&&!!C[ve.call(e)]};function Xt(e){return gt(e,Yt(e))}function Qt(e){return null==e?"":function(e){if("string"==typeof e)return e;if(Ct(e))return We?We.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}(e)}function qt(e,t,n){var o=null==e?r:st(e,t);return o===r?n:o}function Jt(e,t){return null!=e&&function(e,t,n){for(var r,o=-1,i=(t=Tt(t,e)?[t]:ht(t)).length;++o<i;){var a=It(t[o]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}return r||!!(i=e?e.length:0)&&Vt(i)&&Mt(a,i)&&(Pt(e)||St(e))}(e,t,ut)}function Kt(e){return Rt(e)?Ze(e):function(e){if(!jt(e))return He(e);var t=[];for(var n in Object(e))me.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}function Yt(e){return Rt(e)?Ze(e,!0):ft(e)}var Zt=function(e){return t=function(t,n){var o=-1,i=n.length,a=i>1?n[i-1]:r,s=i>2?n[2]:r;for(a=e.length>3&&"function"==typeof a?(i--,a):r,s&&function(e,t,n){if(!Nt(n))return!1;var r=typeof t;return!!("number"==r?Rt(n)&&Mt(t,n.length):"string"==r&&t in n)&&Bt(n[t],e)}(n[0],n[1],s)&&(a=i<3?r:a,i=1),t=Object(t);++o<i;){var u=n[o];u&&e(t,u,o)}return t},n=xe(n===r?t.length-1:n,0),function(){for(var e=arguments,r=-1,o=xe(e.length-n,0),i=Array(o);++r<o;)i[r]=e[n+r];r=-1;for(var a=Array(n+1);++r<n;)a[r]=e[r];return a[n]=i,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(t,this,a)};var t,n}((function(e,t,n){dt(e,t,n)}));function en(e){return e}function tn(e){return ct("function"==typeof e?e:rt(e,!0))}function nn(e){return Tt(e)?(t=It(e),function(e){return null==e?r:e[t]}):function(e){return function(t){return st(t,e)}}(e);var t}function rn(){return[]}function on(){return!1}Xe.compact=function(e){for(var t=-1,n=e?e.length:0,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o},Xe.iteratee=tn,Xe.keys=Kt,Xe.keysIn=Yt,Xe.memoize=Ot,Xe.merge=Zt,Xe.property=nn,Xe.toPlainObject=Xt,Xe.clone=function(e){return rt(e,!1,!0)},Xe.eq=Bt,Xe.forEach=xt,Xe.get=qt,Xe.hasIn=Jt,Xe.identity=en,Xe.isArguments=St,Xe.isArray=Pt,Xe.isArrayLike=Rt,Xe.isArrayLikeObject=Gt,Xe.isBuffer=Ft,Xe.isEmpty=function(e){if(Rt(e)&&(Pt(e)||"string"==typeof e||"function"==typeof e.splice||Ft(e)||St(e)))return!e.length;var t=wt(e);if(t==g||t==E)return!e.size;if(Fe||jt(e))return!He(e).length;for(var n in e)if(me.call(e,n))return!1;return!0},Xe.isFunction=zt,Xe.isLength=Vt,Xe.isObject=Nt,Xe.isObjectLike=Dt,Xe.isPlainObject=$t,Xe.isSymbol=Ct,Xe.isTypedArray=Wt,Xe.stubArray=rn,Xe.stubFalse=on,Xe.toString=Qt,Xe.each=xt,Xe.VERSION="4.15.0",J&&((J.exports=Xe)._=Xe,q._=Xe)}.call(this)},386:e=>{"use strict";e.exports=JSON.parse('[{"key":"building","polygon":"all"},{"key":"highway","polygon":"whitelist","values":["services","rest_area","escape","elevator"]},{"key":"natural","polygon":"blacklist","values":["coastline","cliff","ridge","arete","tree_row"]},{"key":"landuse","polygon":"all"},{"key":"waterway","polygon":"whitelist","values":["riverbank","dock","boatyard","dam"]},{"key":"amenity","polygon":"all"},{"key":"leisure","polygon":"all"},{"key":"barrier","polygon":"whitelist","values":["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{"key":"railway","polygon":"whitelist","values":["station","turntable","roundhouse","platform"]},{"key":"area","polygon":"all"},{"key":"boundary","polygon":"all"},{"key":"man_made","polygon":"blacklist","values":["cutline","embankment","pipeline"]},{"key":"power","polygon":"whitelist","values":["plant","substation","generator","transformer"]},{"key":"place","polygon":"all"},{"key":"shop","polygon":"all"},{"key":"aeroway","polygon":"blacklist","values":["taxiway"]},{"key":"tourism","polygon":"all"},{"key":"historic","polygon":"all"},{"key":"public_transport","polygon":"all"},{"key":"office","polygon":"all"},{"key":"building:part","polygon":"all"},{"key":"military","polygon":"all"},{"key":"ruins","polygon":"all"},{"key":"area:highway","polygon":"all"},{"key":"craft","polygon":"all"},{"key":"golf","polygon":"all"},{"key":"indoor","polygon":"all"}]')}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n(167),n(989),{}})()));