!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}("undefined"!=typeof self?self:this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function o(e,t,n,o){var s=1/o,r=1/n;return a[0].set(s*t,r*e+r),a[1].set(s*t,r*e),a[2].set(s*t+s,r*e),a[3].set(s*t+s,r*e+r),a}var a=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2,new THREE.Vector2];AFRAME.registerComponent("atlas-uvs",{dependencies:["geometry"],schema:{totalColumns:{type:"int",default:1},totalRows:{type:"int",default:1},column:{type:"int",default:1},row:{type:"int",default:1}},update:function(){var e=this.data,t=o(e.row-1,e.column-1,e.totalRows,e.totalColumns),n=this.el.getObject3D("mesh").geometry;n.faceVertexUvs[0][0][0].copy(t[0]),n.faceVertexUvs[0][0][1].copy(t[1]),n.faceVertexUvs[0][0][2].copy(t[3]),n.faceVertexUvs[0][1][0].copy(t[1]),n.faceVertexUvs[0][1][1].copy(t[2]),n.faceVertexUvs[0][1][2].copy(t[3]),n.uvsNeedUpdate=!0}}),AFRAME.registerComponent("dynamic-texture-atlas",{schema:{canvasId:{default:"dynamicAtlas"},canvasHeight:{default:1024},canvasWidth:{default:1024},debug:{default:!1},numColumns:{default:8},numRows:{default:8}},multiple:!0,init:function(){var e=this.canvas=document.createElement("canvas");e.id=this.data.canvasId,e.height=this.data.canvasHeight,e.width=this.data.canvasWidth,this.ctx=e.getContext("2d"),document.body.appendChild(e),this.data.debug&&(e.style.left=0,e.style.top=0,e.style.position="fixed",e.style.zIndex=9999999999)},drawTexture:function(e,t,n,a,s){var r=this,u=this.canvas,i=this.data;e.complete||(e.onload=function(){r.drawTexture(e,t,n)});var c=s||u.height/i.numRows,d=a||u.width/i.numColumns;return this.ctx.drawImage(e,d*t,d*n,d,c),o(t,n,i.numRows,i.numColumns)}}),e.exports.getGridUvs=o}])});