!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var a in i)("object"==typeof exports?exports:t)[a]=i[a]}}(self,(()=>(()=>{var t={631:t=>{var e=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2,new THREE.Vector2];function i(t,i,a,r){const n=1/r,s=1/a;return e[0].set(n*i,s*t+s),e[1].set(n*i,s*t),e[2].set(n*i+n,s*t),e[3].set(n*i+n,s*t+s),e}AFRAME.registerComponent("atlas-uvs",{dependencies:["geometry"],schema:{totalColumns:{type:"int",default:1},totalRows:{type:"int",default:1},column:{type:"int",default:1},row:{type:"int",default:1}},update:function(){const t=this.data,e=i(t.row-1,t.column-1,t.totalRows,t.totalColumns),a=this.el.getObject3D("mesh").geometry;var r=new Float32Array([e[0].x,e[0].y,e[3].x,e[3].y,e[1].x,e[1].y,e[2].x,e[2].y]);a.setAttribute("uv",new THREE.BufferAttribute(r,2)),a.uvsNeedUpdate=!0}}),AFRAME.registerComponent("dynamic-texture-atlas",{schema:{canvasId:{default:"dynamicAtlas"},canvasHeight:{default:1024},canvasWidth:{default:1024},debug:{default:!1},numColumns:{default:8},numRows:{default:8}},multiple:!0,init:function(){const t=this.canvas=document.createElement("canvas");t.id=this.data.canvasId,t.height=this.data.canvasHeight,t.width=this.data.canvasWidth,this.ctx=t.getContext("2d"),document.body.appendChild(t),this.data.debug&&(t.style.left=0,t.style.top=0,t.style.position="fixed",t.style.zIndex=9999999999)},drawTexture:function(t,e,a,r,n){const s=this.canvas,o=this.data;t.complete||(t.onload=()=>{this.drawTexture(t,e,a)});const l=n||s.height/o.numRows,d=r||s.width/o.numColumns;return this.ctx.drawImage(t,d*e,d*a,d,l),i(e,a,o.numRows,o.numColumns)}}),t.exports.getGridUvs=i},844:(t,e,i)=>{var a=i(199),r=i(394),n={"bike-lane":1.8,"drive-lane":3,divider:.3,"parking-lane":3,sidewalk:3,"sidewalk-tree":3,"turn-lane":3,"bus-lane":3,"light-rail":3,streetcar:3,"sidewalk-wayfinding":3,"sidewalk-lamp":3,"sidewalk-bike-rack":3,"sidewalk-bench":3,"scooter-drop-zone":3,scooter:1.8,bikeshare:3,"flex-zone-curb":3,"transit-shelter":3,temporary:3,"food-truck":3,"flex-zone":3,"outdoor-dining":3,parklet:3,utilities:3,"magic-carpet":3};function s(t){for(var e=t.objectMixinId,i=void 0===e?"":e,a=t.parentEl,r=void 0===a?null:a,n=t.step,s=void 0===n?15:n,o=t.radius,l=void 0===o?60:o,d=t.rotation,c=void 0===d?"0 0 0":d,m=t.positionXYString,u=void 0===m?"0 0":m,p=t.randomY,h=void 0!==p&&p,g=-1*l;g<=l;g+=s){var x=document.createElement("a-entity");x.setAttribute("class",i),x.setAttribute("position",u+" "+g),x.setAttribute("mixin",i),h?x.setAttribute("rotation","0 "+Math.floor(361*Math.random())+" 0"):x.setAttribute("rotation",c),r.append(x)}}function o(t){var e=document.createElement("a-entity");return e.setAttribute("class","stencils-parent"),e.setAttribute("position",t),e}function l(t){var e=document.createElement("a-entity");return e.setAttribute("class","track-parent"),e.setAttribute("position",t+" -0.2 0"),e}function d(t){var e=document.createElement("a-entity");return e.setAttribute("class","safehit-parent"),e.setAttribute("position",t+" 0 0"),e}function c(t,e){var i=document.createElement("a-entity");return i.setAttribute("class",e),i.setAttribute("position",t+" 0 0"),i}function m(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2.25,r=c(e,"dividers-".concat(t,"-parent"));return s({objectMixinId:"dividers-".concat(t),parentEl:r,step:a,radius:i}),r}function u(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2.25,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"0 0 0",n=c(e,"".concat(t,"-parent"));return s({objectMixinId:t,parentEl:n,step:a,radius:i,rotation:r}),n}function p(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)}function h(t,e){return Math.random()*(e-t)+t}function g(t,e,i){var a=Math.floor((e-t)/i)+1;return Array(a).fill().map((function(e,a){return t+a*i})).sort((function(){return.5-Math.random()}))}function x(t,e,i,a){var r,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"random",s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=[-.37*e,.37*e],l=g(-.5*a,.5*a,1.5);r="sparse"===i?parseInt(.0625*a,10):"normal"===i?parseInt(.125*a,10):parseInt(.25*a,10);for(var d=c(t,"pedestrians-parent"),m=0;m<r;m++){var u,x=!0===s?"a_char"+String(p(1,8)):"char"+String(p(1,16)),b=h(o[0],o[1]),f=l.pop(),y=b+" 0.2 "+f,v=document.createElement("a-entity"),_=a/1.4*1e3,A="inbound";v.setAttribute("position",y),v.setAttribute("mixin",x),Math.random()<.5&&"random"===n?(v.setAttribute("rotation","0 180 0"),A="outbound"):"outbound"===n&&(v.setAttribute("rotation","0 0 0"),A="outbound"),u=("outbound"===A?Math.abs(-a/2-f):Math.abs(a/2-f))/1.4*1e3,s&&(v.setAttribute("animation__1","property","position"),v.setAttribute("animation__1","easing","linear"),v.setAttribute("animation__1","loop","false"),v.setAttribute("animation__2","property","position"),v.setAttribute("animation__2","easing","linear"),v.setAttribute("animation__2","loop","true"),"outbound"===A?(v.setAttribute("animation__1","to",{z:-a/2}),v.setAttribute("animation__1","dur",u),v.setAttribute("animation__2","from",{x:b,y:0,z:a/2}),v.setAttribute("animation__2","to",{x:b,y:0,z:-a/2}),v.setAttribute("animation__2","delay",u),v.setAttribute("animation__2","dur",_)):(v.setAttribute("animation__1","to",{z:a/2}),v.setAttribute("animation__1","dur",u),v.setAttribute("animation__2","from",{x:b,y:0,z:-a/2}),v.setAttribute("animation__2","to",{x:b,y:0,z:a/2}),v.setAttribute("animation__2","delay",u),v.setAttribute("animation__2","dur",_))),d.append(v)}return d}function b(t){return"colored"===t?"surface-red bus-lane":"grass"===t?"surface-green bus-lane":"bus-lane"}function f(t){var e=(new THREE.Box3).setFromObject(t);return{x:e.max.x-e.min.x,y:e.max.y-e.min.y,z:e.max.z-e.min.z}}function y(t,e){return{start:-.5*t+.5*e,end:.5*t-.5*e}}function v(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=t.object3D,n=a||f(r)[e],s=y(i,n),o=s.start,l=s.end,d="set".concat(e.toUpperCase()),c=h(o,l);return r.position[d](c),c}function _(t,e,i,a,r){if(r){var n="inbound"===t[0]?0:180,s=document.createElement("a-entity");return s.setAttribute("class",e),s.setAttribute("position",i+" 0 0"),s.setAttribute("rotation","0 "+n+" 0"),s.setAttribute("mixin",e),s.addEventListener("model-loaded",(function(t){v(t.target,"z",a)}),{once:!0}),s}}function A(t,e,i,a){if(a){var r=document.createElement("a-entity"),n=90*t,s=document.createElement("a-entity");s.setAttribute("rotation","0 "+n+" 0"),s.setAttribute("mixin","bus");var o=v(s,"z",i,12);return s.setAttribute("position",e+" 0 "+o),r.append(s),r}}function w(t,e,i,a){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;if(n){var l,d,c=r?.5:0,m=a/c*1e3,u=t[0];l="outbound"===u?Math.abs(-a/2-0):Math.abs(a/2-0),d=l/c*1e3;var p=document.createElement("a-entity"),h="inbound"===t[0]?0:180;if("pedestrian"===t[1])return x(e,i,"normal",a,t[0],r);var b={car:{mixin:"sedan-rig",wheelDiameter:.76,length:5.17},microvan:{mixin:"suv-rig",wheelDiameter:.84,length:5},truck:{mixin:"box-truck-rig",wheelDiameter:1.05,length:6.95}},f=o||b[t[1]].length;if(s>1){var y=g(-a/2+f/2,a/2-f/2,f),_=y.slice(0,s);_.forEach((function(t){var e=A(),i=t-.5+2*(o-parseFloat(e.getAttribute("length"))-.2)*Math.random();e.setAttribute("position","z",i)}))}else A();return p}function A(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;carType=t[1];var n=b[carType],s=document.createElement("a-entity");return s.setAttribute("rotation","0 "+h+" 0"),s.setAttribute("mixin",n.mixin),s.setAttribute("wheel",{speed:c,wheelDiameter:n.wheelDiameter}),s.setAttribute("length",n.length),i||(i=v(s,"z",a,n.length)),s.setAttribute("position",e+" 0 "+i),r&&(s.setAttribute("animation__1","property","position"),s.setAttribute("animation__1","easing","linear"),s.setAttribute("animation__1","loop","false"),s.setAttribute("animation__2","property","position"),s.setAttribute("animation__2","easing","linear"),s.setAttribute("animation__2","loop","true"),"outbound"===u?(s.setAttribute("animation__1","from",{x:e,y:0,z:i}),s.setAttribute("animation__1","to",{z:-a/2}),s.setAttribute("animation__1","dur",d),s.setAttribute("animation__2","from",{x:e,y:0,z:a/2}),s.setAttribute("animation__2","to",{x:e,y:0,z:-a/2}),s.setAttribute("animation__2","delay",d),s.setAttribute("animation__2","dur",m)):(s.setAttribute("animation__1","from",{x:e,y:0,z:i}),s.setAttribute("animation__1","to",{z:a/2}),s.setAttribute("animation__1","dur",d),s.setAttribute("animation__2","from",{x:e,y:0,z:-a/2}),s.setAttribute("animation__2","to",{x:e,y:0,z:a/2}),s.setAttribute("animation__2","delay",d),s.setAttribute("animation__2","dur",m))),p.append(s),s}}function k(t,e,i){var a=document.createElement("a-entity"),r=document.createElement("a-entity"),n="left"===t[0]?0:180;return r.setAttribute("position",e+" 0 0"),r.setAttribute("rotation","0 "+n+" 0"),r.setAttribute("mixin","food-trailer"),r.addEventListener("model-loaded",(function(t){v(t.target,"z",i)}),{once:!0}),a.append(r),a}function E(t,e){if(e){var i=document.createElement("a-entity"),a=document.createElement("a-entity");a.setAttribute("position",t+" 1.75 0"),a.setAttribute("rotation","0 0 0"),a.setAttribute("mixin","magic-carpet"),i.append(a);var r=document.createElement("a-entity");return r.setAttribute("position",t+" 1.75 0"),r.setAttribute("rotation","0 0 0"),r.setAttribute("mixin","Character_1_M"),i.append(r),i}}function M(t,e){var i=document.createElement("a-entity"),a=document.createElement("a-entity");a.setAttribute("mixin","outdoor_dining");var r=v(a,"z",e,2.27);return a.setAttribute("position",t+" 0 "+r),i.append(a),i}function C(t,e,i,a,r){if(r){var n=document.createElement("a-entity"),s=document.createElement("a-entity"),o="inbound"===t[0]?0:180;s.setAttribute("rotation","0 "+o+" 0"),"bike-lane"===i?s.setAttribute("mixin","Bicycle_1"):s.setAttribute("mixin","ElectricScooter_1");var l=v(s,"z",a,2.03);return s.setAttribute("position",e+" 0 "+l),n.append(s),n}}function S(t,e,i){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(a){var r=document.createElement("a-entity"),n=document.createElement("a-entity"),s="inbound"===t[1]?0:180;n.setAttribute("rotation","0 "+s+" 0"),"taxi"===t[0]?n.setAttribute("mixin","sedan-taxi"):"rideshare"===t[0]&&n.setAttribute("mixin","sedan-rig");var o=v(n,"z",i,5);return n.setAttribute("position",e+" 0 "+o),r.append(n),r}}function j(t){var e,i=document.createElement("a-entity");return(e=document.createElement("a-entity")).setAttribute("position",t+" 1 0"),e.setAttribute("mixin","wayfinding-box"),i.append(e),(e=document.createElement("a-entity")).setAttribute("position",t+" 1.2 0.06"),e.setAttribute("geometry","primitive: plane; width: 0.8; height: 1.6"),e.setAttribute("material","src:#wayfinding-map"),i.append(e),(e=document.createElement("a-entity")).setAttribute("position",t+" 1.2 -0.06"),e.setAttribute("rotation","0 180 0"),e.setAttribute("geometry","primitive: plane; width: 0.8; height: 1.6"),e.setAttribute("material","src:#wayfinding-map"),i.append(e),i}function z(t){var e=document.createElement("a-entity");return e.setAttribute("class","bench-parent"),e.setAttribute("position",t+" 0.2 3.5"),e}function R(t){var e=document.createElement("a-entity");return e.setAttribute("class","bikerack-parent"),e.setAttribute("position",t+" 0 -3.5"),e}function I(t,e){var i=document.createElement("a-entity");i.setAttribute("class","bikeshare"),i.setAttribute("position",t+" 0 0"),i.setAttribute("mixin","bikeshare");var a="left"===e[0]?90:270;return i.setAttribute("rotation","0 "+a+" 0"),i}function B(t,e){var i=document.createElement("a-entity");i.setAttribute("class","parklet"),i.setAttribute("position",t+" .02 0"),i.setAttribute("mixin","parklet");var a="left"===e[0]?90:270;return i.setAttribute("rotation","0 "+a+" 0"),i}function L(t){var e=document.createElement("a-entity");return e.setAttribute("class","tree-parent"),e.setAttribute("position",t+" 0.2 7"),e}function F(t){var e=document.createElement("a-entity");return e.setAttribute("class","lamp-parent"),e.setAttribute("position",t+" 0.2 0"),e}function O(t,e){var i=document.createElement("a-entity");return i.setAttribute("class","bus-stop"),i.setAttribute("position",t+" 0 0"),i.setAttribute("rotation","0 "+e+" 0"),i.setAttribute("mixin","bus-stop"),i}function N(t,e,i,a,r,n,s){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=document.createElement("a-entity"),d=n/150,c=t+" "+d+" 1",m=t+" 1 1";return"sidewalk"===r||1===o?(l.setAttribute("geometry","primitive","box"),l.setAttribute("geometry","height: 0.4"),l.setAttribute("geometry","depth",n),l.setAttribute("scale",m)):r.match("lane")?(i-=.1,l.setAttribute("geometry","primitive","box"),l.setAttribute("geometry","height: 0.2"),l.setAttribute("geometry","depth",n),l.setAttribute("scale",m)):(l.setAttribute("rotation","270 "+a+" 0"),l.setAttribute("scale",c)),l.setAttribute("position",e+" "+i+" 0"),l.setAttribute("mixin",r),0!==s.length&&l.setAttribute("material","repeat: ".concat(s[0]," ").concat(s[1])),l}t.exports.processSegments=function(t,e,i,c,p){var h=i/2;i>12&&(h=(i-12)/2),e&&(t=function(t){function e(t){return"lane"===t.slice(t.length-4)||"light-rail"===t||"streetcar"===t||"flex-zone"===t}return t.reduce((function(t,i,a,r){if(0===a)return t.concat(i);var n=r[a-1];if(e(i.type)&&e(n.type)){var s="solid";i.type===n.type&&(s="dashed"),("drive-lane"===i.type&&"turn-lane"===n.type||"drive-lane"===n.type&&"turn-lane"===i.type)&&(s="dashed"),i.variantString.split("|")[0]!==n.variantString.split("|")[0]&&(s="doubleyellow","bike-lane"===i.type&&"bike-lane"===n.type&&(s="shortdashedyellow"),"flex-zone"!==i.type&&"flex-zone"!==n.type||(s="solid")),"turn-lane"===i.type&&"shared"===i.variantString.split("|")[1]?s="soliddashedyellow":"turn-lane"===n.type&&"shared"===n.variantString.split("|")[1]&&(s="soliddashedyellowinverted"),"parking-lane"!==i.type&&"parking-lane"!==n.type||(s="invisible"),t.push({type:"separator",variantString:s,width:0})}return(e(i.type)&&"divider"===n.type||e(n.type)&&"divider"===i.type)&&t.push({type:"separator",variantString:"solid",width:0}),t.push(i),t}),[])}(t));var g=function(t){var e=document.createElement("a-entity"),i=0-r.calcStreetWidth(t)/2;return e.setAttribute("position",i+" 0 0"),e}(t);g.classList.add("street-parent");for(var f,y=0,v=0;v<t.length;v++){var P=document.createElement("a-entity");P.classList.add("segment-parent-"+v);var D=t[v].type,T=.3048*t[v].width,U=T/n[D],V=(y+=T)-.5*T,H=0,Y=t[v].variantString.split("|"),J="inbound"===Y[0]||"inbound"===Y[1]?180:0,G="outbound"===Y[0]||"outbound"===Y[1]?1:-1,W=t[v].type,q=[];if("drive-lane"===t[v].type&&"sharrow"===Y[1]){var X=o(V+" 0.015 0");s({objectMixinId:"stencils sharrow",parentEl:X,rotation:"-90 "+J+" 0",step:10,radius:h}),P.append(X)}else if("bike-lane"===t[v].type||"scooter"===t[v].type){var $=o(V+" 0.015 0");W="red"===(f=Y[1])?"surface-red bike-lane":"green"===f?"surface-green bike-lane":"bike-lane",s({objectMixinId:"stencils bike-arrow",parentEl:$,rotation:"-90 "+J+" 0",step:20,radius:h}),P.append($),P.append(C(Y,V,t[v].type,i,p))}else if("light-rail"===t[v].type||"streetcar"===t[v].type){W=b(Y[1]);var Q="streetcar"===t[v].type?"trolley":"tram";P.append(_(Y,Q,V,i,p));var K=l(V);s({objectMixinId:"track",parentEl:K,step:20.25,radius:h}),P.append(K)}else if("turn-lane"===t[v].type){W="drive-lane";var Z=Y[1];"inbound"===Y[0]&&(Z=Z.replace(/left|right/g,(function(t){return"left"===t?"right":"left"}))),"shared"===Y[1]&&(Z="left"),"left-right-straight"===Y[1]&&(Z="all");var tt="stencils "+Z,et=o(V+" 0.015 0");if(s({objectMixinId:tt,parentEl:et,rotation:"-90 "+J+" 0",step:15,radius:h}),P.append(et),"shared"===Y[1]){var it=o(V+" 0.015 "+-3*G);s({objectMixinId:tt,parentEl:it,rotation:"-90 "+(J+180)+" 0",step:15,radius:h}),P.append(it)}}else if("divider"===t[v].type&&"bollard"===Y[0]){W="divider";var at=d(V);s({objectMixinId:"safehit",parentEl:at,step:4,radius:h}),P.append(at),q[0]=1,q[1]=parseInt(i)}else if("divider"===t[v].type&&"flowers"===Y[0])W="grass",P.append(m("flowers",V,h,2.25));else if("divider"===t[v].type&&"planting-strip"===Y[0])W="grass",P.append(m("planting-strip",V,h,2.25));else if("divider"===t[v].type&&"planter-box"===Y[0])W="grass",P.append(m("planter-box",V,h,2.45));else if("divider"===t[v].type&&"palm-tree"===Y[0]){W="grass";var rt=L(V);s({objectMixinId:"palm-tree",parentEl:rt,randomY:!0,radius:h}),P.append(rt)}else if("divider"===t[v].type&&"big-tree"===Y[0]){W="grass";var nt=L(V);s({objectMixinId:"tree3",parentEl:nt,randomY:!0,radius:h}),P.append(nt)}else if("divider"===t[v].type&&"bush"===Y[0])W="grass",P.append(m("bush",V,h,2.25));else if("divider"===t[v].type&&"dome"===Y[0])W="divider",P.append(m("dome",V,h,2.25)),q[0]=1,q[1]=parseInt(i);else if("temporary"===t[v].type&&"barricade"===Y[0])W="drive-lane",P.append(u("temporary-barricade",V,h,2.25));else if("temporary"===t[v].type&&"traffic-cone"===Y[0])W="drive-lane",P.append(u("temporary-traffic-cone",V,h,2.25));else if("temporary"===t[v].type&&"jersey-barrier-plastic"===Y[0])W="drive-lane",P.append(u("temporary-jersey-barrier-plastic",V,h,2.25));else if("temporary"===t[v].type&&"jersey-barrier-concrete"===Y[0])W="drive-lane",P.append(u("temporary-jersey-barrier-concrete",V,h,2.93));else if("bus-lane"===t[v].type){W=b(Y[1]),P.append(A(G,V,i,p));var st=void 0;s({objectMixinId:"stencils word-bus",parentEl:st=o(V+" 0.015 0"),rotation:"-90 "+J+" 0",step:50,radius:h}),P.append(st),s({objectMixinId:"stencils word-taxi",parentEl:st=o(V+" 0.015 10"),rotation:"-90 "+J+" 0",step:50,radius:h}),P.append(st),s({objectMixinId:"stencils word-only",parentEl:st=o(V+" 0.015 20"),rotation:"-90 "+J+" 0",step:50,radius:h}),P.append(st)}else if("drive-lane"===t[v].type){var ot="animated"===Y[2]||c;P.append(w(Y,V,T,i,ot,p))}else if("food-truck"===t[v].type)W="drive-lane",P.append(k(Y,V,i));else if("flex-zone"===t[v].type){W="bright-lane",P.append(S(Y,V,i,p));var lt=void 0;s({objectMixinId:"stencils word-loading-small",parentEl:lt=o(V+" 0.015 5"),rotation:"-90 "+J+" 0",step:50,radius:h}),P.append(lt),s({objectMixinId:"stencils word-only-small",parentEl:lt=o(V+" 0.015 -5"),rotation:"-90 "+J+" 0",step:50,radius:h}),P.append(lt)}else if("sidewalk"===t[v].type&&"empty"!==Y[0]){var dt="animated"===Y[1]||c;P.append(x(V,T,Y[0],i,"random",dt))}else if("sidewalk-wayfinding"===t[v].type)P.append(j(V));else if("sidewalk-bench"===t[v].type){var ct=z(V),mt="right"===Y[0]?-90:90;"center"===Y[0]?(s({objectMixinId:"bench_orientation_center",parentEl:ct,rotation:"0 "+mt+" 0",radius:h}),P.append(ct)):(s({objectMixinId:"bench",parentEl:ct,rotation:"0 "+mt+" 0",radius:h}),P.append(ct))}else if("sidewalk-bike-rack"===t[v].type){var ut=R(V);s({objectMixinId:"bikerack",parentEl:ut,rotation:"0 "+("sidewalk-parallel"===Y[1]?90:0)+" 0",radius:h}),P.append(ut)}else if("magic-carpet"===t[v].type)W="drive-lane",P.append(E(V,p));else if("outdoor-dining"===t[v].type)W="road"===Y[1]?"drive-lane":"sidewalk",P.append(M(V,i));else if("parklet"===t[v].type)W="drive-lane",P.append(B(V,Y));else if("bikeshare"===t[v].type)P.append(I(V,Y));else if("utilities"===t[v].type){var pt=u("utility_pole",V,h,15,"right"===Y[0]?"0 180 0":"0 0 0");P.append(pt)}else if("sidewalk-tree"===t[v].type){var ht=L(V);s({objectMixinId:Q="palm-tree"===Y[0]?"palm-tree":"tree3",parentEl:ht,randomY:!0,radius:h}),P.append(ht)}else if("sidewalk-lamp"!==t[v].type||"modern"!==Y[1]&&"pride"!==Y[1]){if("sidewalk-lamp"===t[v].type&&"traditional"===Y[1]){var gt=F(V);s({objectMixinId:"lamp-traditional",parentEl:gt,radius:h}),P.append(gt)}else if("transit-shelter"===t[v].type){var xt="left"===Y[0]?90:270;P.append(O(V,xt))}else if("separator"===t[v].type&&"dashed"===Y[0])W="markings dashed-stripe",H+=.01,U=1,q[0]=1,q[1]=parseInt(i/6);else if("separator"===t[v].type&&"solid"===Y[0])W="markings solid-stripe",H+=.01,U=1;else if("separator"===t[v].type&&"doubleyellow"===Y[0])W="markings solid-doubleyellow",H+=.01,U=1;else if("separator"===t[v].type&&"shortdashedyellow"===Y[0])W="markings yellow short-dashed-stripe",H+=.01,U=1,q[0]=1,q[1]=parseInt(i/3);else if("separator"===t[v].type&&"soliddashedyellow"===Y[0])W="markings yellow solid-dashed",H+=.01,U=1;else if("separator"===t[v].type&&"soliddashedyellowinverted"===Y[0])W="markings yellow solid-dashed",H+=.01,U=1,J="180",q[0]=1,q[1]=parseInt(i/6);else if("parking-lane"===t[v].type){var bt=void 0;W="bright-lane",P.append(w([Y[0],"car"],V,T,i,!1,p,5,6)),"left"===Y[1]?s({objectMixinId:"stencils parking-t",parentEl:bt=o(V+T/2-.75+" 0.015 0"),rotation:"-90 180 0",step:6,radius:h}):s({objectMixinId:"stencils parking-t",parentEl:bt=o(V-T/2+.75+" 0.015 0"),rotation:"-90 0 0",step:6,radius:h}),P.append(bt)}}else{var ft=F(V);"both"===Y[0]?(s({objectMixinId:"lamp-modern-double",parentEl:ft,rotation:"0 0 0",radius:h}),P.append(ft)):(s({objectMixinId:"lamp-modern",parentEl:ft,rotation:"0 "+("right"===Y[0]?0:180)+" 0",radius:h}),P.append(ft)),"pride"!==Y[1]||"right"!==Y[0]&&"both"!==Y[0]||s({objectMixinId:"pride-flag",parentEl:ft,positionXYString:"0.409 5",radius:h}),"pride"!==Y[1]||"left"!==Y[0]&&"both"!==Y[0]||s({objectMixinId:"pride-flag",parentEl:ft,rotation:"0 -180 0",positionXYString:"-0.409 5",radius:h})}a.isSidewalk(t[v].type)&&(W="sidewalk",q[0]=T/1.5,q[1]=parseInt(i/2));var yt=t[v].elevation;P.append(N(U,V,H,J,W,i,q,yt)),g.append(P)}return g},t.exports.processBuildings=function(t,e,i,r,n){var o=document.createElement("a-entity"),l=.45*n;return o.classList.add("buildings-parent"),o.setAttribute("position","0 0.2 0"),[t,e].forEach((function(t,e){if(0!==t.length){var d=0===e?"left":"right",c="left"===d?-1:1,m=(75+i/2)*c;if(r){var u=JSON.stringify(a.createGroundArray(t,n)),p=document.createElement("a-entity");p.setAttribute("create-from-json","jsonString",u),"right"===d?p.setAttribute("position",m-55+" 0.2 0"):p.setAttribute("position",m+55+" 0.2 0"),p.classList.add("ground-"+d),o.appendChild(p)}var h={x:m,y:0,z:1===e?n/2:-n/2},g="block-"+d;switch(t){case"narrow":case"wide":h.x+=-72*c;break;case"residential":h.x+=-64*c,h.y=-.58,g="suburbia-"+d,o.setAttribute("position","0 0.17 0");break;case"arcade":h.x+=-70.5*c,g="arcade-"+d}if(function(t,e,i,r){var s=a.createBuildingsArray(n,t),l=JSON.stringify(s),d=document.createElement("a-entity");d.setAttribute("rotation","0 "+90*r+" 0"),d.setAttribute("create-from-json","jsonString",l),o.append(d),d.classList.add(e),d.setAttribute("position",i),o.append(d)}(t,g,h,c),"waterfront"===t){var x=m-150*c/2,b=document.createElement("a-entity");b.setAttribute("class","seawall-parent"),b.setAttribute("position",x+" 0 0"),b.classList.add("seawall-parent-"+d),o.appendChild(b),s({objectMixinId:"seawall",parentEl:b,rotation:"0 "+("left"===d?-90:90)+" 0",step:15,radius:l})}if("fence"===t||"parking-lot"===t){var f=m-150*c/2,y=document.createElement("a-entity");y.setAttribute("class","fence-parent"),y.setAttribute("position",f+" 0 4.625"),y.classList.add("fence-parent-"+m),s({objectMixinId:"fence",parentEl:y,rotation:"0 "+("right"===d?-90:90)+" 0",step:9.25,radius:l}),o.appendChild(y)}}})),o}},234:()=>{var t,e;t=!1,e=new THREE.FileLoader,window.AFRAME.registerElement("street-assets",{prototype:Object.create(window.AFRAME.ANode.prototype,{createdCallback:{value:function(){this.setAttribute("src",""),this.isAssetItem=!0,this.isAssets=!0,this.fileLoader=e,this.timeout=null}},attachedCallback:{value:function(){if(!t){this.parentNode&&this.parentNode.hasLoaded&&console.warn("Assets have already loaded. street-assets may have problems"),t=!0,this.innerHTML=function(t,e){t||(t="https://assets.3dstreet.app/"),console.log("[street]","Using street assets from",t);var i={"sidewalk-props":'\n        \x3c!-- sidewalk props --\x3e\n        <img id="wayfinding-map" src="'.concat(t,'objects/wayfinding.jpg" crossorigin="anonymous" />\n        <a-asset-item id="streetProps" src="').concat(t,'sets/street-props/gltf-exports/draco/street-props.glb"></a-asset-item>\n        <a-mixin id="outdoor_dining" gltf-part="src: #streetProps; part: outdoor_dining"></a-mixin>\n        <a-mixin id="bench_orientation_center" gltf-part="src: #streetProps; part: bench_orientation_center"></a-mixin>\n        <a-mixin id="parklet" gltf-part="src: #streetProps; part: parklet"></a-mixin>\n        <a-mixin id="utility_pole" gltf-part="src: #streetProps; part: utility_pole"></a-mixin>\n        <a-mixin id="lamp-modern" gltf-part="src: #streetProps; part: street-light"></a-mixin>\n        <a-mixin id="lamp-modern-double" gltf-part="src: #streetProps; part: street-light-double"></a-mixin>\n        <a-mixin id="bikerack" gltf-part="src: #streetProps; part: bike_rack"></a-mixin>\n        <a-mixin id="bikeshare" gltf-part="src: #streetProps; part: bike_share"></a-mixin>\n        <a-mixin id="lamp-traditional" gltf-part="src: #streetProps; part: lamp_post_traditional" scale="2 2 2"></a-mixin>\n        <a-mixin id="palm-tree" gltf-part="src: #streetProps; part: palmtree" scale="1 1.5 1"></a-mixin>\n        <a-mixin id="bench" gltf-part="src: #streetProps; part: park_bench"></a-mixin>\n        <a-mixin id="seawall" gltf-part="src: #streetProps; part: sea_wall"></a-mixin>\n        <a-mixin id="track" gltf-part="src: #streetProps; part: track"></a-mixin>\n        <a-mixin id="tree3" gltf-part="src: #streetProps; part: tree-01" scale="1.25 1.25 1.25"></a-mixin>\n        <a-mixin id="bus-stop" gltf-part="src: #streetProps; part: transit-shelter-1"></a-mixin>\n        <a-mixin id="pride-flag" position="0.409 3.345 0" rotation="0 0 0" scale="0.5 0.75 0" geometry="width:2;height:2;primitive:plane" material="side:double; src:').concat(t,'materials/rainbow-flag-poles_512.png;transparent: true;"></a-mixin>\n        <a-mixin id="wayfinding-box" geometry="primitive: box; height: 2; width: 0.84; depth: 0.1" material="color: gray"></a-mixin>\n      '),people:'\n        \x3c!-- human characters --\x3e\n        <a-asset-item id="humans" src="'.concat(t,'sets/human-characters-poses-1/gltf-exports/draco/human-characters-poses-1.glb"></a-asset-item>\n        <a-mixin id="char1" gltf-part="src: #humans; part: Character_1"></a-mixin>\n        <a-mixin id="char2" gltf-part="src: #humans; part: Character_2"></a-mixin>\n        <a-mixin id="char3" gltf-part="src: #humans; part: Character_3"></a-mixin>\n        <a-mixin id="char4" gltf-part="src: #humans; part: Character_4"></a-mixin>\n        <a-mixin id="char5" gltf-part="src: #humans; part: Character_5"></a-mixin>\n        <a-mixin id="char6" gltf-part="src: #humans; part: Character_6"></a-mixin>\n        <a-mixin id="char7" gltf-part="src: #humans; part: Character_7"></a-mixin>\n        <a-mixin id="char8" gltf-part="src: #humans; part: Character_8"></a-mixin>\n        <a-asset-item id="humans2" src="').concat(t,'sets/human-characters-poses-2/gltf-exports/draco/human-characters-poses-2.glb"></a-asset-item>\n        <a-mixin id="char9" gltf-part="src: #humans2; part: Character_9"></a-mixin>\n        <a-mixin id="char10" gltf-part="src: #humans2; part: Character_10"></a-mixin>\n        <a-mixin id="char11" gltf-part="src: #humans2; part: Character_11"></a-mixin>\n        <a-mixin id="char12" gltf-part="src: #humans2; part: Character_12"></a-mixin>\n        <a-mixin id="char13" gltf-part="src: #humans2; part: Character_13"></a-mixin>\n        <a-mixin id="char14" gltf-part="src: #humans2; part: Character_14"></a-mixin>\n        <a-mixin id="char15" gltf-part="src: #humans2; part: Character_15"></a-mixin>\n        <a-mixin id="char16" gltf-part="src: #humans2; part: Character_16"></a-mixin>\n      '),"people-rigged":'          \n        <a-asset-item id="character1walk" src="'.concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-1-walk.glb"></a-asset-item>\n        <a-mixin id="a_char1" gltf-model="#character1walk" animation-mixer></a-mixin>\n        \n        <a-asset-item id="character2walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-2-walk.glb"></a-asset-item>\n        <a-mixin id="a_char2" gltf-model="#character2walk" animation-mixer></a-mixin>\n        <a-asset-item id="character3walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-3-walk.glb"></a-asset-item>\n        <a-mixin id="a_char3" gltf-model="#character3walk" animation-mixer></a-mixin>\n        <a-asset-item id="character4walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-4-walk.glb"></a-asset-item>\n        <a-mixin id="a_char4" gltf-model="#character4walk" animation-mixer></a-mixin>\n        <a-asset-item id="character5walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-5-walk.glb"></a-asset-item>\n        <a-mixin id="a_char5" gltf-model="#character5walk" animation-mixer></a-mixin>\n        <a-asset-item id="character6walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-6-walk.glb"></a-asset-item>\n        <a-mixin id="a_char6" gltf-model="#character6walk" animation-mixer></a-mixin>\n        <a-asset-item id="character7walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-7-walk.glb"></a-asset-item>\n        <a-mixin id="a_char7" gltf-model="#character7walk" animation-mixer></a-mixin>\n        <a-asset-item id="character8walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-8-walk.glb"></a-asset-item>\n        <a-mixin id="a_char8" gltf-model="#character8walk" animation-mixer></a-mixin>\n      '),vehicles:'\n        \x3c!-- vehicles --\x3e\n        <a-asset-item id="vehicles" src="'.concat(t,'sets/vehicles/gltf-exports/draco/vehicles.glb"></a-asset-item>\n        <a-mixin id="box-truck" gltf-part="src: #vehicles; part: box-truck"></a-mixin>\n        <a-mixin id="city-bus" gltf-part="src: #vehicles; part: city-bus"></a-mixin>\n        <a-mixin id="food-trailer" gltf-part="src: #vehicles; part: food-trailer"></a-mixin>\n        <a-mixin id="sedan-taxi" gltf-part="src: #vehicles; part: sedan-taxi"></a-mixin>\n        <a-mixin id="suv" gltf-part="src: #vehicles; part: suv"></a-mixin>\n        <a-asset-item id="magic-carpet-glb" src="').concat(t,'sets/magic-carpet/gltf-exports/draco/magic-carpet.glb"></a-asset-item>\n        <a-mixin id="Character_1_M" gltf-part="src: #magic-carpet-glb; part: Character_1_M"></a-mixin>\n        <a-mixin id="magic-carpet" gltf-part="src: #magic-carpet-glb; part: magic-carpet"></a-mixin>\n        \x3c!-- micro mobility vehicles --\x3e\n        <a-asset-item id="microMobilityDevices" src="').concat(t,'sets/micro-mobility-devices/gltf-exports/draco/micro-mobility-devices_v01.glb"></a-asset-item>\n        <a-mixin id="Bicycle_1" gltf-part="src: #microMobilityDevices; part: Bicycle_1"></a-mixin>\n        <a-mixin id="ElectricScooter_1" gltf-part="src: #microMobilityDevices; part: ElectricScooter_1"></a-mixin>\n      '),"vehicles-rigged":'\n        \x3c!-- vehicles rigged --\x3e\n        <a-asset-item id="sedan-rigged" src="'.concat(t,'sets/vehicles-rig/gltf-exports/draco/toyota-prius-rig.glb"></a-asset-item>\n        <a-mixin id="sedan-rig" gltf-model="#sedan-rigged" ></a-mixin>\n        <a-asset-item id="bus-rigged" src="').concat(t,'sets/vehicles-rig/gltf-exports/draco/city-bus-rig.glb"></a-asset-item>\n        <a-mixin id="bus-rig" gltf-model="#bus-rigged" ></a-mixin>\n        <a-asset-item id="sedan-taxi-rigged" src="').concat(t,'sets/vehicles-rig/gltf-exports/draco/sedan-taxi-rig.glb"></a-asset-item>\n        <a-mixin id="sedan-taxi-rig" gltf-model="#sedan-taxi-rigged" ></a-mixin>\n        <a-asset-item id="suv-rigged" src="').concat(t,'sets/vehicles-rig/gltf-exports/draco/suv-rig.glb"></a-asset-item>\n        <a-mixin id="suv-rig" gltf-model="#suv-rigged" ></a-mixin>\n        <a-asset-item id="box-truck-rigged" src="').concat(t,'sets/vehicles-rig/gltf-exports/draco/isuzu-truck-rig.glb"></a-asset-item>\n        <a-mixin id="box-truck-rig" gltf-model="#box-truck-rigged" ></a-mixin>\n      '),buildings:'\n        \x3c!-- blocks --\x3e\n        <a-asset-item id="blockmodel" src="'.concat(t,'sets/buildings/gltf-exports/draco/buildings.glb"></a-asset-item>\n        <a-asset-item id="archedmodel" src="').concat(t,'sets/arcade-style-buildings/gltf-exports/draco/arched-buildings.glb"></a-asset-item>\n        <a-asset-item id="suburbiamodel" src="').concat(t,'sets/suburban-houses/gltf-exports/draco/suburban-houses.glb"></a-asset-item>\n\n        \x3c!-- buildings and blocks --\x3e\n        <a-mixin id="SM3D_Bld_Mixed_Corner_4fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_Corner_4fl"></a-mixin>\n        <a-mixin id="SM3D_Bld_Mixed_Double_5fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_Double_5fl"></a-mixin>\n        <a-mixin id="SM3D_Bld_Mixed_4fl_2" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_4fl_2"></a-mixin>\n        <a-mixin id="SM3D_Bld_Mixed_5fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_5fl"></a-mixin>\n        <a-mixin id="SM3D_Bld_Mixed_4fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_4fl"></a-mixin>\n\n        \x3c!-- suburban buildings --\x3e\n        <a-mixin id="SM_Bld_House_Preset_03_1800" scale="1 1 1" rotation="0 0 0" gltf-part="src: #suburbiamodel; part: suburban-house_1"></a-mixin>\n        <a-mixin id="SM_Bld_House_Preset_08_1809" scale="1 1 1" rotation="0 0 0" gltf-part="src: #suburbiamodel; part: suburban-house_3"></a-mixin>\n        <a-mixin id="SM_Bld_House_Preset_09_1845" scale="1 1 1" rotation="0 0 0" gltf-part="src: #suburbiamodel; part: suburban-house_2"></a-mixin>\n\n        \x3c!-- arched style buildings --\x3e\n        <a-mixin id="arched-building-01" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-01"></a-mixin>\n        <a-mixin id="arched-building-02" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-02"></a-mixin>\n        <a-mixin id="arched-building-03" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-03"></a-mixin>\n        <a-mixin id="arched-building-04" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-04"></a-mixin>\n'),"intersection-props":'\n        <a-asset-item id="stopsign" src="'.concat(t,'sets/road-signs/gltf-exports/draco/stop-sign.glb"></a-asset-item>\n        <a-asset-item id="signal1" src="').concat(t,'sets/signals/gltf-exports/draco/signal1.glb"></a-asset-item>\n        <a-asset-item id="signal2" src="').concat(t,'sets/signals/gltf-exports/draco/signal2.glb"></a-asset-item>\n        <a-mixin id="signal_left" gltf-model="#signal1"></a-mixin>\n        <a-mixin id="signal_right" gltf-model="#signal2"></a-mixin>\n        <a-mixin id="stop_sign" gltf-model="#stopsign"></a-mixin>\n      '),"segment-textures":'  \n        \x3c!-- segment mixins with textures --\x3e\n        <img id="seamless-road" src="'.concat(t,'materials/TexturesCom_Roads0086_1_seamless_S_rotate.jpg" crossorigin="anonymous">\n        <img id="seamless-bright-road" src="').concat(t,'materials/asphalthd_Base_Color.jpg" crossorigin="anonymous">\n        <img id="hatched-base" src="').concat(t,'materials/hatched_Base_Color.jpg" crossorigin="anonymous">\n        <img id="hatched-normal" src="').concat(t,'materials/hatched_Normal.jpg" crossorigin="anonymous">\n        <img id="seamless-sidewalk" src="').concat(t,'materials/TexturesCom_FloorsRegular0301_1_seamless_S.jpg" crossorigin="anonymous">\n        <a-mixin id="drive-lane" geometry="width:3;height:150;primitive:plane" material="repeat:0.3 25;offset:0.55 0;src:#seamless-road;"></a-mixin>\n        <a-mixin id="bright-lane" geometry="width:3;height:150;primitive:plane" material="repeat:0.6 50;offset:0.55 0;src:#seamless-bright-road;color:#dddddd"></a-mixin>\n        <a-mixin id="bike-lane" geometry="width:1.8;height:150;primitive:plane" material="repeat:0.3 25;offset:0.55 0;roughness:1;metalness:0;src:#seamless-road;"></a-mixin>\n        <a-mixin id="sidewalk" anisotropy geometry="width:3;height:150;primitive:plane" material="repeat:1.5 75;src:#seamless-sidewalk;"></a-mixin>\n        <a-mixin id="bus-lane" geometry="width:3;height:150;primitive:plane" material="repeat:0.3 25;offset:0.55 0;src:#seamless-road;"></a-mixin>\n        <a-mixin id="divider" geometry="width:0.3;height:150;primitive:plane" material="repeat:1 150;offset:0.415 0;normalTextureOffset:0.415 0;src:#hatched-base;normalTextureRepeat:0.21 150;normalMap:#hatched-normal"></a-mixin>\n        <a-mixin id="grass" geometry="width:0.3;height:150;primitive:plane" material="repeat:1 150;offset:0.415 0;src:#grass-texture;"></a-mixin>\n      '),"segment-colors":'  \n        \x3c!-- segment color modifier mixins --\x3e\n        <a-mixin id="yellow" material="color:#f7d117"></a-mixin>\n        <a-mixin id="surface-green" material="color:#adff83"></a-mixin>\n        <a-mixin id="surface-red" material="color:#ff9393"></a-mixin>\n      ',"lane-separator":'\n        \x3c!-- lane separator markings --\x3e\n        <img id="markings-atlas" src="'.concat(t,'materials/lane-markings-atlas_1024.png" crossorigin="anonymous" /> \n        <a-mixin id="markings" anisotropy atlas-uvs="totalRows: 1; totalColumns: 8; row: 1" scale="1 1 1" material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 25;" geometry="primitive: plane; buffer: false; skipCache: true; width:0.2; height:150;"></a-mixin>\n        <a-mixin id="solid-stripe" atlas-uvs="column: 3"></a-mixin>\n        <a-mixin id="dashed-stripe" atlas-uvs="column: 4"></a-mixin>\n        <a-mixin id="short-dashed-stripe" atlas-uvs="column: 4" material="repeat:1 50;"></a-mixin>\n        <a-mixin id="solid-doubleyellow" atlas-uvs="totalColumns: 4; column: 3" geometry="width: 0.5"></a-mixin>\n        <a-mixin id="solid-dashed" atlas-uvs="totalColumns: 4; column: 2" geometry="width: 0.4"></a-mixin>\n        <a-mixin id="crosswalk-zebra" atlas-uvs="totalColumns: 4; column: 4" geometry="width: 2; height: 12"  material="repeat: 1 2"></a-mixin>\n      '),stencils:'  \n        \x3c!-- stencil markings --\x3e\n        <img id="stencils-atlas" src="'.concat(t,'materials/stencils-atlas_2048.png" crossorigin="anonymous" />\n        <a-mixin id="stencils" anisotropy atlas-uvs="totalRows: 4; totalColumns: 4" scale="2 2 2" material="src: #stencils-atlas;alphaTest: 0;transparent:true;" geometry="primitive: plane; buffer: false; skipCache: true"></a-mixin>\n        <a-mixin id="right" atlas-uvs="column: 3; row: 2"></a-mixin>\n        <a-mixin id="left" atlas-uvs="column: 3; row: 3"></a-mixin>\n        <a-mixin id="both" atlas-uvs="column: 2; row: 1"></a-mixin>\n        <a-mixin id="all" atlas-uvs="column: 3; row: 1"></a-mixin>\n        <a-mixin id="left-straight" atlas-uvs="column: 2; row: 3"></a-mixin>\n        <a-mixin id="right-straight" atlas-uvs="column: 2; row: 2"></a-mixin>\n        <a-mixin id="straight" atlas-uvs="column: 2; row: 4"></a-mixin>\n        <a-mixin id="sharrow" atlas-uvs="totalRows: 4; totalColumns: 8; column: 2; row: 3" scale="1.5 3 1"></a-mixin>\n        <a-mixin id="bike-arrow" atlas-uvs="totalRows: 2; totalColumns: 8; column: 1; row: 2" scale="1 4 1"></a-mixin>\n        <a-mixin id="word-bus" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 4" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-lane" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 4" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-taxi" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 3" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-only" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 3" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-only-small" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 3" scale="2.5 2 2.5"></a-mixin>\n        <a-mixin id="word-yield" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 2" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-slow" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 2" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-xing" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 1" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-stop" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 1" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-loading-small" atlas-uvs="totalRows: 8; totalColumns: 4; column: 4; row: 1" scale="2.75 1.75 2.75"></a-mixin>\n        <a-mixin id="perpendicular-stalls" atlas-uvs="totalRows: 4; totalColumns: 8; column: 5; row: 4" scale="5 10 5"></a-mixin>\n        <a-mixin id="parking-t" atlas-uvs="totalRows: 8; totalColumns: 16; column: 4; row: 7" scale="1.5 2 2"></a-mixin>\n        <a-mixin id="painted-safety-zone" atlas-uvs="totalRows: 4; totalColumns: 4; column: 4; row: 4" scale="8 8 8"></a-mixin>\n      '),"vehicles-transit":'\n        \x3c!-- vehicles-transit --\x3e\n        <a-asset-item id="trammodel" src="'.concat(t,'objects/tram_siemens_avenio.gltf"></a-asset-item>\n        <a-asset-item id="trolleymodel" src="').concat(t,'objects/godarvilletram.gltf"></a-asset-item>\n        <a-asset-item id="xd40" src="').concat(t,'sets/flyer-bus/gltf-exports/draco/flyer-bus.glb"></a-asset-item>\n        <a-mixin id="bus" anisotropy gltf-model="#xd40" scale="1.55 1.55 1.55"></a-mixin>\n        <a-mixin id="tram" anisotropy gltf-model="#trammodel"></a-mixin>\n        <a-mixin id="trolley" gltf-model="#trolleymodel"></a-mixin>\n      '),dividers:'\n        \x3c!-- dividers --\x3e\n        <a-asset-item id="dividers" src="'.concat(t,'sets/dividers/gltf-exports/draco/dividers.glb"></a-asset-item>        \n        <a-mixin id="dividers-flowers" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: flowers"></a-mixin>\n        <a-mixin id="dividers-planting-strip" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: planting-strip"></a-mixin>\n        <a-mixin id="dividers-planter-box" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: planter-box"></a-mixin>\n        <a-mixin id="dividers-bush" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: bush"></a-mixin>\n        <a-mixin id="dividers-dome" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: dome"></a-mixin>\n        <a-mixin id="safehit" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: bollard"></a-mixin>\n        <a-mixin id="temporary-barricade" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: barricade"></a-mixin>\n        <a-mixin id="temporary-traffic-cone" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: traffic-cone"></a-mixin>\n        <a-mixin id="temporary-jersey-barrier-plastic" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: jersey-barrier-plastic"></a-mixin>\n        <a-mixin id="temporary-jersey-barrier-concrete" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: jersey-barrier-concrete"></a-mixin>\n      '),sky:'\n        \x3c!-- sky --\x3e\n        <img id="sky" src="'.concat(t,'CGSkies_0343_doubled_2048.jpg" crossorigin="anonymous" />\n        <img id="sky-night" src="').concat(t,'images/AdobeStock_286725174-min.jpeg" crossorigin="anonymous" />\n      '),grounds:'\n        \x3c!-- grounds --\x3e\n        <img id="grass-texture" src="'.concat(t,'materials/TexturesCom_Grass0052_1_seamless_S.jpg" crossorigin="anonymous">\n        <img id="parking-lot-texture" src="').concat(t,'materials/TexturesCom_Roads0111_1_seamless_S.jpg" crossorigin="anonymous">\n        <img id="asphalt-texture" src="').concat(t,'materials/TexturesCom_AsphaltDamaged0057_1_seamless_S.jpg" crossorigin="anonymous">\n\n        <a-mixin id="ground-grass" rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#grass-texture;repeat:5 5;roughness:1"></a-mixin>\n        <a-mixin id="ground-parking-lot" rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#parking-lot-texture;repeat:2 4;roughness:1"></a-mixin>\n        <a-mixin id="ground-asphalt" rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#asphalt-texture;repeat:5 5;roughness:1"></a-mixin>\n        <a-mixin id="ground-tiled-concrete" anisotropy rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#seamless-sidewalk;repeat:5 5;roughness:1"></a-mixin>\n\n        <a-asset-item id="fence-model" src="').concat(t,'sets/fences/gltf-exports/draco/fence4.glb"></a-asset-item>\n        <a-mixin id="fence" gltf-model="#fence-model" scale="0.1 0.1 0.1"></a-mixin>\n      ')};if(e){var a=e.split(" "),r=Object.keys(i).filter((function(t){return a.includes(t)})),n="";for(var s in i)r.includes(s)&&(n+=i[s]);return n}return Object.values(i).join("")}(this.getAttribute("url"),this.getAttribute("categories"));var e=this.parentNode;this.setAttribute("timeout",e.getAttribute("timeout")),this.parentNode.isScene=!0,Object.getPrototypeOf(e).attachedCallback.call(this),this.parentNode.isScene=!1}}},load:{value:function(){AFRAME.ANode.prototype.load.call(this,null,(function(t){return t.isAssetItem&&t.hasAttribute("src")}))}}})}),window.addEventListener("DOMContentLoaded",(function(e){if(!t){var i=document.querySelector("a-assets");i||(i=document.createElement("a-assets")),i.hasLoaded&&console.warn("Assets already loaded. May lead to bugs");var a=document.createElement("street-assets");i.append(a),document.querySelector("a-scene").append(i)}})),document.addEventListener("DOMSubtreeModified",(function t(e){if("A-SCENE"===e.target.nodeName){var i=e.target.querySelector("a-assets");if(i||(i=document.createElement("a-assets"),e.target.append(i)),i.querySelector("street-assets"))document.removeEventListener("DOMSubtreeModified",t);else{var a=document.createElement("street-assets");i.append(a),document.removeEventListener("DOMSubtreeModified",t)}}}),!1)},51:()=>{AFRAME.registerComponent("anisotropy",{schema:{default:0},dependencies:["material","geometry"],init:function(){var t=this;this.maxAnisotropy=this.el.sceneEl.renderer.capabilities.getMaxAnisotropy(),["model-loaded","materialtextureloaded"].forEach((function(e){return t.el.addEventListener(e,(function(){var e=t.el.getObject3D("mesh"),i=t.data;0===(i=+i||0)&&(i=t.maxAnisotropy),e.traverse((function(t){!0===t.isMesh&&null!==t.material.map&&(t.material.map.anisotropy=i,t.material.map.needsUpdate=!0)}))}),!1)}))}})},391:(t,e,i)=>{var a=i(334);AFRAME.registerComponent("create-from-json",{schema:{jsonString:{type:"string",default:""}},update:function(t){var e=this.data,i=this.el;if(t.string&&e.string!==t.string)for(;i.firstChild;)i.removeChild(i.lastChild);a.appendChildElementsFromArray(JSON.parse(e.jsonString),i)}})},71:()=>{var t={},e={};AFRAME.registerComponent("gltf-part",{schema:{buffer:{default:!0},part:{type:"string"},src:{type:"asset"}},init:function(){this.dracoLoader=document.querySelector("a-scene").systems["gltf-model"].getDRACOLoader()},update:function(){var t=this.el;!this.data.part&&this.data.src||this.getModel((function(e){e&&t.setObject3D("mesh",e)}))},getModel:function(i){var a=this;if(!e[this.data.src])return t[this.data.src]?t[this.data.src].then((function(t){i(a.selectFromModel(t))})):void(t[this.data.src]=new Promise((function(r){var n=new THREE.GLTFLoader;a.dracoLoader&&n.setDRACOLoader(a.dracoLoader),n.load(a.data.src,(function(n){var s=n.scene||n.scenes[0];e[a.data.src]=s,delete t[a.data.src],i(a.selectFromModel(s)),r(s)}),(function(){}),console.error)})));i(this.selectFromModel(e[this.data.src]))},selectFromModel:function(t){var e,i;if(i=t.getObjectByName(this.data.part))return e=i.getObjectByProperty("type","Mesh").clone(!0),this.data.buffer?(e.geometry=e.geometry.toNonIndexed(),e):(e.geometry=(new THREE.Geometry).fromBufferGeometry(e.geometry),e);console.error("[gltf-part] `"+this.data.part+"` not found in model.")}})},199:t=>{t.exports.isSidewalk=function(t){return t.startsWith("sidewalk")||["utilities","scooter-drop-zone","bikeshare","flex-zone-curb","transit-shelter"].includes(t)},t.exports.createBuildingsArray=function(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:150,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"narrow";"narrow"===a||"wide"===a?(t=[{id:"SM3D_Bld_Mixed_4fl",width:5.251},{id:"SM3D_Bld_Mixed_Double_5fl",width:10.9041},{id:"SM3D_Bld_Mixed_4fl_2",width:5.309},{id:"SM3D_Bld_Mixed_5fl",width:5.903},{id:"SM3D_Bld_Mixed_Corner_4fl",width:5.644}],e="41431323432402434130303230234102402341"):"residential"===a?(t=[{id:"SM_Bld_House_Preset_03_1800",width:20},{id:"SM_Bld_House_Preset_08_1809",width:20},{id:"SM_Bld_House_Preset_09_1845",width:20}],e="12021201210101212021201012012021201210"):"arcade"===a&&(t=[{id:"arched-building-01",width:9.191},{id:"arched-building-02",width:11.19},{id:"arched-building-03",width:13.191},{id:"arched-building-04",width:15.191}],e="03120223130210321203123023103201232013");for(var r=0,n=0,s=[];n<i;){var o=t[parseInt(e[r])],l={tag:"a-entity",mixin:o.id,position:n+o.width/2+" 0 0"};"SM_Bld_House_Preset_08_1809"===l.mixin&&(l.child={tag:"a-plane",class:"driveway",position:"-6.25 0.6 -8.75",rotation:"-90 0 0",src:"#asphalt-texture",width:4,height:4.6}),"SM_Bld_House_Preset_09_1845"===l.mixin&&(l.child={tag:"a-plane",class:"driveway",position:"-2.5 0.6 -7",rotation:"-90 0 0",src:"#asphalt-texture",width:4,height:8}),o.width+n<=i&&s.push(l),n+=o.width,r++}return s},t.exports.filterBuildingsArrayByMixin=function(t,e){var i=[];return t.forEach((function(t,a){t.mixin===e&&i.push(t)})),i},t.exports.removePropertyFromArray=function(t,e){return t.forEach((function(t,i){delete t[e]})),t},t.exports.createClonedEntitiesArray=function(t){for(var e=t.mixin,i=void 0===e?"":e,a=t.step,r=void 0===a?15:a,n=t.radius,s=void 0===n?60:n,o=t.rotation,l=void 0===o?"0 0 0":o,d=t.positionXYString,c=void 0===d?"0 0":d,m=t.randomY,u=void 0!==m&&m,p=[],h=-1*s;h<=s;h+=r){var g={tag:"a-entity",position:c+" "+h};i&&(g.class=i,g.mixin=i),g.rotation=u?"0 "+Math.floor(361*randomTestable())+" 0":l,p.push(g)}return p},t.exports.getAmbientSoundJSON=function(t){var e={fence:"#suburbs-mp3",grass:"#suburbs-mp3","parking-lot":"#parking-lot-mp3",waterfront:"#waterfront",residential:"#suburbs2-mp3",narrow:"#ambientmp3",wide:"#ambientmp3"},i=[],a=null;return t.forEach((function(t,r){if(!a||a!==e[t]){var n={tag:"a-entity",class:"playme",sound:"src: "+e[t]+"; positional: false; loop: true"};i.push(n),a=e[t]}})),i},t.exports.createGroundArray=function(t,e){var i=e/30,a=1,r=[],n="ground-grass";if("waterfront"===t)return r;["narrow","wide","arcade"].includes(t)&&(n="ground-asphalt"),"parking-lot"===t&&(n="ground-parking-lot",a=.5),"arcade"===t&&(n="ground-tiled-concrete",i=e/2,a=20);var s={tag:"a-entity",position:"0 -0.2 0",mixin:n,geometry:"height: "+e+";",material:"repeat: "+a+" "+i+";"};return r.push(s),r}},334:t=>{function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);a=!0);}catch(t){r=!0,n=t}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=document.createElement(t.tag);delete t.tag;for(var a=0,r=Object.entries(t);a<r.length;a++){var n=e(r[a],2),s=n[0],o=n[1];if("child"===s){for(var l=document.createElement(o.tag),d=0,c=Object.entries(o);d<c.length;d++){var m=e(c[d],2),u=m[0],p=m[1];l.setAttribute(u,p)}i.appendChild(l)}i.setAttribute(s,o)}return i}t.exports.createElementFromObject=a,t.exports.appendChildElementsFromArray=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;return t.forEach((function(t,i){e.appendChild(a(t))})),e}},394:t=>{t.exports.streetmixUserToAPI=function(t){var e=new URL(t).pathname.split("/"),i=e[1],a=e[2];return"-"===i?"https://streetmix.net/api/v1/streets?namespacedId="+a:"https://streetmix.net/api/v1/streets?namespacedId="+a+"&creatorId="+i},t.exports.pathStartsWithAPI=function(t){var e=document.createElement("a");return e.href=t,"api"===e.pathname.split("/")[1]},t.exports.streetmixAPIToUser=function(t){function e(t,e){for(var i=t.split("&"),a=0;a<i.length;a++){var r=i[a].split("=");if(decodeURIComponent(r[0])===e)return decodeURIComponent(r[1])}console.log("Query variable %s not found",e)}var i=new URL(t).search.substring(1),a=e(i,"namespacedId"),r=e(i,"creatorId");return void 0===r&&(r="-"),"https://streetmix.net/"+r+"/"+a},t.exports.calcStreetWidth=function(t){var e=0;return t.forEach((function(t){var i=t.width;e+=.3048*i})),e}}},e={};function i(a){var r=e[a];if(void 0!==r)return r.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,i),n.exports}return(()=>{function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}var e=i(844),a=i(394);i(51),i(71),i(234),i(391),i(631),AFRAME.registerComponent("street",{schema:{JSON:{type:"string"},type:{default:"streetmixSegmentsFeet"},left:{default:""},right:{default:""},showGround:{default:!0},showStriping:{default:!0},showVehicles:{default:!0},globalAnimated:{default:!1},length:{default:150}},update:function(t){var i=this.data;if(0!==i.JSON.length){var r=JSON.parse(i.JSON),n=e.processSegments(r.streetmixSegmentsFeet,i.showStriping,i.length,i.globalAnimated,i.showVehicles);if(this.el.append(n),i.left||i.right){var s=a.calcStreetWidth(r.streetmixSegmentsFeet,i.autoStriping),o=e.processBuildings(i.left,i.right,s,i.showGround,i.length);this.el.append(o)}}else{if(void 0!==t.JSON&&0===t.JSON.length)return;console.log("[street]","No JSON provided yet, but it might be set at runtime")}}}),AFRAME.registerComponent("streetmix-loader",{dependencies:["street"],schema:{streetmixStreetURL:{type:"string"},streetmixAPIURL:{type:"string"},showBuildings:{default:!0},name:{default:""}},update:function(t){var e=this.data,i=this.el;if(t.streetmixStreetURL!==e.streetmixStreetURL||t.streetmixAPIURL!==e.streetmixAPIURL)if(0!==e.streetmixAPIURL.length){var r=new XMLHttpRequest;console.log("[streetmix-loader]","GET "+e.streetmixAPIURL),r.open("GET",e.streetmixAPIURL,!0),r.onload=function(){if(this.status>=200&&this.status<400){var t=JSON.parse(this.response),a=t.data.street.segments,r=t.name;i.setAttribute("streetmix-loader","name",r),e.showBuildings&&(i.setAttribute("street","right",t.data.street.rightBuildingVariant),i.setAttribute("street","left",t.data.street.leftBuildingVariant)),i.setAttribute("street","type","streetmixSegmentsFeet"),i.setAttribute("street","JSON",JSON.stringify({streetmixSegmentsFeet:a})),i.emit("streetmix-loader-street-loaded")}else console.log("[streetmix-loader]","Loading Error: We reached the target server, but it returned an error")},r.onerror=function(){console.log("[streetmix-loader]","Loading Error: There was a connection error of some sort")},r.send()}else{if(e.streetmixStreetURL.length>0){var n=a.streetmixUserToAPI(e.streetmixStreetURL);return console.log("[streetmix-loader]","setting `streetmixAPIURL` to",n),void i.setAttribute("streetmix-loader","streetmixAPIURL",n)}console.log("[streetmix-loader]","Neither `streetmixAPIURL` nor `streetmixStreetURL` properties provided, please provide at least one.")}}}),AFRAME.registerComponent("intersection",{schema:{dimensions:{type:"string",default:"20 20"},sidewalk:{type:"string",default:"0 0 0 0"},northeastcurb:{type:"string",default:"0 0"},southwestcurb:{type:"string",default:"0 0"},southeastcurb:{type:"string",default:"0 0"},northwestcurb:{type:"string",default:"0 0"},stopsign:{type:"string",default:"0 0 0 0"},trafficsignal:{type:"string",default:"0 0 0 0"},crosswalk:{type:"string",default:"0 0 0 0"}},init:function(){var e=this.data,i=this.el,a=e.dimensions.split(" ").map((function(t){return Number(t)})),r=[this.el.getAttribute("position").x,this.el.getAttribute("position").y,this.el.getAttribute("position").z],n=e.sidewalk.split(" ").map((function(t){return Number(t)})),s=e.northeastcurb.split(" ").map((function(t){return Number(t)})),o=e.southwestcurb.split(" ").map((function(t){return Number(t)})),l=e.southeastcurb.split(" ").map((function(t){return Number(t)})),d=e.northwestcurb.split(" ").map((function(t){return Number(t)})),c=e.stopsign.split(" ").map((function(t){return Number(t)})),m=e.trafficsignal.split(" ").map((function(t){return Number(t)})),u=e.crosswalk.split(" ").map((function(t){return Number(t)})),p=a[0],h=a[1];function g(t){var e=t.length,a=t.width,r=t.positionVec,n=t.scaleVec,s=void 0===n?{x:1,y:1,z:1}:n,o=t.rotationVec,l=document.createElement("a-entity"),d=[];d[0]=a/2,d[1]=parseInt(e/2),l.setAttribute("geometry","primitive","box"),l.setAttribute("geometry","height: 0.4"),l.setAttribute("position",r),l.setAttribute("scale",s),l.setAttribute("geometry","depth",e),l.setAttribute("geometry","width",a),l.setAttribute("rotation",o),l.setAttribute("mixin","sidewalk"),l.setAttribute("material","repeat: ".concat(d[0]," ").concat(d[1])),i.appendChild(l)}this.el.setAttribute("geometry","primitive","plane"),this.geometry=new THREE.PlaneGeometry(p,h,1,1),this.material=new THREE.MeshStandardMaterial({color:"#FF0000"}),this.mesh=new THREE.Mesh(this.geometry,this.material),i.setObject3D("mesh",this.mesh),this.el.setAttribute("position",{x:r[0],y:r[1],z:r[2]}),this.el.setAttribute("rotation","-90 0 0"),this.el.setAttribute("material","src: #asphalt-texture; repeat:5 5; roughness:1");var x,b,f={west:{positionVec:{x:p/2-n[0]/2},rotationVec:{x:90,y:0,z:0},length:h,width:n[0]},east:{positionVec:{x:-p/2+n[1]/2},rotationVec:{x:90,y:0,z:0},length:h,width:n[1]},north:{positionVec:{y:-h/2+n[2]/2,x:n[1]/2-n[0]/2},rotationVec:{x:0,y:90,z:-90},length:p-n[1]-n[0],width:n[2]},south:{positionVec:{y:h/2-n[3]/2,x:n[1]/2-n[0]/2},rotationVec:{x:0,y:90,z:-90},length:p-n[1]-n[0],width:n[3]}};Object.keys(f).filter((function(t,e){return n[e]})).forEach((function(t,e){g(f[t])}));for(var y={northeast:{positionVec:{x:p/2-s[0]/2,y:h/2-s[1]/2},rotationVec:{x:0,y:90,z:-90},length:s[0],width:s[1]},southwest:{positionVec:{x:-p/2+o[0]/2,y:-h/2+o[1]/2},rotationVec:{x:0,y:90,z:-90},length:o[0],width:o[1]},southeast:{positionVec:{x:p/2-l[0]/2,y:-h/2+l[1]/2},rotationVec:{x:0,y:90,z:-90},length:l[0],width:l[1]},northwest:{positionVec:{x:-p/2+d[0]/2,y:h/2-d[1]/2},rotationVec:{x:0,y:90,z:-90},length:d[0],width:d[1]}},v=0,_=Object.entries(y);v<_.length;v++){var A=(x=_[v],b=2,function(t){if(Array.isArray(t))return t}(x)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);a=!0);}catch(t){r=!0,n=t}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}}(x,b)||function(e,i){if(e){if("string"==typeof e)return t(e,i);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,i):void 0}}(x,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=A[0],k=A[1];"0 0"!==e["".concat(w,"curb")]&&g(k)}if(c[0]){var E=document.createElement("a-entity");E.setAttribute("position",{x:p/2,y:h/3,z:.03}),E.setAttribute("rotation",{x:0,y:90,z:90}),E.setAttribute("mixin","stop_sign"),i.appendChild(E)}if(c[1]){var M=document.createElement("a-entity");M.setAttribute("position",{x:-p/2,y:-h/3,z:.03}),M.setAttribute("rotation",{x:0,y:-90,z:-90}),M.setAttribute("mixin","stop_sign"),i.appendChild(M)}if(c[2]){var C=document.createElement("a-entity");C.setAttribute("position",{x:-p/3,y:h/2,z:.03}),C.setAttribute("rotation",{x:-90,y:90,z:90}),C.setAttribute("mixin","stop_sign"),i.appendChild(C)}if(c[3]){var S=document.createElement("a-entity");S.setAttribute("position",{x:p/3,y:-h/2,z:.03}),S.setAttribute("rotation",{x:90,y:-90,z:-90}),S.setAttribute("mixin","stop_sign"),i.appendChild(S)}if(m[0]){var j=document.createElement("a-entity");j.setAttribute("position",{x:p/2,y:h/3,z:.03}),j.setAttribute("rotation",{x:210,y:90,z:90}),j.setAttribute("mixin","signal_left"),i.appendChild(j);var z=document.createElement("a-entity");z.setAttribute("position",{x:p/2,y:-h/3,z:.03}),z.setAttribute("rotation",{x:180,y:90,z:90}),z.setAttribute("mixin","signal_right"),i.appendChild(z)}if(m[1]){var R=document.createElement("a-entity");R.setAttribute("position",{x:-p/2,y:-h/3,z:.03}),R.setAttribute("rotation",{x:30,y:90,z:90}),R.setAttribute("mixin","signal_left"),i.appendChild(R);var I=document.createElement("a-entity");I.setAttribute("position",{x:-p/2,y:h/3,z:.03}),I.setAttribute("rotation",{x:0,y:90,z:90}),I.setAttribute("mixin","signal_right"),i.appendChild(I)}if(m[2]){var B=document.createElement("a-entity");B.setAttribute("position",{x:-p/3,y:h/2,z:.03}),B.setAttribute("rotation",{x:120,y:90,z:90}),B.setAttribute("mixin","signal_left"),i.appendChild(B);var L=document.createElement("a-entity");L.setAttribute("position",{x:p/3,y:h/2,z:.03}),L.setAttribute("rotation",{x:90,y:90,z:90}),L.setAttribute("mixin","signal_right"),i.appendChild(L)}if(m[3]){var F=document.createElement("a-entity");F.setAttribute("position",{x:p/3,y:-h/2,z:.03}),F.setAttribute("rotation",{x:-60,y:90,z:90}),F.setAttribute("mixin","signal_left"),i.appendChild(F);var O=document.createElement("a-entity");O.setAttribute("position",{x:-p/3,y:-h/2,z:.03}),O.setAttribute("rotation",{x:-90,y:90,z:90}),O.setAttribute("mixin","signal_right"),i.appendChild(O)}if(u[0]){var N=document.createElement("a-entity");N.setAttribute("position",{x:p/2-2,z:.013}),N.setAttribute("rotation",{x:0,y:0,z:180}),N.setAttribute("scale",{y:h/12}),N.setAttribute("mixin","markings crosswalk-zebra"),i.appendChild(N)}if(u[1]){var P=document.createElement("a-entity");P.setAttribute("position",{x:-p/2+2,z:.012}),P.setAttribute("rotation",{x:0,y:0,z:180}),P.setAttribute("scale",{y:h/12}),P.setAttribute("mixin","markings crosswalk-zebra"),i.appendChild(P)}if(u[2]){var D=document.createElement("a-entity");D.setAttribute("position",{y:-h/2+2,z:.011}),D.setAttribute("rotation",{x:0,y:0,z:90}),D.setAttribute("scale",{y:p/12}),D.setAttribute("mixin","markings crosswalk-zebra"),i.appendChild(D)}if(u[3]){var T=document.createElement("a-entity");T.setAttribute("position",{y:h/2-2,z:.01}),T.setAttribute("rotation",{x:0,y:0,z:90}),T.setAttribute("scale",{y:p/12}),T.setAttribute("mixin","markings crosswalk-zebra"),i.appendChild(T)}}}),AFRAME.registerComponent("street-environment",{schema:{preset:{type:"string",default:"day",oneOf:["day","night"]}},init:function(){var t=this.data,e=this.el;if("night"===t.preset){var i=document.createElement("a-entity");i.setAttribute("id","light"),i.setAttribute("light",{type:"ambient",color:"#FFF",intensity:.5}),e.appendChild(i);var a=document.createElement("a-entity");a.setAttribute("id","light"),a.setAttribute("position",{x:.5,y:1,z:-1}),a.setAttribute("light",{type:"directional",color:"#FFF",intensity:.15}),e.appendChild(a);var r=document.createElement("a-sky");r.setAttribute("id","sky"),r.setAttribute("color","#444"),r.setAttribute("src","#sky-night"),e.appendChild(r)}else{var n=document.createElement("a-entity");n.setAttribute("id","light"),n.setAttribute("light",{type:"ambient",color:"#FFF",intensity:2}),e.appendChild(n);var s=document.createElement("a-entity");s.setAttribute("id","light"),s.setAttribute("position",{x:.5,y:1,z:-1}),s.setAttribute("light",{type:"directional",color:"#FFF",intensity:.6}),e.appendChild(s);var o=document.createElement("a-sky");o.setAttribute("id","sky"),o.setAttribute("src","#sky"),o.setAttribute("rotation","0 255 0"),e.appendChild(o)}}}),AFRAME.registerComponent("wheel",{schema:{speed:{type:"number",default:1},wheelDiameter:{type:"number",default:1}},init:function(){var t=this.el,e=this;t.addEventListener("model-loaded",(function(i){var a=t.getObject3D("mesh");a&&(e.wheel_F_L=a.getObjectByName("wheel_F_L"),e.wheel_F_R=a.getObjectByName("wheel_F_R"),e.wheel_B_L=a.getObjectByName("wheel_B_L"),e.wheel_B_R=a.getObjectByName("wheel_B_R"),e.wheel_B_L_2=a.getObjectByName("wheel_B_L_2"),e.wheel_B_R_2=a.getObjectByName("wheel_B_R_2"))}))},tick:function(t,e){var i=this.data.speed/1e3/this.data.wheelDiameter*2*e;this.wheel_F_L&&this.wheel_F_L.rotateY(i),this.wheel_F_R&&this.wheel_F_R.rotateY(i),this.wheel_B_L&&this.wheel_B_L.rotateY(i),this.wheel_B_L_2&&this.wheel_B_L_2.rotateY(i),this.wheel_B_R_2&&this.wheel_B_R_2.rotateY(i),this.wheel_B_R&&this.wheel_B_R.rotateY(i)}})})(),{}})()));