!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var a in i)("object"==typeof exports?exports:t)[a]=i[a]}}(self,(()=>(()=>{var t={631:t=>{var e=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2,new THREE.Vector2];function i(t,i,a,n){const r=1/n,s=1/a;return e[0].set(r*i,s*t+s),e[1].set(r*i,s*t),e[2].set(r*i+r,s*t),e[3].set(r*i+r,s*t+s),e}AFRAME.registerComponent("atlas-uvs",{dependencies:["geometry"],schema:{totalColumns:{type:"int",default:1},totalRows:{type:"int",default:1},column:{type:"int",default:1},row:{type:"int",default:1}},update:function(){const t=this.data,e=i(t.row-1,t.column-1,t.totalRows,t.totalColumns),a=this.el.getObject3D("mesh").geometry;var n=new Float32Array([e[0].x,e[0].y,e[3].x,e[3].y,e[1].x,e[1].y,e[2].x,e[2].y]);a.setAttribute("uv",new THREE.BufferAttribute(n,2)),a.uvsNeedUpdate=!0}}),AFRAME.registerComponent("dynamic-texture-atlas",{schema:{canvasId:{default:"dynamicAtlas"},canvasHeight:{default:1024},canvasWidth:{default:1024},debug:{default:!1},numColumns:{default:8},numRows:{default:8}},multiple:!0,init:function(){const t=this.canvas=document.createElement("canvas");t.id=this.data.canvasId,t.height=this.data.canvasHeight,t.width=this.data.canvasWidth,this.ctx=t.getContext("2d"),document.body.appendChild(t),this.data.debug&&(t.style.left=0,t.style.top=0,t.style.position="fixed",t.style.zIndex=9999999999)},drawTexture:function(t,e,a,n,r){const s=this.canvas,o=this.data;t.complete||(t.onload=()=>{this.drawTexture(t,e,a)});const l=r||s.height/o.numRows,c=n||s.width/o.numColumns;return this.ctx.drawImage(t,c*e,c*a,c,l),i(e,a,o.numRows,o.numColumns)}}),t.exports.getGridUvs=i},844:(t,e,i)=>{function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],a=!0,n=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);a=!0);}catch(t){n=!0,r=t}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}return i}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){if(t){if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}var o=i(199),l=i(394);function c(t){for(var e=t.objectMixinId,i=void 0===e?"":e,a=t.parentEl,n=void 0===a?null:a,r=t.step,s=void 0===r?15:r,o=t.radius,l=void 0===o?60:o,c=t.rotation,d=void 0===c?"0 0 0":c,u=t.positionXYString,m=void 0===u?"0 0":u,p=t.length,h=void 0===p?void 0:p,f=t.randomY,g=void 0!==f&&f,y=-1*l;y<=l;y+=s){var b=document.createElement("a-entity");b.setAttribute("mixin",i),b.setAttribute("class",i),b.setAttribute("position",m+" "+y),h&&b.addEventListener("loaded",(function(t){t.target.setAttribute("geometry","height",h),t.target.setAttribute("atlas-uvs","c",1)})),g?b.setAttribute("rotation","0 "+Math.floor(361*Math.random())+" 0"):b.setAttribute("rotation",d),n.append(b)}}function d(t){var e=document.createElement("a-entity");return e.setAttribute("class","stencils-parent"),e.setAttribute("position",t),e}function u(t,e){var i=document.createElement("a-entity"),a={primitive:"box",depth:t,width:.1,height:.2};return i.setAttribute("geometry",a),i.setAttribute("material",{color:"#8f8f8f",metalness:1,emissive:"#828282",emissiveIntensity:.5,roughness:.1}),i.setAttribute("class","rails"),i.setAttribute("shadow","recieve:true; cast: true"),i.setAttribute("position",e+" 0.2 0"),i}function m(t,e){var i=document.createElement("a-entity");i.setAttribute("class","track-parent"),i.setAttribute("position","0 -0.2 0");var a={tram:.7175,trolley:.5335}[e];return i.append(u(t,a)),i.append(u(t,-a)),i}function p(t){var e=document.createElement("a-entity");return e.setAttribute("class",t),e}function h(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2.25,a=p("dividers-".concat(t,"-parent"));return c({objectMixinId:"dividers-".concat(t),parentEl:a,step:i,radius:e}),a}function f(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2.25,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0 0 0",n=p("".concat(t,"-parent"));return c({objectMixinId:t,parentEl:n,step:i,radius:e,rotation:a}),n}function g(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)}function y(t,e){return Math.random()*(e-t)+t}function b(t,e,i){var a=Math.floor((e-t)/i)+1;return Array(a).fill().map((function(e,a){return t+a*i})).sort((function(){return.5-Math.random()}))}function x(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"random",r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=[-.37*t,.37*t],o=b(-.5*a,.5*a,1.5),l=parseInt({empty:0,sparse:.03,normal:.125,dense:.25}[e]*a,10),c=p("pedestrians-parent");c.setAttribute("position",{y:i});for(var d=0;d<l;d++){var u=!0===r?"a_char"+String(g(1,8)):"char"+String(g(1,16)),m=y(s[0],s[1]),h=o.pop(),f=document.createElement("a-entity"),x="inbound";f.setAttribute("mixin",u),Math.random()<.5&&"random"===n?(f.setAttribute("rotation","0 180 0"),x="outbound"):f.setAttribute("rotation","0 0 0"),r&&_(f,1.4,a,m,0,h,x),c.append(f)}return c}function v(t){return"colored"===t|"red"===t?"surface-red bus-lane":"grass"===t?"surface-green bus-lane":"bus-lane"}function w(t,e,i){var a,n,r,s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,l=t.object3D,c=o||(a=l,n=(new THREE.Box3).setFromObject(a),{x:n.max.x-n.min.x,y:n.max.y-n.min.y,z:n.max.z-n.min.z})[e],d={start:-.5*(r=i)+.5*(s=c),end:.5*r-.5*s},u=d.start,m=d.end,p="set".concat(e.toUpperCase()),h=y(u,m);return l.position[p](h),h}function A(t,e,i,a){if(a){var n="inbound"===t[0]?0:180,r=document.createElement("a-entity");return r.setAttribute("class",e),r.setAttribute("rotation","0 "+n+" 0"),r.setAttribute("mixin",e),r.addEventListener("model-loaded",(function(t){w(t.target,"z",i)}),{once:!0}),r}}function E(t,e,i){if(i){var a="inbound"===t[0]?0:180,n=document.createElement("a-entity"),r=document.createElement("a-entity");r.setAttribute("rotation","0 "+a+" 0"),r.setAttribute("mixin","bus");var s=w(r,"z",e,12);return r.setAttribute("position","0 0 "+s),n.append(r),n}}function _(t,e,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5?arguments[5]:void 0,s=i/e*1e3,o="outbound"===(arguments.length>6?arguments[6]:void 0)?-i/2:i/2,l=Math.abs(o-r)/e*1e3,c={property:"position",easing:"linear",loop:"false",from:{x:a,y:n,z:r},to:{z:o},dur:l},d={property:"position",easing:"linear",loop:"true",from:{x:a,y:n,z:-o},to:{x:a,y:n,z:o},delay:l,dur:s};return t.setAttribute("animation__1",c),t.setAttribute("animation__2",d),t}function C(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;if(!(arguments.length>4&&void 0!==arguments[4])||arguments[4]){var o=0,l=n(t,3),c=l[0],d=l[1],u=l[2];2===t.length&&(u=d,d=c);var m,p={inbound:0,outbound:180,sideways:{left:-90,right:90},"angled-front-left":-60,"angled-front-right":60,"angled-rear-left":-120,"angled-rear-right":120};m="sideways"==c?p.sideways[d]:p[c];var h=document.createElement("a-entity");if(1==t.length)return h;var f={car:{mixin:"sedan-rig",wheelDiameter:.76,length:5.17,width:2},microvan:{mixin:"suv-rig",wheelDiameter:.84,length:5,width:2},truck:{mixin:"box-truck-rig",wheelDiameter:1.05,length:6.95,width:2.5},av:{mixin:"self-driving-cruise-car-rig",wheelDiameter:.76,length:5.17,width:2}};if(r>1){var g=i/2,y=s/2+s,x=b(-g+y,g-y,s).slice(0,r),v="sideways"==c||c.includes("angled")?"width":"length",A=f[u][v];x.forEach((function(t){var e=s-A-.2,i=-e/2+e*Math.random();e>0&&E(t+i,u)}))}else E(void 0,u);return h}function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=f[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"car"],n=document.createElement("a-entity");return t||(t=w(n,"z",i,e.length)),n.setAttribute("position","0 0 ".concat(t)),n.setAttribute("mixin",e.mixin),n.setAttribute("rotation","0 ".concat(m," 0")),a&&(o=5,n.setAttribute("wheel",{speed:o,wheelDiameter:e.wheelDiameter}),_(n,o,i,0,0,t,d)),h.append(n),n}}function k(t,e){var i=document.createElement("a-entity"),a=document.createElement("a-entity"),n="left"===t[0]?0:180;return a.setAttribute("rotation","0 "+n+" 0"),a.setAttribute("mixin","food-trailer-rig"),a.addEventListener("model-loaded",(function(t){w(t.target,"z",e)}),{once:!0}),i.append(a),i}function S(t){if(t){var e=document.createElement("a-entity"),i=document.createElement("a-entity");i.setAttribute("position","0 1.75 0"),i.setAttribute("rotation","0 0 0"),i.setAttribute("mixin","magic-carpet"),e.append(i);var a=document.createElement("a-entity");return a.setAttribute("position","0 1.75 0"),a.setAttribute("rotation","0 0 0"),a.setAttribute("mixin","Character_1_M"),e.append(a),e}}function M(t,e,i){var a=e/2+e;return b(-t/2+a/2,t/2-a/2,a).slice(0,i)}function R(t,e){var i=document.createElement("a-entity");return M(t,2.27,5).forEach((function(t){var a=document.createElement("a-entity");a.setAttribute("mixin","outdoor_dining"),a.setAttribute("position",{y:e,z:t}),i.append(a)})),i}function N(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0;if(arguments.length>4?arguments[4]:void 0){var n=document.createElement("a-entity");return M(a,2.03,g(2,5)).forEach((function(a){var r=document.createElement("a-entity"),s="inbound"===t[0]?0:180;r.setAttribute("rotation","0 "+s+" 0"),"bike-lane"===e?r.setAttribute("mixin","Bicycle_1"):r.setAttribute("mixin","ElectricScooter_1"),r.setAttribute("position",{y:i,z:a}),n.append(r)})),n}}function j(t,e){if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){var i=document.createElement("a-entity");return M(e,5,g(2,4)).forEach((function(e){var a=document.createElement("a-entity"),n="inbound"===t[1]?0:180;a.setAttribute("rotation","0 "+n+" 0"),"taxi"===t[0]?a.setAttribute("mixin","sedan-taxi-rig"):"rideshare"===t[0]&&a.setAttribute("mixin","sedan-rig"),a.setAttribute("position",{z:e}),i.append(a)})),i}}function T(){var t=document.createElement("a-entity");return t.setAttribute("class","bench-parent"),t.setAttribute("position","0 0.2 3.5"),t}function O(t){var e=document.createElement("a-entity");return e.setAttribute("class","bikerack-parent"),e.setAttribute("position",{y:t,z:-3.5}),e}function L(t,e){var i=document.createElement("a-entity");i.setAttribute("class","bikeshare"),i.setAttribute("mixin","bikeshare");var a="left"===t[0]?90:270;return i.setAttribute("rotation","0 "+a+" 0"),i.setAttribute("position",{y:e}),i}function I(t,e){var i=document.createElement("a-entity");return M(t,4.03,3).forEach((function(t){var a=document.createElement("a-entity");a.setAttribute("class","parklet"),a.setAttribute("position",{x:0,y:.02,z:t}),a.setAttribute("mixin","parklet");var n="left"===e[0]?90:270;a.setAttribute("rotation",{y:n}),i.append(a)})),i}function P(){var t=document.createElement("a-entity");return t.setAttribute("class","tree-parent"),t.setAttribute("position","0 0.2 7"),t}function F(){var t=document.createElement("a-entity");return t.setAttribute("class","lamp-parent"),t.setAttribute("position","0 0.2 0"),t}function z(t,e){var i=document.createElement("a-entity");return i.setAttribute("class","bus-stop"),i.setAttribute("rotation","0 "+t+" 0"),i.setAttribute("mixin","bus-stop"),i.setAttribute("position",{y:e}),i}function B(){var t=document.createElement("a-entity");return t.setAttribute("class","brt-station"),t.setAttribute("mixin","brt-station"),t}function D(t,e,i,a,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=document.createElement("a-entity"),o=[.2,.4,.6][r];return 0===r?e=-.1:2===r&&(e=.1),s.setAttribute("geometry","primitive: box; \n    height: ".concat(o,"; \n    depth: ").concat(a,";\n    width: ").concat(t,";")),s.setAttribute("position",{y:e}),s.setAttribute("mixin",i),0!==n.length&&s.setAttribute("material","repeat: ".concat(n[0]," ").concat(n[1])),s}function H(t,e,i,a,n){var r=document.createElement("a-entity"),s="1 "+a/150+" 1";return r.setAttribute("rotation","270 "+e+" 0"),r.setAttribute("scale",s),r.setAttribute("position","0 "+t+" 0"),r.setAttribute("mixin",i),0!==n.length&&r.setAttribute("material","repeat: ".concat(n[0]," ").concat(n[1])),r}t.exports.processSegments=function(t,e,i,n,r){var s=i/2;i>12&&(s=(i-12)/2),e&&(t=function(t){function e(t){return"lane"===t.slice(t.length-4)||"light-rail"===t||"streetcar"===t||"flex-zone"===t}return t.reduce((function(t,i,a,n){if(0===a)return t.concat(i);var r=n[a-1];if(e(i.type)&&e(r.type)){var s="solid";i.type===r.type&&(s="dashed"),("drive-lane"===i.type&&"turn-lane"===r.type||"drive-lane"===r.type&&"turn-lane"===i.type)&&(s="dashed"),i.variantString.split("|")[0]!==r.variantString.split("|")[0]&&(s="doubleyellow","bike-lane"===i.type&&"bike-lane"===r.type&&(s="shortdashedyellow"),"flex-zone"!==i.type&&"flex-zone"!==r.type||(s="solid")),"turn-lane"===i.type&&"shared"===i.variantString.split("|")[1]?s="soliddashedyellow":"turn-lane"===r.type&&"shared"===r.variantString.split("|")[1]&&(s="soliddashedyellowinverted"),"parking-lane"!==i.type&&"parking-lane"!==r.type||(s="invisible"),t.push({type:"separator",variantString:s,width:0,elevation:i.elevation})}return(e(i.type)&&"divider"===r.type||e(r.type)&&"divider"===i.type)&&t.push({type:"separator",variantString:"solid",width:0,elevation:i.elevation}),t.push(i),t}),[])}(t));var u=function(t){var e=document.createElement("a-entity"),i=0-l.calcStreetWidth(t)/2;return e.setAttribute("position",i+" 0 0"),e}(t);u.classList.add("street-parent"),u.setAttribute("data-layer-name","Street Segments Container");for(var p,y,b,w,_=0,M=0;M<t.length;M++){var V=document.createElement("a-entity");V.classList.add("segment-parent-"+M);var U=.3048*t[M].width,Y=(_+=U)-.5*U,X=0,G=t[M].variantString.split("|"),q=t[M].elevation;elevationLevels=[0,.2,.4];var W=elevationLevels[q],Q="inbound"===G[0]||"inbound"===G[1]?180:0,J="outbound"===G[0]||"outbound"===G[1]?1:-1,K=t[M].type,Z=[];if("drive-lane"===t[M].type&&"sharrow"===G[1]){var $=d({y:W+.015});c({objectMixinId:"stencils sharrow",parentEl:$,rotation:"-90 "+Q+" 0",step:10,radius:s}),V.append($)}else if("bike-lane"===t[M].type||"scooter"===t[M].type){var tt=d({y:W+.015});K="red"===(w=G[1])?"surface-red bike-lane":"green"===w?"surface-green bike-lane":"bike-lane",c({objectMixinId:"stencils bike-arrow",parentEl:tt,rotation:"-90 "+Q+" 0",step:20,radius:s}),V.append(tt),V.append(N(G,t[M].type,W,i,r))}else if("light-rail"===t[M].type||"streetcar"===t[M].type){K=v(G[1]);var et="streetcar"===t[M].type?"trolley":"tram";V.append(A(G,et,i,r));var it=m(i,et);V.append(it)}else if("turn-lane"===t[M].type){K="drive-lane";var at=G[1];"inbound"===G[0]&&(at=at.replace(/left|right/g,(function(t){return"left"===t?"right":"left"}))),"shared"===G[1]&&(at="left"),"left-right-straight"===G[1]&&(at="all");var nt="stencils "+at,rt=d({y:W+.015});if(c({objectMixinId:nt,parentEl:rt,rotation:"-90 "+Q+" 0",step:15,radius:s}),V.append(rt),"shared"===G[1]){var st=d({y:W+.015,z:-3*J});c({objectMixinId:nt,parentEl:st,rotation:"-90 "+(Q+180)+" 0",step:15,radius:s}),V.append(st)}}else if("divider"===t[M].type&&"bollard"===G[0]){K="divider";var ot=(b=void 0,(b=document.createElement("a-entity")).setAttribute("class","safehit-parent"),b);c({objectMixinId:"safehit",parentEl:ot,step:4,radius:s}),V.append(ot),Z[0]=1,Z[1]=parseInt(i)}else if("divider"===t[M].type&&"flowers"===G[0])K="grass",V.append(h("flowers",s,2.25));else if("divider"===t[M].type&&"planting-strip"===G[0])K="grass",V.append(h("planting-strip",s,2.25));else if("divider"===t[M].type&&"planter-box"===G[0])K="grass",V.append(h("planter-box",s,2.45));else if("divider"===t[M].type&&"palm-tree"===G[0]){K="grass";var lt=P();c({objectMixinId:"palm-tree",parentEl:lt,randomY:!0,radius:s}),V.append(lt)}else if("divider"===t[M].type&&"big-tree"===G[0]){K="grass";var ct=P();c({objectMixinId:"tree3",parentEl:ct,randomY:!0,radius:s}),V.append(ct)}else if("divider"===t[M].type&&"bush"===G[0])K="grass",V.append(h("bush",s,2.25));else if("divider"===t[M].type&&"dome"===G[0])K="divider",V.append(h("dome",s,2.25)),Z[0]=1,Z[1]=parseInt(i);else if("temporary"===t[M].type&&"barricade"===G[0])K="drive-lane",V.append(f("temporary-barricade",s,2.25));else if("temporary"===t[M].type&&"traffic-cone"===G[0])K="drive-lane",V.append(f("temporary-traffic-cone",s,2.25));else if("temporary"===t[M].type&&"jersey-barrier-plastic"===G[0])K="drive-lane",V.append(f("temporary-jersey-barrier-plastic",s,2.25));else if("temporary"===t[M].type&&"jersey-barrier-concrete"===G[0])K="drive-lane",V.append(f("temporary-jersey-barrier-concrete",s,2.93));else if("bus-lane"===t[M].type||"brt-lane"===t[M].type){K=v(G[1]),V.append(E(G,i,r));var dt=void 0;c({objectMixinId:"stencils word-bus",parentEl:dt=d({y:W+.015}),rotation:"-90 "+Q+" 0",step:50,radius:s}),V.append(dt),c({objectMixinId:"stencils word-taxi",parentEl:dt=d({y:W+.015,z:10}),rotation:"-90 "+Q+" 0",step:50,radius:s}),V.append(dt),c({objectMixinId:"stencils word-only",parentEl:dt=d({y:W+.015,z:20}),rotation:"-90 "+Q+" 0",step:50,radius:s}),V.append(dt)}else if("drive-lane"===t[M].type){var ut="animated"===G[2]||n,mt=g(2,3);V.append(C(G,U,i,ut,r,mt,7))}else if("food-truck"===t[M].type)K="drive-lane",V.append(k(G,i));else if("flex-zone"===t[M].type){K="bright-lane",V.append(j(G,i,r));var pt=void 0;c({objectMixinId:"stencils word-loading-small",parentEl:pt=d({y:W+.015,z:5}),rotation:"-90 "+Q+" 0",step:50,radius:s}),V.append(pt),c({objectMixinId:"stencils word-only-small",parentEl:pt=d({y:W+.015,z:-5}),rotation:"-90 "+Q+" 0",step:50,radius:s}),V.append(pt)}else if("sidewalk"===t[M].type&&"empty"!==G[0]){var ht="animated"===G[1]||n;V.append(x(U,G[0],W,i,"random",ht))}else if("sidewalk-wayfinding"===t[M].type)V.append((p=void 0,y=void 0,y=document.createElement("a-entity"),(p=document.createElement("a-entity")).setAttribute("position","0 1 0"),p.setAttribute("mixin","wayfinding-box"),y.append(p),(p=document.createElement("a-entity")).setAttribute("position","0 1.2 0.06"),p.setAttribute("geometry","primitive: plane; width: 0.8; height: 1.6"),p.setAttribute("material","src:#wayfinding-map"),y.append(p),(p=document.createElement("a-entity")).setAttribute("position","0 1.2 -0.06"),p.setAttribute("rotation","0 180 0"),p.setAttribute("geometry","primitive: plane; width: 0.8; height: 1.6"),p.setAttribute("material","src:#wayfinding-map"),y.append(p),y));else if("sidewalk-bench"===t[M].type){var ft=T(),gt="right"===G[0]?-90:90;"center"===G[0]?(c({objectMixinId:"bench_orientation_center",parentEl:ft,rotation:"0 "+gt+" 0",radius:s}),V.append(ft)):(c({objectMixinId:"bench",parentEl:ft,rotation:"0 "+gt+" 0",radius:s}),V.append(ft))}else if("sidewalk-bike-rack"===t[M].type){var yt=O(W);c({objectMixinId:"bikerack",parentEl:yt,rotation:"0 "+("sidewalk-parallel"===G[1]?90:0)+" 0",radius:s}),V.append(yt)}else if("magic-carpet"===t[M].type)K="drive-lane",V.append(S(r));else if("outdoor-dining"===t[M].type)K="road"===G[1]?"drive-lane":"sidewalk",V.append(R(i,W));else if("parklet"===t[M].type)K="drive-lane",V.append(I(i,G));else if("bikeshare"===t[M].type)V.append(L(G,W));else if("utilities"===t[M].type){var bt=f("utility_pole",s,15,"right"===G[0]?"0 180 0":"0 0 0");V.append(bt)}else if("sidewalk-tree"===t[M].type){var xt=P();c({objectMixinId:et="palm-tree"===G[0]?"palm-tree":"tree3",parentEl:xt,randomY:!0,radius:s}),V.append(xt)}else if("sidewalk-lamp"!==t[M].type||"modern"!==G[1]&&"pride"!==G[1]){if("sidewalk-lamp"===t[M].type&&"traditional"===G[1]){var vt=F();c({objectMixinId:"lamp-traditional",parentEl:vt,radius:s}),V.append(vt)}else if("transit-shelter"===t[M].type){var wt="left"===G[0]?90:270;V.append(z(wt,W))}else if("brt-station"===t[M].type)V.append(B());else if("separator"===t[M].type&&"dashed"===G[0])K="markings dashed-stripe",X=W+.01,Z[0]=1,Z[1]=parseInt(i/6);else if("separator"===t[M].type&&"solid"===G[0])K="markings solid-stripe",X=W+.01;else if("separator"===t[M].type&&"doubleyellow"===G[0])K="markings solid-doubleyellow",X=W+.01;else if("separator"===t[M].type&&"shortdashedyellow"===G[0])K="markings yellow short-dashed-stripe",X=W+.01,Z[0]=1,Z[1]=parseInt(i/3);else if("separator"===t[M].type&&"soliddashedyellow"===G[0])K="markings yellow solid-dashed",X=W+.01;else if("separator"===t[M].type&&"soliddashedyellowinverted"===G[0])K="markings yellow solid-dashed",X=W+.01,Q="180",Z[0]=1,Z[1]=parseInt(i/6);else if("parking-lane"===t[M].type){var At=void 0;K="bright-lane";var Et="stencils parking-t",_t=6,Ct={outbound:90,inbound:90,sideways:0,"angled-front-left":30,"angled-front-right":-30,"angled-rear-left":-30,"angled-rear-right":30}[G[0]],kt=void 0,St=U/2;90==Ct&&"right"==G[1]?(Ct=-90,St=.75-St):St-=.75,("sideways"==G[0]||G[0].includes("angled"))&&(_t=3,kt=U,St=0,Et="markings solid-stripe"),markingPosXY=St+" 0";var Mt=i/2-_t;V.append(C([].concat(a(G),["car"]),U,i,!1,r,5,_t)),G[1],c({objectMixinId:Et,parentEl:At=d({y:W+.015}),positionXYString:markingPosXY,rotation:"-90 90 "+Ct,length:kt,step:_t,radius:Mt}),V.append(At)}}else{var Rt=F();if("both"===G[0])c({objectMixinId:"lamp-modern-double",parentEl:Rt,rotation:"0 0 0",radius:s}),V.append(Rt);else c({objectMixinId:"lamp-modern",parentEl:Rt,rotation:"0 "+("right"===G[0]?0:180)+" 0",radius:s}),V.append(Rt);"pride"!==G[1]||"right"!==G[0]&&"both"!==G[0]||c({objectMixinId:"pride-flag",parentEl:Rt,positionXYString:"0.409 5",radius:s}),"pride"!==G[1]||"left"!==G[0]&&"both"!==G[0]||c({objectMixinId:"pride-flag",parentEl:Rt,rotation:"0 -180 0",positionXYString:"-0.409 5",radius:s})}o.isSidewalk(t[M].type)&&(K="sidewalk",Z[0]=U/1.5,Z[1]=parseInt(i/2)),"separator"!==t[M].type?V.append(D(U,X,K,i,Z,q)):V.append(H(X,Q,K,i,Z,q)),u.append(V),V.setAttribute("position",Y+" 0 0"),V.setAttribute("data-layer-name","Segment: "+t[M].type+", "+G[0])}var Nt=document.createElement("a-box"),jt=_/2;return console.log("xPos",jt),console.log("`${xPos} -1.1 0`","".concat(jt," -1.1 0")),Nt.setAttribute("position","".concat(jt," -1.1 0")),Nt.setAttribute("height",2),Nt.setAttribute("width",_),Nt.setAttribute("depth",i-.2),Nt.setAttribute("material","color: #664B00;"),Nt.setAttribute("data-layer-name","Underground"),u.append(Nt),u},t.exports.processBuildings=function(t,e,i,a,n){var r=document.createElement("a-entity"),s=.45*n;return r.classList.add("buildings-parent"),r.setAttribute("data-layer-name","Buildings & Blocks  Container"),r.setAttribute("position","0 0.2 0"),[t,e].forEach((function(t,e){if(0!==t.length){var l=0===e?"left":"right",d="left"===l?-1:1,u=(n/4+i/2)*d,m=(75+i/2)*d;if(a){var p;if("waterfront"===t)(p=document.createElement("a-ocean-box")).setAttribute("geometry",{primitive:"box",depth:n,width:n/2,height:2,segmentsHeight:1,segmentsDepth:10,segmentsWidth:10}),p.setAttribute("position",{y:-3});else(p=document.createElement("a-box")).setAttribute("depth",n),p.setAttribute("height",2),p.setAttribute("width",n/2),p.setAttribute("shadow",""),p.setAttribute("mixin",{grass:"ground-grass-material",fence:"ground-grass-material","parking-lot":"ground-parking-lot-material",residential:"ground-grass-material",narrow:"ground-asphalt-material",wide:"ground-asphalt-material",arcade:"ground-tiled-concrete-material","compound-wall":"ground-asphalt-material"}[t]),p.setAttribute("position",{y:-1});p.setAttribute("position",{x:u}),p.classList.add("ground-"+l),p.setAttribute("data-layer-name","Ground "+l+": "+t),r.appendChild(p)}var h={x:m,y:0,z:1===e?n/2:-n/2};switch(t){case"narrow":case"wide":h.x+=-72*d;break;case"residential":h.x+=-64*d,h.y=-.58,r.setAttribute("position","0 0.17 0");break;case"arcade":h.x+=-70.5*d}var f=function(t,e){var i=o.createBuildingsArray(n,t),a=JSON.stringify(i),r=document.createElement("a-entity");return r.setAttribute("rotation","0 "+90*e+" 0"),r.setAttribute("create-from-json","jsonString",a),r}(t,d);if(f.setAttribute("data-layer-name","Buildings "+l+": "+t),f.setAttribute("position",h),r.append(f),"waterfront"===t||"compound-wall"===t){var g,y=m-150*d/2,b=document.createElement("a-entity");b.setAttribute("class","seawall-parent"),b.setAttribute("position",{x:y,z:4.5}),"compound-wall"===t?(b.setAttribute("position",{y:3}),b.setAttribute("position",{x:y+1.5*d}),g="left"===l?90:-90):g="left"===l?-90:90,b.classList.add("seawall-parent-"+l),r.appendChild(b),c({objectMixinId:"seawall",parentEl:b,rotation:"0 "+g+" 0",step:15,radius:s})}if("fence"===t||"parking-lot"===t){var x=m-150*d/2,v=document.createElement("a-entity");v.setAttribute("class","fence-parent"),v.setAttribute("position",x+" 0 4.625"),v.classList.add("fence-parent-"+m),c({objectMixinId:"fence",parentEl:v,rotation:"0 "+("right"===l?-90:90)+" 0",step:9.25,radius:s}),r.appendChild(v)}}})),r}},234:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}function a(e){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,r=n(e);if(i){var s=n(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return function(e,i){if(i&&("object"===t(i)||"function"==typeof i))return i;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(this,a)}}function n(t){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}var r=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(l,AFRAME.ANode);var n,r,s,o=a(l);function l(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=o.call(this)).isAssetItem=!0,t}return n=l,(r=[{key:"connectedCallback",value:function(){var t=this.getAttribute("categories"),e=this.getAttribute("url");this.insertAdjacentHTML("afterend",function(t,e){t||(t="https://assets.3dstreet.app/"),console.log("[street]","Using street assets from",t);var i=.8,a={"sidewalk-props":'\n        \x3c!-- sidewalk props --\x3e\n        <img id="wayfinding-map" src="'.concat(t,'objects/wayfinding.jpg" crossorigin="anonymous" />\n        <a-asset-item id="streetProps" src="').concat(t,'sets/street-props/gltf-exports/draco/street-props.glb"></a-asset-item>\n        <a-asset-item id="brt-station-model" src="').concat(t,'sets/brt-station/gltf-exports/draco/brt-station.glb"></a-asset-item>\n        <a-mixin shadow id="brt-station" gltf-model="#brt-station-model" ></a-mixin>\n        <a-mixin shadow id="outdoor_dining" gltf-part="src: #streetProps; part: outdoor_dining"></a-mixin>\n        <a-mixin shadow id="bench_orientation_center" gltf-part="src: #streetProps; part: bench_orientation_center"></a-mixin>\n        <a-mixin shadow id="parklet" gltf-part="src: #streetProps; part: parklet"></a-mixin>\n        <a-mixin shadow id="utility_pole" gltf-part="src: #streetProps; part: utility_pole"></a-mixin>\n        <a-mixin shadow id="lamp-modern" gltf-part="src: #streetProps; part: street-light"></a-mixin>\n        <a-mixin shadow id="lamp-modern-double" gltf-part="src: #streetProps; part: street-light-double"></a-mixin>\n        <a-mixin shadow id="bikerack" gltf-part="src: #streetProps; part: bike_rack"></a-mixin>\n        <a-mixin shadow id="bikeshare" gltf-part="src: #streetProps; part: bike_share"></a-mixin>\n        <a-mixin shadow id="lamp-traditional" gltf-part="src: #streetProps; part: lamp_post_traditional" scale="2 2 2"></a-mixin>\n        <a-mixin shadow id="palm-tree" gltf-part="src: #streetProps; part: palmtree" scale="1 1.5 1"></a-mixin>\n        <a-mixin shadow id="bench" gltf-part="src: #streetProps; part: park_bench"></a-mixin>\n        <a-mixin shadow id="seawall" gltf-part="src: #streetProps; part: sea_wall"></a-mixin>\n        <a-mixin shadow id="track" gltf-part="src: #streetProps; part: track"></a-mixin>\n        <a-mixin shadow id="tree3" gltf-part="src: #streetProps; part: tree-01" scale="1.25 1.25 1.25"></a-mixin>\n        <a-mixin shadow id="bus-stop" gltf-part="src: #streetProps; part: transit-shelter-1"></a-mixin>\n        <a-mixin shadow id="pride-flag" position="0.409 3.345 0" rotation="0 0 0" scale="0.5 0.75 0" geometry="width:2;height:2;primitive:plane" material="side:double; src:').concat(t,'materials/rainbow-flag-poles_512.png;transparent: true;"></a-mixin>\n        <a-mixin shadow id="wayfinding-box" geometry="primitive: box; height: 2; width: 0.84; depth: 0.1" material="color: gray"></a-mixin>\n      '),people:'\n        \x3c!-- human characters --\x3e\n        <a-asset-item id="humans" src="'.concat(t,'sets/human-characters-poses-1/gltf-exports/draco/human-characters-poses-1.glb"></a-asset-item>\n        <a-mixin shadow id="char1" gltf-part="src: #humans; part: Character_1"></a-mixin>\n        <a-mixin shadow id="char2" gltf-part="src: #humans; part: Character_2"></a-mixin>\n        <a-mixin shadow id="char3" gltf-part="src: #humans; part: Character_3"></a-mixin>\n        <a-mixin shadow id="char4" gltf-part="src: #humans; part: Character_4"></a-mixin>\n        <a-mixin shadow id="char5" gltf-part="src: #humans; part: Character_5"></a-mixin>\n        <a-mixin shadow id="char6" gltf-part="src: #humans; part: Character_6"></a-mixin>\n        <a-mixin shadow id="char7" gltf-part="src: #humans; part: Character_7"></a-mixin>\n        <a-mixin shadow id="char8" gltf-part="src: #humans; part: Character_8"></a-mixin>\n        <a-asset-item id="humans2" src="').concat(t,'sets/human-characters-poses-2/gltf-exports/draco/human-characters-poses-2.glb"></a-asset-item>\n        <a-mixin shadow id="char9" gltf-part="src: #humans2; part: Character_9"></a-mixin>\n        <a-mixin shadow id="char10" gltf-part="src: #humans2; part: Character_10"></a-mixin>\n        <a-mixin shadow id="char11" gltf-part="src: #humans2; part: Character_11"></a-mixin>\n        <a-mixin shadow id="char12" gltf-part="src: #humans2; part: Character_12"></a-mixin>\n        <a-mixin shadow id="char13" gltf-part="src: #humans2; part: Character_13"></a-mixin>\n        <a-mixin shadow id="char14" gltf-part="src: #humans2; part: Character_14"></a-mixin>\n        <a-mixin shadow id="char15" gltf-part="src: #humans2; part: Character_15"></a-mixin>\n        <a-mixin shadow id="char16" gltf-part="src: #humans2; part: Character_16"></a-mixin>\n      '),"people-rigged":'          \n        <a-asset-item id="character1walk" src="'.concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-1-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char1" gltf-model="#character1walk" animation-mixer></a-mixin>\n        \n        <a-asset-item id="character2walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-2-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char2" gltf-model="#character2walk" animation-mixer></a-mixin>\n        <a-asset-item id="character3walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-3-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char3" gltf-model="#character3walk" animation-mixer></a-mixin>\n        <a-asset-item id="character4walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-4-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char4" gltf-model="#character4walk" animation-mixer></a-mixin>\n        <a-asset-item id="character5walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-5-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char5" gltf-model="#character5walk" animation-mixer></a-mixin>\n        <a-asset-item id="character6walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-6-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char6" gltf-model="#character6walk" animation-mixer></a-mixin>\n        <a-asset-item id="character7walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-7-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char7" gltf-model="#character7walk" animation-mixer></a-mixin>\n        <a-asset-item id="character8walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-8-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char8" gltf-model="#character8walk" animation-mixer></a-mixin>\n      '),vehicles:'\n        \x3c!-- vehicles --\x3e\n        <a-asset-item id="magic-carpet-glb" src="'.concat(t,'sets/magic-carpet/gltf-exports/draco/magic-carpet.glb"></a-asset-item>\n        <a-mixin shadow id="Character_1_M" gltf-part="src: #magic-carpet-glb; part: Character_1_M"></a-mixin>\n        <a-mixin shadow id="magic-carpet" gltf-part="src: #magic-carpet-glb; part: magic-carpet"></a-mixin>\n        \x3c!-- micro mobility vehicles --\x3e\n        <a-asset-item id="microMobilityDevices" src="').concat(t,'sets/micro-mobility-devices/gltf-exports/draco/micro-mobility-devices_v01.glb"></a-asset-item>\n        <a-mixin shadow id="Bicycle_1" gltf-part="src: #microMobilityDevices; part: Bicycle_1"></a-mixin>\n        <a-mixin shadow id="ElectricScooter_1" gltf-part="src: #microMobilityDevices; part: ElectricScooter_1"></a-mixin>\n      '),"vehicles-rigged":'\n        \x3c!-- vehicles rigged --\x3e\n        <a-mixin shadow id="sedan-rig" gltf-model="url('.concat(t,'sets/vehicles-rig/gltf-exports/draco/toyota-prius-rig.glb)" ></a-mixin>\n        <a-mixin shadow id="sedan-taxi-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/sedan-taxi-rig.glb)"></a-mixin>\n        <a-mixin shadow id="suv-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/suv-rig.glb)"></a-mixin>\n        <a-mixin shadow id="box-truck-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/isuzu-truck-rig.glb)"></a-mixin>\n        <a-mixin shadow id="food-trailer-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/food-trailer-rig.glb)"></a-mixin>\n        <a-mixin shadow id="fire-truck-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/fire-truck-pumper-rig.glb)"></a-mixin>\n        <a-mixin shadow id="self-driving-cruise-car-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/self-driving-cruise-car-rig.glb)"></a-mixin>\n      '),buildings:'\n        \x3c!-- blocks --\x3e\n        <a-asset-item id="blockmodel" src="'.concat(t,'sets/buildings/gltf-exports/draco/buildings.glb"></a-asset-item>\n        <a-asset-item id="archedmodel" src="').concat(t,'sets/arcade-style-buildings/gltf-exports/draco/arched-buildings.glb"></a-asset-item>\n        <a-asset-item id="suburbiamodel" src="').concat(t,'sets/suburban-houses/gltf-exports/draco/suburban-houses.glb"></a-asset-item>\n\n        \x3c!-- buildings and blocks --\x3e\n        <a-mixin shadow id="SM3D_Bld_Mixed_Corner_4fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_Corner_4fl"></a-mixin>\n        <a-mixin shadow id="SM3D_Bld_Mixed_Double_5fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_Double_5fl"></a-mixin>\n        <a-mixin shadow id="SM3D_Bld_Mixed_4fl_2" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_4fl_2"></a-mixin>\n        <a-mixin shadow id="SM3D_Bld_Mixed_5fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_5fl"></a-mixin>\n        <a-mixin shadow id="SM3D_Bld_Mixed_4fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_4fl"></a-mixin>\n\n        \x3c!-- suburban buildings --\x3e\n        <a-mixin shadow id="SM_Bld_House_Preset_03_1800" scale="1 1 1" rotation="0 0 0" gltf-part="src: #suburbiamodel; part: suburban-house_1"></a-mixin>\n        <a-mixin shadow id="SM_Bld_House_Preset_08_1809" scale="1 1 1" rotation="0 0 0" gltf-part="src: #suburbiamodel; part: suburban-house_3"></a-mixin>\n        <a-mixin shadow id="SM_Bld_House_Preset_09_1845" scale="1 1 1" rotation="0 0 0" gltf-part="src: #suburbiamodel; part: suburban-house_2"></a-mixin>\n\n        \x3c!-- arched style buildings --\x3e\n        <a-mixin shadow id="arched-building-01" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-01"></a-mixin>\n        <a-mixin shadow id="arched-building-02" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-02"></a-mixin>\n        <a-mixin shadow id="arched-building-03" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-03"></a-mixin>\n        <a-mixin shadow id="arched-building-04" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-04"></a-mixin>\n'),"intersection-props":'\n        <a-asset-item id="stopsign" src="'.concat(t,'sets/road-signs/gltf-exports/draco/stop-sign.glb"></a-asset-item>\n        <a-asset-item id="signal1" src="').concat(t,'sets/signals/gltf-exports/draco/signal1.glb"></a-asset-item>\n        <a-asset-item id="signal2" src="').concat(t,'sets/signals/gltf-exports/draco/signal2.glb"></a-asset-item>\n        <a-mixin id="signal_left" gltf-model="#signal1"></a-mixin>\n        <a-mixin id="signal_right" gltf-model="#signal2"></a-mixin>\n        <a-mixin id="stop_sign" gltf-model="#stopsign"></a-mixin>\n      '),"segment-textures":'  \n        \x3c!-- segment mixins with textures --\x3e\n        <img id="seamless-road" src="'.concat(t,'materials/TexturesCom_Roads0086_1_seamless_S_rotate.jpg" crossorigin="anonymous">\n        <img id="seamless-bright-road" src="').concat(t,'materials/asphalthd_Base_Color.jpg" crossorigin="anonymous">\n        <img id="hatched-base" src="').concat(t,'materials/hatched_Base_Color.jpg" crossorigin="anonymous">\n        <img id="hatched-normal" src="').concat(t,'materials/hatched_Normal.jpg" crossorigin="anonymous">\n        <img id="seamless-sidewalk" src="').concat(t,'materials/TexturesCom_FloorsRegular0301_1_seamless_S.jpg" crossorigin="anonymous">\n        <a-mixin shadow="cast: false" id="drive-lane" geometry="width:3;height:150;primitive:plane" material="roughness:').concat(i,';repeat:0.3 25;offset:0.55 0;src:#seamless-road;"></a-mixin>\n        <a-mixin shadow="cast: false" id="bright-lane" geometry="width:3;height:150;primitive:plane" material="roughness:').concat(i,';repeat:0.6 50;offset:0.55 0;src:#seamless-bright-road;color:#dddddd"></a-mixin>\n        <a-mixin shadow="cast: false" id="bike-lane" geometry="width:1.8;height:150;primitive:plane" material="roughness:').concat(i,';repeat:0.3 25;offset:0.55 0;metalness:0;src:#seamless-road;"></a-mixin>\n        <a-mixin shadow id="sidewalk" anisotropy geometry="width:3;height:150;primitive:plane" material="roughness:').concat(i,';repeat:1.5 75;src:#seamless-sidewalk;"></a-mixin>\n        <a-mixin shadow="cast: false" id="bus-lane" geometry="width:3;height:150;primitive:plane" material="roughness:').concat(i,';repeat:0.3 25;offset:0.55 0;src:#seamless-road;"></a-mixin>\n        <a-mixin shadow="cast: false" id="divider" geometry="width:0.3;height:150;primitive:plane" material="roughness:').concat(i,';repeat:1 150;offset:0.415 0;normalTextureOffset:0.415 0;src:#hatched-base;normalTextureRepeat:0.21 150;normalMap:#hatched-normal"></a-mixin>\n        <a-mixin shadow="cast: false" id="grass" geometry="width:0.3;height:150;primitive:plane" material="roughness:').concat(i,';repeat:1 150;offset:0.415 0;src:#grass-texture;"></a-mixin>\n      '),"segment-colors":'  \n        \x3c!-- segment color modifier mixins --\x3e\n        <a-mixin id="yellow" material="color:#f7d117"></a-mixin>\n        <a-mixin id="surface-green" material="color:#adff83"></a-mixin>\n        <a-mixin id="surface-red" material="color:#ff9393"></a-mixin>\n      ',"lane-separator":'\n        \x3c!-- lane separator markings --\x3e\n        <img id="markings-atlas" src="'.concat(t,'materials/lane-markings-atlas_1024.png" crossorigin="anonymous" /> \n        <a-mixin shadow="cast: false" id="markings" anisotropy atlas-uvs="totalRows: 1; totalColumns: 8; row: 1" scale="1 1 1" material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 25;" geometry="primitive: plane; buffer: false; skipCache: true; width:0.2; height:150;"></a-mixin>\n        <a-mixin shadow="cast: false" id="solid-stripe" atlas-uvs="column: 3; row: 1" material="repeat:1 5;"></a-mixin>\n        <a-mixin shadow="cast: false" id="dashed-stripe" atlas-uvs="column: 4; row: 1"></a-mixin>\n        <a-mixin shadow="cast: false" id="short-dashed-stripe" atlas-uvs="column: 4" material="repeat:1 50;"></a-mixin>\n        <a-mixin shadow="cast: false" id="solid-doubleyellow" atlas-uvs="totalColumns: 4; column: 3" geometry="width: 0.5"></a-mixin>\n        <a-mixin shadow="cast: false" id="solid-dashed" atlas-uvs="totalColumns: 4; column: 2" geometry="width: 0.4"></a-mixin>\n        <a-mixin shadow="cast: false" id="crosswalk-zebra" atlas-uvs="totalColumns: 4; column: 4" geometry="width: 2; height: 12"  material="repeat: 1 2"></a-mixin>\n      '),stencils:'  \n        \x3c!-- stencil markings --\x3e\n        <img id="stencils-atlas" src="'.concat(t,'materials/stencils-atlas_2048.png" crossorigin="anonymous" />\n        <a-mixin shadow="cast: false" id="stencils" anisotropy atlas-uvs="totalRows: 4; totalColumns: 4" scale="2 2 2" material="src: #stencils-atlas;alphaTest: 0;transparent:true;" geometry="primitive: plane; buffer: false; skipCache: true;"></a-mixin>\n        <a-mixin id="right" atlas-uvs="column: 3; row: 2"></a-mixin>\n        <a-mixin id="left" atlas-uvs="column: 3; row: 3"></a-mixin>\n        <a-mixin id="both" atlas-uvs="column: 2; row: 1"></a-mixin>\n        <a-mixin id="all" atlas-uvs="column: 3; row: 1"></a-mixin>\n        <a-mixin id="left-straight" atlas-uvs="column: 2; row: 3"></a-mixin>\n        <a-mixin id="right-straight" atlas-uvs="column: 2; row: 2"></a-mixin>\n        <a-mixin id="straight" atlas-uvs="column: 2; row: 4"></a-mixin>\n        <a-mixin id="sharrow" atlas-uvs="totalRows: 4; totalColumns: 8; column: 2; row: 3" scale="1.5 3 1"></a-mixin>\n        <a-mixin id="bike-arrow" atlas-uvs="totalRows: 2; totalColumns: 8; column: 1; row: 2" scale="1 4 1"></a-mixin>\n        <a-mixin id="word-bus" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 4" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-lane" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 4" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-taxi" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 3" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-only" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 3" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-only-small" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 3" scale="2.5 2 2.5"></a-mixin>\n        <a-mixin id="word-yield" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 2" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-slow" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 2" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-xing" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 1" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-stop" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 1" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-loading-small" atlas-uvs="totalRows: 8; totalColumns: 4; column: 4; row: 1" scale="2.75 1.75 2.75"></a-mixin>\n        <a-mixin id="perpendicular-stalls" atlas-uvs="totalRows: 4; totalColumns: 8; column: 5; row: 4" scale="5 10 5"></a-mixin>\n        <a-mixin id="parking-t" atlas-uvs="totalRows: 8; totalColumns: 16; column: 4; row: 7" scale="1.5 2 2"></a-mixin>\n        <a-mixin id="painted-safety-zone" atlas-uvs="totalRows: 4; totalColumns: 4; column: 4; row: 4" scale="8 8 8"></a-mixin>\n      '),"vehicles-transit":'\n        \x3c!-- vehicles-transit --\x3e\n        <a-asset-item id="trammodel" src="'.concat(t,'sets/light-rail-vehicle/gltf-exports/draco/light-rail-vehicle-v02.glb"></a-asset-item>\n        <a-asset-item id="trolleymodel" src="').concat(t,'objects/godarvilletram.gltf"></a-asset-item>\n        <a-asset-item id="xd40" src="').concat(t,'sets/flyer-bus/gltf-exports/draco/new-flyer-bus.glb"></a-asset-item>\n        <a-mixin shadow id="bus" anisotropy gltf-model="#xd40"></a-mixin>\n        <a-mixin shadow id="tram" anisotropy gltf-model="#trammodel"></a-mixin>\n        <a-mixin shadow id="trolley" gltf-model="#trolleymodel"></a-mixin>\n      '),dividers:'\n        \x3c!-- dividers --\x3e\n        <a-asset-item id="dividers" src="'.concat(t,'sets/dividers/gltf-exports/draco/dividers.glb"></a-asset-item>        \n        <a-mixin shadow id="dividers-flowers" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: flowers"></a-mixin>\n        <a-mixin shadow id="dividers-planting-strip" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: planting-strip"></a-mixin>\n        <a-mixin shadow id="dividers-planter-box" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: planter-box"></a-mixin>\n        <a-mixin shadow id="dividers-bush" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: bush"></a-mixin>\n        <a-mixin shadow id="dividers-dome" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: dome"></a-mixin>\n        <a-mixin shadow id="safehit" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: bollard"></a-mixin>\n        <a-mixin shadow id="temporary-barricade" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: barricade"></a-mixin>\n        <a-mixin shadow id="temporary-traffic-cone" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: traffic-cone"></a-mixin>\n        <a-mixin shadow id="temporary-jersey-barrier-plastic" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: jersey-barrier-plastic"></a-mixin>\n        <a-mixin shadow id="temporary-jersey-barrier-concrete" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: jersey-barrier-concrete"></a-mixin>\n      '),sky:'\n        \x3c!-- sky --\x3e\n        <img id="sky" src="'.concat(t,'images/skies/2048-polyhaven-wasteland_clouds_puresky.jpeg" crossorigin="anonymous" />\n        <img id="sky-night" src="').concat(t,'images/AdobeStock_286725174-min.jpeg" crossorigin="anonymous" />\n      '),grounds:'\n        \x3c!-- grounds --\x3e\n        <img id="grass-texture" src="'.concat(t,'materials/TexturesCom_Grass0052_1_seamless_S.jpg" crossorigin="anonymous">\n        <img id="parking-lot-texture" src="').concat(t,'materials/TexturesCom_Roads0111_1_seamless_S.jpg" crossorigin="anonymous">\n        <img id="asphalt-texture" src="').concat(t,'materials/TexturesCom_AsphaltDamaged0057_1_seamless_S.jpg" crossorigin="anonymous">\n\n        \x3c!-- legacy plane-based grounds for compatibility with 0.4.2 and earlier scenes, not used for new streets --\x3e\n        <a-mixin shadow id="ground-grass" rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#grass-texture;repeat:5 5;roughness:1"></a-mixin>\n        <a-mixin shadow id="ground-parking-lot" rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#parking-lot-texture;repeat:2 4;roughness:1"></a-mixin>\n        <a-mixin shadow id="ground-asphalt" rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#asphalt-texture;repeat:5 5;roughness:1"></a-mixin>\n        <a-mixin shadow id="ground-tiled-concrete" anisotropy rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#seamless-sidewalk;repeat:5 5;roughness:1"></a-mixin>\n\n        \x3c!-- new grounds for 0.4.4 and later --\x3e \n        <a-mixin shadow id="ground-grass-material" material="src:#grass-texture;repeat:2.5 5;roughness:').concat(i,'"></a-mixin>\n        <a-mixin shadow id="ground-parking-lot-material" material="src:#parking-lot-texture;repeat:.5 2;roughness:').concat(i,'"></a-mixin>\n        <a-mixin shadow id="ground-asphalt-material" material="src:#asphalt-texture;repeat:5 5;roughness:').concat(i,'"></a-mixin>\n        <a-mixin shadow id="ground-tiled-concrete-material" material="src:#seamless-sidewalk;repeat:10 20;roughness:').concat(i,'"></a-mixin>\n\n        <a-asset-item id="fence-model" src="').concat(t,'sets/fences/gltf-exports/draco/fence4.glb"></a-asset-item>\n        <a-mixin shadow id="fence" gltf-model="#fence-model" scale="0.1 0.1 0.1"></a-mixin>\n      '),"loud-bicycle":'\n        \x3c!-- loud-bicycle-game --\x3e\n        <a-mixin id="cyclist-cargo" gltf-model="url('.concat(t,'sets/cargo-bike-animation/gltf-exports/draco/cargo_bike_animation_v1.glb)"></a-mixin>\n        <a-mixin id="cyclist1" gltf-model="url(').concat(t,'sets/cyclist-animation/gltf-exports/draco/cyclist-1-animation-v1.glb)"></a-mixin>\n        <a-mixin id="cyclist2" gltf-model="url(').concat(t,'sets/cyclist-animation/gltf-exports/draco/cyclist-2-animation-v1.glb)"></a-mixin>\n        <a-mixin id="cyclist3" gltf-model="url(').concat(t,'sets/cyclist-animation/gltf-exports/draco/cyclist-3-animation-v1.glb)"></a-mixin>\n        <a-mixin id="cyclist-kid" gltf-model="url(').concat(t,'sets/cyclist-animation/gltf-exports/draco/Kid_cyclist_animation_v01.glb)"></a-mixin>\n        <a-mixin id="cyclist-dutch" gltf-model="url(').concat(t,'sets/cyclist-animation/gltf-exports/draco/Dutch_cyclist_animation_v01.glb)"></a-mixin>\n        <a-mixin id="loud-bicycle-mini" gltf-model="url(').concat(t,'sets/cycle-horn/gltf-exports/draco/loud-bicycle-mini-horn.glb)"></a-mixin>\n        <a-mixin id="loud-bicycle-classic" gltf-model="url(').concat(t,'sets/cycle-horn/gltf-exports/draco/loud-bicycle-classic-horn.glb)"></a-mixin>\n        <a-mixin id="building-school" gltf-model="url(').concat(t,'sets/school-building/gltf-exports/draco/school-building.glb)"></a-mixin>\n        <a-mixin id="building-bar" gltf-model="url(').concat(t,'sets/irish-bar-building/gltf-exports/draco/irish-bar-building.glb)"></a-mixin>\n        <a-mixin id="vehicle-bmw-m2" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/BWM_m2-rig.glb)"></a-mixin>\n        <a-mixin id="prop-suburban-houses" gltf-model="url(').concat(t,'sets/suburban-houses/gltf-exports/draco/suburban-houses.glb)"></a-mixin>\n        <a-mixin id="prop-banner-wfh" gltf-model="url(').concat(t,'sets/wfh-banner/gltf-exports/draco/wfh-banner.glb)"></a-mixin>\n        <a-mixin id="prop-raygun" gltf-model="url(').concat(t,'sets/ray-gun/gltf-exports/draco/rayGun.glb)"></a-mixin>\n        <a-mixin id="prop-co2-scrubber" gltf-model="url(').concat(t,'sets/c02-scrubber/gltf-exports/draco/co2-scrubber.glb)"></a-mixin>\n    ')};if(e){var n=e.split(" "),r=Object.keys(a).filter((function(t){return n.includes(t)})),s="";for(var o in a)r.includes(o)&&(s+=a[o]);return s}return Object.values(a).join("")}(e,t)),AFRAME.ANode.prototype.load.call(this)}}])&&e(n.prototype,r),s&&e(n,s),l}();customElements.define("street-assets",r);document.addEventListener("DOMSubtreeModified",(function t(e){if("A-SCENE"===e.target.nodeName){var i=e.target.querySelector("a-assets");if(i||(i=document.createElement("a-assets"),e.target.append(i)),i.querySelector("street-assets"))document.removeEventListener("DOMSubtreeModified",t);else{var a=document.createElement("street-assets");i.append(a),document.removeEventListener("DOMSubtreeModified",t)}}}),!1)},51:()=>{AFRAME.registerComponent("anisotropy",{schema:{default:0},dependencies:["material","geometry"],init:function(){var t=this;this.maxAnisotropy=this.el.sceneEl.renderer.capabilities.getMaxAnisotropy(),["model-loaded","materialtextureloaded"].forEach((function(e){return t.el.addEventListener(e,(function(){var e=t.el.getObject3D("mesh"),i=t.data;0===(i=+i||0)&&(i=t.maxAnisotropy),e.traverse((function(t){!0===t.isMesh&&null!==t.material.map&&(t.material.map.anisotropy=i,t.material.map.needsUpdate=!0)}))}),!1)}))}})},391:(t,e,i)=>{var a=i(334);AFRAME.registerComponent("create-from-json",{schema:{jsonString:{type:"string",default:""}},update:function(t){var e=this.data,i=this.el;if(t.string&&e.string!==t.string)for(;i.firstChild;)i.removeChild(i.lastChild);a.appendChildElementsFromArray(JSON.parse(e.jsonString),i)}})},71:()=>{var t={},e={};AFRAME.registerComponent("gltf-part",{schema:{buffer:{default:!0},part:{type:"string"},src:{type:"asset"}},init:function(){this.dracoLoader=document.querySelector("a-scene").systems["gltf-model"].getDRACOLoader()},update:function(){var t=this.el;!this.data.part&&this.data.src||this.getModel((function(e){e&&t.setObject3D("mesh",e)}))},getModel:function(i){var a=this;if(!e[this.data.src])return t[this.data.src]?t[this.data.src].then((function(t){i(a.selectFromModel(t))})):void(t[this.data.src]=new Promise((function(n){var r=new THREE.GLTFLoader;a.dracoLoader&&r.setDRACOLoader(a.dracoLoader),r.load(a.data.src,(function(r){var s=r.scene||r.scenes[0];e[a.data.src]=s,delete t[a.data.src],i(a.selectFromModel(s)),n(s)}),(function(){}),console.error)})));i(this.selectFromModel(e[this.data.src]))},selectFromModel:function(t){var e,i;if(i=t.getObjectByName(this.data.part))return e=i.getObjectByProperty("type","Mesh").clone(!0),this.data.buffer?(e.geometry=e.geometry.toNonIndexed(),e):(e.geometry=(new THREE.Geometry).fromBufferGeometry(e.geometry),e);console.error("[gltf-part] `"+this.data.part+"` not found in model.")}})},247:(t,e,i)=>{var a=i(502).Notyf;AFRAME.registerComponent("notify",{schema:{duration:{type:"number",default:6e3},ripple:{type:"boolean",default:!1},position:{type:"string",default:{x:"center",y:"bottom"}},dismissible:{type:"boolean",default:!1},type:{type:"string",default:"info"},message:{type:"string",default:""}},init:function(){this.notify=new a({types:[{type:"info",background:"blue",icon:!1}],duration:this.data.duration,ripple:this.data.ripple,position:this.data.position,dismissible:this.data.dismissible}),this.types=this.notify.options.types.map((function(t){return t.type}))},message:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";t&&this.types.includes(e)&&this.notify.open({type:e,message:t})},update:function(t){if(0!==Object.keys(t).length){var e=this.data.message,i=this.data.type;e&&this.types.includes(i)&&(this.message(e,i),this.data.message="")}}})},699:()=>{function t(t,e,i,a,n,r,s){try{var o=t[r](s),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(a,n)}function e(e){return function(){var i=this,a=arguments;return new Promise((function(n,r){var s=e.apply(i,a);function o(e){t(s,n,r,o,l,"next",e)}function l(e){t(s,n,r,o,l,"throw",e)}o(void 0)}))}}var i;AFRAME.registerComponent("screentock",{schema:{takeScreenshot:{type:"boolean",default:!1},filename:{type:"string",default:"screenshot"},type:{type:"string",default:"jpg"},imgElementSelector:{type:"selector"}},takeScreenshotNow:(i=e(regeneratorRuntime.mark((function t(i,a,n){var r,s,o,l,c,d,u,m,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=function(t,e,i){var a=document.createElement("a"),n=e.replace(/^data:image\/[^;]/,"data:application/octet-stream");a.setAttribute("href",n),a.setAttribute("download",t),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},c=function(t,e,i){t.font="25px Lato",t.textAlign="center",t.fillStyle="#FFF",t.fillText(STREET.utils.getCurrentSceneTitle(),e-e/2,i-43)},o=function(t){r&&r.opened&&(r.sceneHelpers.visible=t),t?document.querySelector("#cameraRig").setAttribute("cursor-teleport","cameraRig: #cameraRig; cameraHead: #camera;"):document.querySelector("#cameraRig").removeAttribute("cursor-teleport")},r=AFRAME.INSPECTOR,s=AFRAME.scenes[0].renderer,o(!1),l=function(){var t=e(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=document.querySelector("#screenshotCanvas"))||((i=document.createElement("canvas")).id="screenshotCanvas",i.hidden=!0,document.body.appendChild(i)),i.width=e.width,i.height=e.height,(a=i.getContext("2d")).drawImage(e,0,0),c(a,i.width,i.height),t.next=9,d(a);case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=e(regeneratorRuntime.mark((function t(e){var i,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=document.querySelector("img.viewer-logo-img"),a=document.querySelector("#aframeInspector #logoImg svg"),!i){t.next=6;break}e.drawImage(i,0,0,135,43,40,30,270,86),t.next=12;break;case 6:if(!a){t.next=12;break}return(n=new Image).src="data:image/svg+xml;base64,".concat(window.btoa(a.outerHTML)),t.next=11,new Promise((function(t){n.onload=t}));case 11:e.drawImage(n,0,0,135,23,40,40,270,86);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=i+"."+a,s.render(AFRAME.scenes[0].object3D,AFRAME.scenes[0].camera),t.next=12,l(s.domElement);case 12:if(p=t.sent,"img"!=a){t.next=16;break}return n.src=p.toDataURL(),t.abrupt("return");case 16:u(m,"png"==a?p.toDataURL("image/png"):p.toDataURL("image/jpeg",.95)),o(!0);case 18:case"end":return t.stop()}}),t)}))),function(t,e,a){return i.apply(this,arguments)}),update:function(t){0!==Object.keys(t).length&&this.data.takeScreenshot&&(this.data.takeScreenshot=!1,this.takeScreenshotNow(this.data.filename,this.data.type,this.data.imgElementSelector))}})},54:function(t,e,i){var a,n,r,s;function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}t=i.nmd(t),s=function(){return function(t){var e={};function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==o(t)&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("cursor-teleport",{schema:{cameraHead:{type:"selector",default:""},cameraRig:{type:"selector",default:""},collisionEntities:{type:"string",default:""},ignoreEntities:{type:"string",default:""},landingMaxAngle:{default:45,min:0,max:360},landingNormal:{type:"vec3",default:{x:0,y:1,z:0}},transitionSpeed:{type:"number",default:6e-4}},init:function(){var t=this;this.mobile=AFRAME.utils.device.isMobile();var e=this.el.sceneEl;this.canvas=e.renderer.domElement,this.data.cameraHead.object3D.traverse((function(e){e instanceof THREE.Camera&&(t.cam=e)})),this.camRig=this.data.cameraRig.object3D,this.rayCaster=new THREE.Raycaster,this.referenceNormal=new THREE.Vector3,this.rayCastObjects=[],this.referenceNormal.copy(this.data.landingNormal);var i=new THREE.RingGeometry(.25,.3,32,1);i.rotateX(-Math.PI/2),i.translate(0,.02,0);var a=new THREE.MeshBasicMaterial({color:7818734}),n=new THREE.Mesh(i,a),r=new THREE.CylinderGeometry(.3,.3,.5,32,1,!0);r.translate(0,.25,0);var s=(new THREE.TextureLoader).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAQCAYAAADXnxW3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAADJJREFUeNpEx7ENgDAAAzArK0JA6f8X9oewlcWStU1wBGdwB08wgjeYm79jc2nbYH0DAC/+CORJxO5fAAAAAElFTkSuQmCC"),o=new THREE.MeshBasicMaterial({color:7818734,side:"double",map:s,transparent:!0,depthTest:!1}),l=new THREE.Mesh(r,o),c=new THREE.Group;c.add(n),c.add(l),this.teleportIndicator=c,e.object3D.add(this.teleportIndicator),this.transitioning=!1,this.transitionProgress=0,this.transitionCamPosStart=new THREE.Vector3,this.transitionCamPosEnd=new THREE.Vector3,this.updateRaycastObjects=this.updateRaycastObjects.bind(this),this.getMouseState=this.getMouseState.bind(this),this.getTeleportPosition=this.getTeleportPosition.bind(this),this.isValidNormalsAngle=this.isValidNormalsAngle.bind(this),this.transition=this.transition.bind(this),this.mouseMove=this.mouseMove.bind(this),this.mouseDown=this.mouseDown.bind(this),this.mouseUp=this.mouseUp.bind(this),this.easeInOutQuad=this.easeInOutQuad.bind(this),this.updateRaycastObjects()},remove:function(){this.cam=null,this.canvas=null,this.rayCastObjects.length=0,this.el.sceneEl.object3D.remove(this.teleportIndicator),this.teleportIndicator.children[0].material.dispose(),this.teleportIndicator.children[0].geometry.dispose(),this.teleportIndicator.children[1].material.dispose(),this.teleportIndicator.children[1].geometry.dispose(),this.teleportIndicator=null,this.collisionMesh&&(this.collisionMesh.geometry.dispose(),this.collisionMesh.material.dispose(),this.collisionMesh=null)},play:function(){var t=this.canvas;t.addEventListener("mousedown",this.mouseDown,!1),t.addEventListener("mousemove",this.mouseMove,!1),t.addEventListener("mouseup",this.mouseUp,!1),t.addEventListener("touchstart",this.mouseDown,!1),t.addEventListener("touchmove",this.mouseMove,!1),t.addEventListener("touchend",this.mouseUp,!1)},pause:function(){var t=this.canvas;t.removeEventListener("mousedown",this.mouseDown),t.removeEventListener("mousemove",this.mouseMove),t.removeEventListener("mouseup",this.mouseUp),t.removeEventListener("touchstart",this.mouseDown),t.removeEventListener("touchmove",this.mouseMove),t.removeEventListener("touchend",this.mouseUp)},updateRaycastObjects:function(){var t=this;if(this.rayCastObjects.length=0,""!==this.data.collisionEntities)this.el.sceneEl.querySelectorAll(this.data.collisionEntities).forEach((function(e){e.object3D.traverse((function(e){e.isMesh&&(e.userData.collision=!0,t.rayCastObjects.push(e))}))}));else{if(!this.collisionMesh){var e=new THREE.PlaneGeometry(500,500,1);e.rotateX(-Math.PI/2);var i=new THREE.MeshNormalMaterial,a=new THREE.Mesh(e,i);a.userData.collision=!0,this.collisionMesh=a}this.rayCastObjects.push(this.collisionMesh)}""!==this.data.ignoreEntities&&this.el.sceneEl.querySelectorAll(this.data.ignoreEntities).forEach((function(e){e.object3D.traverse((function(e){e.isMesh&&t.rayCastObjects.push(e)}))}))},getMouseState:function(){var t=new THREE.Vector2;return function(e){var i=this.canvas.getBoundingClientRect();return null!=e.clientX?(t.x=e.clientX-i.left,t.y=e.clientY-i.top,t):null!=e.touches[0]?(t.x=e.touches[0].clientX-i.left,t.y=e.touches[0].clientY-i.top,t):void 0}}(),getTeleportPosition:function(){var t=new THREE.Vector2;return function(e,i){if(0!==this.rayCastObjects.length){if(this.cam&&this.canvas){var a=this.cam,n=this.canvas.getBoundingClientRect();t.x=e/(n.right-n.left)*2-1,t.y=-i/(n.bottom-n.top)*2+1,this.rayCaster.setFromCamera(t,a);var r=this.rayCaster.intersectObjects(this.rayCastObjects);return!(0===r.length||!this.isValidNormalsAngle(r[0].face.normal))&&!0===r[0].object.userData.collision&&r[0].point}return!1}return!1}}(),isValidNormalsAngle:function(t){var e=this.referenceNormal.angleTo(t);return THREE.MathUtils.RAD2DEG*e<=this.data.landingMaxAngle},transition:function(t){this.transitionProgress=0,this.transitionCamPosEnd.copy(t),this.transitionCamPosStart.copy(this.camRig.position),this.transitioning=!0},mouseMove:function(t){var e=this.getMouseState(t);this.mouseX=e.x,this.mouseY=e.y},mouseDown:function(t){this.updateRaycastObjects();var e=this.getMouseState(t);this.mouseX=e.x,this.mouseY=e.y,this.mouseXOrig=e.x,this.mouseYOrig=e.y},mouseUp:function(t){if(this.mouseX===this.mouseXOrig&&this.mouseY===this.mouseYOrig){var e=this.getTeleportPosition(this.mouseX,this.mouseY);e&&(this.teleportIndicator.position.copy(e),this.transition(e))}},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},tick:function(t,e){if(!this.transitioning&&!this.mobile){var i=this.getTeleportPosition(this.mouseX,this.mouseY);i&&this.teleportIndicator.position.copy(i)}if(this.transitioning){this.transitionProgress+=e*this.data.transitionSpeed;var a=this.easeInOutQuad(this.transitionProgress),n=a<.5?a:1.5-1*(a+.5);this.teleportIndicator.scale.set(1+n,1,1+n);var r=this.camRig.position;r.x=this.transitionCamPosStart.x+(this.transitionCamPosEnd.x-this.transitionCamPosStart.x)*a,r.y=this.transitionCamPosStart.y+(this.transitionCamPosEnd.y-this.transitionCamPosStart.y)*a,r.z=this.transitionCamPosStart.z+(this.transitionCamPosEnd.z-this.transitionCamPosStart.z)*a,this.transitionProgress>=1&&(this.transitioning=!1,r.copy(this.transitionCamPosEnd))}}})}])},"object"==o(e)&&"object"==o(t)?t.exports=s():(n=[],void 0===(r="function"==typeof(a=s)?a.apply(e,n):a)||(t.exports=r))},475:t=>{var e={once:THREE.LoopOnce,repeat:THREE.LoopRepeat,pingpong:THREE.LoopPingPong};function i(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}t.exports=AFRAME.registerComponent("animation-mixer",{schema:{clip:{default:"*"},duration:{default:0},clampWhenFinished:{default:!1,type:"boolean"},crossFadeDuration:{default:0},loop:{default:"repeat",oneOf:Object.keys(e)},repetitions:{default:1/0,min:0},timeScale:{default:1},startAt:{default:0}},init:function(){var t=this;this.model=null,this.mixer=null,this.activeActions=[];var e=this.el.getObject3D("mesh");e?this.load(e):this.el.addEventListener("model-loaded",(function(e){t.load(e.detail.model)}))},load:function(t){var e=this.el;this.model=t,this.mixer=new THREE.AnimationMixer(t),this.mixer.addEventListener("loop",(function(t){e.emit("animation-loop",{action:t.action,loopDelta:t.loopDelta})})),this.mixer.addEventListener("finished",(function(t){e.emit("animation-finished",{action:t.action,direction:t.direction})})),this.data.clip&&this.update({})},remove:function(){this.mixer&&this.mixer.stopAllAction()},update:function(t){if(t){var i=this.data,a=AFRAME.utils.diff(i,t);if("clip"in a)return this.stopAction(),void(i.clip&&this.playAction());this.activeActions.forEach((function(t){"duration"in a&&i.duration&&t.setDuration(i.duration),"clampWhenFinished"in a&&(t.clampWhenFinished=i.clampWhenFinished),("loop"in a||"repetitions"in a)&&t.setLoop(e[i.loop],i.repetitions),"timeScale"in a&&t.setEffectiveTimeScale(i.timeScale)}))}},stopAction:function(){for(var t=this.data,e=0;e<this.activeActions.length;e++)t.crossFadeDuration?this.activeActions[e].fadeOut(t.crossFadeDuration):this.activeActions[e].stop();this.activeActions.length=0},playAction:function(){if(this.mixer){var t=this.model,a=this.data,n=t.animations||(t.geometry||{}).animations||[];if(n.length)for(var r,s,o=(r=a.clip,new RegExp("^"+r.split(/\*+/).map(i).join(".*")+"$")),l=0;s=n[l];l++)if(s.name.match(o)){var c=this.mixer.clipAction(s,t);c.enabled=!0,c.clampWhenFinished=a.clampWhenFinished,a.duration&&c.setDuration(a.duration),1!==a.timeScale&&c.setEffectiveTimeScale(a.timeScale),c.startAt(this.mixer.time-a.startAt/1e3),c.setLoop(e[a.loop],a.repetitions).fadeIn(a.crossFadeDuration).play(),this.activeActions.push(c)}}},tick:function(t,e){this.mixer&&!isNaN(e)&&this.mixer.update(e/1e3)}})},502:(t,e)=>{"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}Object.defineProperty(e,"__esModule",{value:!0});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var a,n=function(){return n=Object.assign||function(t){for(var e,i=1,a=arguments.length;i<a;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},n.apply(this,arguments)},r=function(){function t(t){this.options=t,this.listeners={}}return t.prototype.on=function(t,e){var i=this.listeners[t]||[];this.listeners[t]=i.concat([e])},t.prototype.triggerEvent=function(t,e){var i=this;(this.listeners[t]||[]).forEach((function(t){return t({target:i,event:e})}))},t}();(a=e.NotyfArrayEvent||(e.NotyfArrayEvent={}))[a.Add=0]="Add",a[a.Remove=1]="Remove";var s=function(){function t(){this.notifications=[]}return t.prototype.push=function(t){this.notifications.push(t),this.updateFn(t,e.NotyfArrayEvent.Add,this.notifications)},t.prototype.splice=function(t,i){var a=this.notifications.splice(t,i)[0];return this.updateFn(a,e.NotyfArrayEvent.Remove,this.notifications),a},t.prototype.indexOf=function(t){return this.notifications.indexOf(t)},t.prototype.onUpdate=function(t){this.updateFn=t},t}();!function(t){t.Dismiss="dismiss",t.Click="click"}(e.NotyfEvent||(e.NotyfEvent={}));var o={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!1},l=function(){function t(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var t=document.createDocumentFragment(),e=this._createHTMLElement({tagName:"div",className:"notyf"});t.appendChild(e),document.body.appendChild(t),this.container=e,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}return t.prototype.on=function(t,e){var i;this.events=n(n({},this.events),((i={})[t]=e,i))},t.prototype.update=function(t,i){i===e.NotyfArrayEvent.Add?this.addNotification(t):i===e.NotyfArrayEvent.Remove&&this.removeNotification(t)},t.prototype.removeNotification=function(t){var e,i,a=this,n=this._popRenderedNotification(t);n&&((e=n.node).classList.add("notyf__toast--disappear"),e.addEventListener(this.animationEndEventName,i=function(t){t.target===e&&(e.removeEventListener(a.animationEndEventName,i),a.container.removeChild(e))}))},t.prototype.addNotification=function(t){var e=this._renderNotification(t);this.notifications.push({notification:t,node:e}),this._announce(t.options.message||"Notification")},t.prototype._renderNotification=function(t){var e,i=this._buildNotificationCard(t),a=t.options.className;return a&&(e=i.classList).add.apply(e,a.split(" ")),this.container.appendChild(i),i},t.prototype._popRenderedNotification=function(t){for(var e=-1,i=0;i<this.notifications.length&&e<0;i++)this.notifications[i].notification===t&&(e=i);if(-1!==e)return this.notifications.splice(e,1)[0]},t.prototype.getXPosition=function(t){var e;return(null===(e=null==t?void 0:t.position)||void 0===e?void 0:e.x)||"right"},t.prototype.getYPosition=function(t){var e;return(null===(e=null==t?void 0:t.position)||void 0===e?void 0:e.y)||"bottom"},t.prototype.adjustContainerAlignment=function(t){var e=this.X_POSITION_FLEX_MAP[this.getXPosition(t)],i=this.Y_POSITION_FLEX_MAP[this.getYPosition(t)],a=this.container.style;a.setProperty("justify-content",i),a.setProperty("align-items",e)},t.prototype._buildNotificationCard=function(t){var a=this,n=t.options,r=n.icon;this.adjustContainerAlignment(n);var s=this._createHTMLElement({tagName:"div",className:"notyf__toast"}),o=this._createHTMLElement({tagName:"div",className:"notyf__ripple"}),l=this._createHTMLElement({tagName:"div",className:"notyf__wrapper"}),c=this._createHTMLElement({tagName:"div",className:"notyf__message"});c.innerHTML=n.message||"";var d=n.background||n.backgroundColor;if(r){var u=this._createHTMLElement({tagName:"div",className:"notyf__icon"});if(("string"==typeof r||r instanceof String)&&(u.innerHTML=new String(r).valueOf()),"object"==i(r)){var m=r.tagName,p=void 0===m?"i":m,h=r.className,f=r.text,g=r.color,y=void 0===g?d:g,b=this._createHTMLElement({tagName:p,className:h,text:f});y&&(b.style.color=y),u.appendChild(b)}l.appendChild(u)}if(l.appendChild(c),s.appendChild(l),d&&(n.ripple?(o.style.background=d,s.appendChild(o)):s.style.background=d),n.dismissible){var x=this._createHTMLElement({tagName:"div",className:"notyf__dismiss"}),v=this._createHTMLElement({tagName:"button",className:"notyf__dismiss-btn"});x.appendChild(v),l.appendChild(x),s.classList.add("notyf__toast--dismissible"),v.addEventListener("click",(function(i){var n,r;null===(r=(n=a.events)[e.NotyfEvent.Dismiss])||void 0===r||r.call(n,{target:t,event:i}),i.stopPropagation()}))}s.addEventListener("click",(function(i){var n,r;return null===(r=(n=a.events)[e.NotyfEvent.Click])||void 0===r?void 0:r.call(n,{target:t,event:i})}));var w="top"===this.getYPosition(n)?"upper":"lower";return s.classList.add("notyf__toast--"+w),s},t.prototype._createHTMLElement=function(t){var e=t.tagName,i=t.className,a=t.text,n=document.createElement(e);return i&&(n.className=i),n.textContent=a||null,n},t.prototype._createA11yContainer=function(){var t=this._createHTMLElement({tagName:"div",className:"notyf-announcer"});t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),t.style.border="0",t.style.clip="rect(0 0 0 0)",t.style.height="1px",t.style.margin="-1px",t.style.overflow="hidden",t.style.padding="0",t.style.position="absolute",t.style.width="1px",t.style.outline="0",document.body.appendChild(t),this.a11yContainer=t},t.prototype._announce=function(t){var e=this;this.a11yContainer.textContent="",setTimeout((function(){e.a11yContainer.textContent=t}),100)},t.prototype._getAnimationEndEventName=function(){var t,e=document.createElement("_fake"),i={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"};for(t in i)if(void 0!==e.style[t])return i[t];return"animationend"},t}(),c=function(){function t(t){var i=this;this.dismiss=this._removeNotification,this.notifications=new s,this.view=new l;var a=this.registerTypes(t);this.options=n(n({},o),t),this.options.types=a,this.notifications.onUpdate((function(t,e){return i.view.update(t,e)})),this.view.on(e.NotyfEvent.Dismiss,(function(t){var a=t.target,n=t.event;i._removeNotification(a),a.triggerEvent(e.NotyfEvent.Dismiss,n)})),this.view.on(e.NotyfEvent.Click,(function(t){var i=t.target,a=t.event;return i.triggerEvent(e.NotyfEvent.Click,a)}))}return t.prototype.error=function(t){var e=this.normalizeOptions("error",t);return this.open(e)},t.prototype.success=function(t){var e=this.normalizeOptions("success",t);return this.open(e)},t.prototype.open=function(t){var e=this.options.types.find((function(e){return e.type===t.type}))||{},i=n(n({},e),t);this.assignProps(["ripple","position","dismissible"],i);var a=new r(i);return this._pushNotification(a),a},t.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},t.prototype.assignProps=function(t,e){var i=this;t.forEach((function(t){e[t]=null==e[t]?i.options[t]:e[t]}))},t.prototype._pushNotification=function(t){var e=this;this.notifications.push(t);var i=void 0!==t.options.duration?t.options.duration:this.options.duration;i&&setTimeout((function(){return e._removeNotification(t)}),i)},t.prototype._removeNotification=function(t){var e=this.notifications.indexOf(t);-1!==e&&this.notifications.splice(e,1)},t.prototype.normalizeOptions=function(t,e){var a={type:t};return"string"==typeof e?a.message=e:"object"==i(e)&&(a=n(n({},a),e)),a},t.prototype.registerTypes=function(t){var e=(t&&t.types||[]).slice();return o.types.map((function(t){var i=-1;e.forEach((function(e,a){e.type===t.type&&(i=a)}));var a=-1!==i?e.splice(i,1)[0]:{};return n(n({},t),a)})).concat(e)},t}();e.DEFAULT_OPTIONS=o,e.Notyf=c,e.NotyfArray=s,e.NotyfNotification=r,e.NotyfView=l},199:t=>{t.exports.isSidewalk=function(t){return t.startsWith("sidewalk")||["utilities","scooter-drop-zone","bikeshare","flex-zone-curb","transit-shelter","brt-station"].includes(t)},t.exports.createBuildingsArray=function(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:150,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"narrow";if("narrow"===a||"wide"===a)t=[{id:"SM3D_Bld_Mixed_4fl",width:5.251},{id:"SM3D_Bld_Mixed_Double_5fl",width:10.9041},{id:"SM3D_Bld_Mixed_4fl_2",width:5.309},{id:"SM3D_Bld_Mixed_5fl",width:5.903},{id:"SM3D_Bld_Mixed_Corner_4fl",width:5.644}],e="41431323432402434130303230234102402341";else if("residential"===a)t=[{id:"SM_Bld_House_Preset_03_1800",width:20},{id:"SM_Bld_House_Preset_08_1809",width:20},{id:"SM_Bld_House_Preset_09_1845",width:20}],e="12021201210101212021201012012021201210";else{if("arcade"!==a)return[];t=[{id:"arched-building-01",width:9.191},{id:"arched-building-02",width:11.19},{id:"arched-building-03",width:13.191},{id:"arched-building-04",width:15.191}],e="03120223130210321203123023103201232013"}for(var n=0,r=0,s=[];r<i;){var o=t[parseInt(e[n])],l={tag:"a-entity",mixin:o.id,position:r+o.width/2+" 0 0"};"SM_Bld_House_Preset_08_1809"===l.mixin&&(l.child={tag:"a-plane",class:"driveway",material:"roughness:0.8",position:"-6.25 0.6 -8.75",rotation:"-90 0 0",src:"#asphalt-texture",width:4,height:4.6}),"SM_Bld_House_Preset_09_1845"===l.mixin&&(l.child={tag:"a-plane",class:"driveway",material:"roughness:0.8",position:"-2.5 0.6 -7",rotation:"-90 0 0",src:"#asphalt-texture",width:4,height:8}),o.width+r<=i&&s.push(l),r+=o.width,n++}return s},t.exports.filterBuildingsArrayByMixin=function(t,e){var i=[];return t.forEach((function(t,a){t.mixin===e&&i.push(t)})),i},t.exports.removePropertyFromArray=function(t,e){return t.forEach((function(t,i){delete t[e]})),t},t.exports.createClonedEntitiesArray=function(t){for(var e=t.mixin,i=void 0===e?"":e,a=t.step,n=void 0===a?15:a,r=t.radius,s=void 0===r?60:r,o=t.rotation,l=void 0===o?"0 0 0":o,c=t.positionXYString,d=void 0===c?"0 0":c,u=t.randomY,m=void 0!==u&&u,p=[],h=-1*s;h<=s;h+=n){var f={tag:"a-entity",position:d+" "+h};i&&(f.class=i,f.mixin=i),f.rotation=m?"0 "+Math.floor(361*randomTestable())+" 0":l,p.push(f)}return p},t.exports.getAmbientSoundJSON=function(t){var e={fence:"#suburbs-mp3",grass:"#suburbs-mp3","parking-lot":"#parking-lot-mp3",waterfront:"#waterfront",residential:"#suburbs2-mp3",narrow:"#ambientmp3",wide:"#ambientmp3"},i=[],a=null;return t.forEach((function(t,n){if(!a||a!==e[t]){var r={tag:"a-entity",class:"playme",sound:"src: "+e[t]+"; positional: false; loop: true"};i.push(r),a=e[t]}})),i}},334:t=>{function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],a=!0,n=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);a=!0);}catch(t){n=!0,r=t}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=document.createElement(t.tag);delete t.tag;for(var a=0,n=Object.entries(t);a<n.length;a++){var r=e(n[a],2),s=r[0],o=r[1];if("child"===s){for(var l=document.createElement(o.tag),c=0,d=Object.entries(o);c<d.length;c++){var u=e(d[c],2),m=u[0],p=u[1];l.setAttribute(m,p)}i.appendChild(l)}i.setAttribute(s,o)}return i}t.exports.createElementFromObject=a,t.exports.appendChildElementsFromArray=function(){var t=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(e,i){t.appendChild(a(e))})),t}},394:t=>{t.exports.streetmixUserToAPI=function(t){var e=new URL(t).pathname.split("/"),i=e[1],a=e[2];return"-"===i?"https://streetmix.net/api/v1/streets?namespacedId="+a:"https://streetmix.net/api/v1/streets?namespacedId="+a+"&creatorId="+i},t.exports.pathStartsWithAPI=function(t){var e=document.createElement("a");return e.href=t,"api"===e.pathname.split("/")[1]},t.exports.streetmixAPIToUser=function(t){function e(t,e){for(var i=t.split("&"),a=0;a<i.length;a++){var n=i[a].split("=");if(decodeURIComponent(n[0])===e)return decodeURIComponent(n[1])}console.log("Query variable %s not found",e)}var i=new URL(t).search.substring(1),a=e(i,"namespacedId"),n=e(i,"creatorId");return void 0===n&&(n="-"),"https://streetmix.net/"+n+"/"+a},t.exports.calcStreetWidth=function(t){var e=0;return t.forEach((function(t){var i=t.width;e+=.3048*i})),e}}},e={};function i(a){var n=e[a];if(void 0!==n)return n.exports;var r=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);return(()=>{function t(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],a=!0,n=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);a=!0);}catch(t){n=!0,r=t}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}return i}(t,i)||function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e(t,i)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}console.log("3DStreet Version: ".concat("0.4.4"," (Date: ").concat(new Date("Thu Nov 30 14:18:42 2023 -0800").toISOString().split("T")[0],", Commit Hash: #").concat("3b91c88",")"));var a=i(844),n=i(394);i(51),i(71),i(54),i(475),i(234),i(247),i(391),i(699),i(631),AFRAME.registerComponent("street",{schema:{JSON:{type:"string"},type:{default:"streetmixSegmentsFeet"},left:{default:""},right:{default:""},showGround:{default:!0},showStriping:{default:!0},showVehicles:{default:!0},globalAnimated:{default:!1},length:{default:60}},update:function(t){var e=this.data;if(0!==e.JSON.length){var i=JSON.parse(e.JSON),r=a.processSegments(i.streetmixSegmentsFeet,e.showStriping,e.length,e.globalAnimated,e.showVehicles);if(this.el.append(r),e.left||e.right){var s=n.calcStreetWidth(i.streetmixSegmentsFeet,e.autoStriping),o=a.processBuildings(e.left,e.right,s,e.showGround,e.length);this.el.append(o)}}else{if(void 0!==t.JSON&&0===t.JSON.length)return;console.log("[street]","No JSON provided yet, but it might be set at runtime")}}}),AFRAME.registerComponent("streetmix-loader",{dependencies:["street"],schema:{streetmixStreetURL:{type:"string"},streetmixAPIURL:{type:"string"},showBuildings:{default:!0},name:{default:""}},update:function(t){var e=this.data,i=this.el;if(t.streetmixStreetURL!==e.streetmixStreetURL||t.streetmixAPIURL!==e.streetmixAPIURL)if(0!==e.streetmixAPIURL.length){var a=new XMLHttpRequest;console.log("[streetmix-loader]","GET "+e.streetmixAPIURL),a.open("GET",e.streetmixAPIURL,!0),a.onload=function(){if(this.status>=200&&this.status<400){var t,a=JSON.parse(this.response),n=a.data.street.segments,r=a.name;console.log("streetmixName",r),i.setAttribute("streetmix-loader","name",r),AFRAME.scenes[0]&&AFRAME.scenes[0].getAttribute("metadata")&&(t=AFRAME.scenes[0].getAttribute("metadata").sceneTitle),t||(AFRAME.scenes[0].setAttribute("metadata","sceneTitle",r),console.log("therefore setting metadata sceneTitle as streetmixName",r)),i.setAttribute("data-layer-name","Streetmix: "+r),e.showBuildings&&(i.setAttribute("street","right",a.data.street.rightBuildingVariant),i.setAttribute("street","left",a.data.street.leftBuildingVariant)),i.setAttribute("street","type","streetmixSegmentsFeet"),i.setAttribute("street","JSON",JSON.stringify({streetmixSegmentsFeet:n})),i.emit("streetmix-loader-street-loaded")}else console.log("[streetmix-loader]","Loading Error: We reached the target server, but it returned an error")},a.onerror=function(){console.log("[streetmix-loader]","Loading Error: There was a connection error of some sort")},a.send()}else{if(e.streetmixStreetURL.length>0){var r=n.streetmixUserToAPI(e.streetmixStreetURL);return console.log("[streetmix-loader]","setting `streetmixAPIURL` to",r),void i.setAttribute("streetmix-loader","streetmixAPIURL",r)}console.log("[streetmix-loader]","Neither `streetmixAPIURL` nor `streetmixStreetURL` properties provided, please provide at least one.")}}}),AFRAME.registerComponent("intersection",{schema:{dimensions:{type:"string",default:"20 20"},sidewalk:{type:"string",default:"0 0 0 0"},northeastcurb:{type:"string",default:"0 0"},southwestcurb:{type:"string",default:"0 0"},southeastcurb:{type:"string",default:"0 0"},northwestcurb:{type:"string",default:"0 0"},stopsign:{type:"string",default:"0 0 0 0"},trafficsignal:{type:"string",default:"0 0 0 0"},crosswalk:{type:"string",default:"0 0 0 0"}},init:function(){for(var e=this.data,i=this.el;i.firstChild;)i.removeChild(i.lastChild);var a=e.dimensions.split(" ").map((function(t){return Number(t)})),n=[this.el.getAttribute("position").x,this.el.getAttribute("position").y,this.el.getAttribute("position").z],r=e.sidewalk.split(" ").map((function(t){return Number(t)})),s=e.northeastcurb.split(" ").map((function(t){return Number(t)})),o=e.southwestcurb.split(" ").map((function(t){return Number(t)})),l=e.southeastcurb.split(" ").map((function(t){return Number(t)})),c=e.northwestcurb.split(" ").map((function(t){return Number(t)})),d=e.stopsign.split(" ").map((function(t){return Number(t)})),u=e.trafficsignal.split(" ").map((function(t){return Number(t)})),m=e.crosswalk.split(" ").map((function(t){return Number(t)})),p=a[0],h=a[1];function f(t){var e=t.length,a=t.width,n=t.positionVec,r=t.scaleVec,s=void 0===r?{x:1,y:1,z:1}:r,o=t.rotationVec,l=document.createElement("a-entity"),c=[];c[0]=a/2,c[1]=parseInt(e/2),l.setAttribute("geometry","primitive","box"),l.setAttribute("geometry","height: 0.4"),l.setAttribute("position",n),l.setAttribute("scale",s),l.setAttribute("geometry","depth",e),l.setAttribute("geometry","width",a),l.setAttribute("rotation",o),l.setAttribute("mixin","sidewalk"),l.setAttribute("material","repeat: ".concat(c[0]," ").concat(c[1])),i.appendChild(l)}this.el.setAttribute("geometry","primitive:box; width: ".concat(p,"; height: ").concat(h,"; depth:0.2")),this.el.setAttribute("position",{x:n[0],y:-.1,z:n[2]}),this.el.setAttribute("rotation","-90 0 0"),this.el.setAttribute("material","src: #asphalt-texture; repeat:5 5; roughness:1");var g={west:{positionVec:{x:p/2-r[0]/2,z:.1},rotationVec:{x:90,y:0,z:0},length:h,width:r[0]},east:{positionVec:{x:-p/2+r[1]/2,z:.1},rotationVec:{x:90,y:0,z:0},length:h,width:r[1]},north:{positionVec:{y:-h/2+r[2]/2,x:r[1]/2-r[0]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:p-r[1]-r[0],width:r[2]},south:{positionVec:{y:h/2-r[3]/2,x:r[1]/2-r[0]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:p-r[1]-r[0],width:r[3]}};Object.keys(g).filter((function(t,e){return r[e]})).forEach((function(t,e){f(g[t])}));for(var y={northeast:{positionVec:{x:p/2-s[0]/2,y:h/2-s[1]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:s[0],width:s[1]},southwest:{positionVec:{x:-p/2+o[0]/2,y:-h/2+o[1]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:o[0],width:o[1]},southeast:{positionVec:{x:p/2-l[0]/2,y:-h/2+l[1]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:l[0],width:l[1]},northwest:{positionVec:{x:-p/2+c[0]/2,y:h/2-c[1]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:c[0],width:c[1]}},b=0,x=Object.entries(y);b<x.length;b++){var v=t(x[b],2),w=v[0],A=v[1];"0 0"!==e["".concat(w,"curb")]&&f(A)}if(d[0]){var E=document.createElement("a-entity");E.setAttribute("position",{x:p/2,y:h/3,z:.1}),E.setAttribute("rotation",{x:0,y:90,z:90}),E.setAttribute("mixin","stop_sign"),i.appendChild(E)}if(d[1]){var _=document.createElement("a-entity");_.setAttribute("position",{x:-p/2,y:-h/3,z:.1}),_.setAttribute("rotation",{x:0,y:-90,z:-90}),_.setAttribute("mixin","stop_sign"),i.appendChild(_)}if(d[2]){var C=document.createElement("a-entity");C.setAttribute("position",{x:-p/3,y:h/2,z:.1}),C.setAttribute("rotation",{x:-90,y:90,z:90}),C.setAttribute("mixin","stop_sign"),i.appendChild(C)}if(d[3]){var k=document.createElement("a-entity");k.setAttribute("position",{x:p/3,y:-h/2,z:.1}),k.setAttribute("rotation",{x:90,y:-90,z:-90}),k.setAttribute("mixin","stop_sign"),i.appendChild(k)}if(u[0]){var S=document.createElement("a-entity");S.setAttribute("position",{x:p/2,y:h/3,z:.3}),S.setAttribute("rotation",{x:210,y:90,z:90}),S.setAttribute("mixin","signal_left"),i.appendChild(S);var M=document.createElement("a-entity");M.setAttribute("position",{x:p/2,y:-h/3,z:.3}),M.setAttribute("rotation",{x:180,y:90,z:90}),M.setAttribute("mixin","signal_right"),i.appendChild(M)}if(u[1]){var R=document.createElement("a-entity");R.setAttribute("position",{x:-p/2,y:-h/3,z:.3}),R.setAttribute("rotation",{x:30,y:90,z:90}),R.setAttribute("mixin","signal_left"),i.appendChild(R);var N=document.createElement("a-entity");N.setAttribute("position",{x:-p/2,y:h/3,z:.3}),N.setAttribute("rotation",{x:0,y:90,z:90}),N.setAttribute("mixin","signal_right"),i.appendChild(N)}if(u[2]){var j=document.createElement("a-entity");j.setAttribute("position",{x:-p/3,y:h/2,z:.1}),j.setAttribute("rotation",{x:120,y:90,z:90}),j.setAttribute("mixin","signal_left"),i.appendChild(j);var T=document.createElement("a-entity");T.setAttribute("position",{x:p/3,y:h/2,z:.1}),T.setAttribute("rotation",{x:90,y:90,z:90}),T.setAttribute("mixin","signal_right"),i.appendChild(T)}if(u[3]){var O=document.createElement("a-entity");O.setAttribute("position",{x:p/3,y:-h/2,z:.1}),O.setAttribute("rotation",{x:-60,y:90,z:90}),O.setAttribute("mixin","signal_left"),i.appendChild(O);var L=document.createElement("a-entity");L.setAttribute("position",{x:-p/3,y:-h/2,z:.1}),L.setAttribute("rotation",{x:-90,y:90,z:90}),L.setAttribute("mixin","signal_right"),i.appendChild(L)}if(m[0]){var I=document.createElement("a-entity");I.setAttribute("position",{x:p/2-2,z:.11}),I.setAttribute("rotation",{x:0,y:0,z:180}),I.setAttribute("scale",{y:h/12}),I.setAttribute("mixin","markings crosswalk-zebra"),i.appendChild(I)}if(m[1]){var P=document.createElement("a-entity");P.setAttribute("position",{x:-p/2+2,z:.11}),P.setAttribute("rotation",{x:0,y:0,z:180}),P.setAttribute("scale",{y:h/12}),P.setAttribute("mixin","markings crosswalk-zebra"),i.appendChild(P)}if(m[2]){var F=document.createElement("a-entity");F.setAttribute("position",{y:-h/2+2,z:.11}),F.setAttribute("rotation",{x:0,y:0,z:90}),F.setAttribute("scale",{y:p/12}),F.setAttribute("mixin","markings crosswalk-zebra"),i.appendChild(F)}if(m[3]){var z=document.createElement("a-entity");z.setAttribute("position",{y:h/2-2,z:.11}),z.setAttribute("rotation",{x:0,y:0,z:90}),z.setAttribute("scale",{y:p/12}),z.setAttribute("mixin","markings crosswalk-zebra"),i.appendChild(z)}}}),AFRAME.registerComponent("street-environment",{schema:{preset:{type:"string",default:"day",oneOf:["day","night","color","sunny-morning","cloudy-afternoon","sunny-afternoon","sunny-noon","foggy","cloudy"]},backgroundColor:{type:"color",default:"#FFF"}},setEnvOption:function(){var t=this.sky,e=this.light1,i=this.light2,a="//assets.3dstreet.app/";"night"===this.data.preset?(e.setAttribute("light","intensity",.5),i.setAttribute("light","intensity",.15),t.setAttribute("visible",!0),t.setAttribute("color","#444"),t.setAttribute("src","#sky-night"),t.setAttribute("rotation","0 0 0")):"day"===this.data.preset?(e.setAttribute("light","intensity",.8),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","#sky"),t.setAttribute("rotation","0 20 0"),i.setAttribute("light","intensity: 2.2; castShadow: true; shadowCameraBottom: -20; shadowCameraLeft: -30; shadowCameraRight: 40; shadowCameraTop: 30; shadowMapHeight: 2048; shadowMapWidth: 2048"),i.setAttribute("position","-40 56 -16")):"sunny-morning"===this.data.preset?(e.setAttribute("light","intensity",.8),i.setAttribute("light","intensity: 2.2; castShadow: true; shadowCameraBottom: -20; shadowCameraLeft: -30; shadowCameraRight: 40; shadowCameraTop: 30; shadowMapHeight: 2048; shadowMapWidth: 2048"),i.setAttribute("position","-60 56 -16"),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(a,"images/skies/2048-polyhaven-qwantani_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):"cloudy-afternoon"===this.data.preset?(e.setAttribute("light","intensity",2),i.setAttribute("light","intensity",.6),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(a,"images/skies/2048-mud_road_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):"sunny-afternoon"===this.data.preset?(e.setAttribute("light","intensity",2),i.setAttribute("light","intensity: 2.2; castShadow: true; shadowCameraBottom: -20; shadowCameraLeft: -30; shadowCameraRight: 40; shadowCameraTop: 30; shadowMapHeight: 2048; shadowMapWidth: 2048"),i.setAttribute("position","60 56 -16"),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(a,"images/skies/2048-kloofendal_43d_clear_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):"sunny-noon"===this.data.preset?(e.setAttribute("light","intensity",2),i.setAttribute("light","intensity: 2.2; castShadow: true; shadowCameraBottom: -20; shadowCameraLeft: -30; shadowCameraRight: 40; shadowCameraTop: 30; shadowMapHeight: 2048; shadowMapWidth: 2048"),i.setAttribute("position","5 56 -16"),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(a,"images/skies/2048-kloppenheim_05_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):"foggy"===this.data.preset?(e.setAttribute("light","intensity",2),i.setAttribute("light","intensity: 0.6; castShadow: false;"),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(a,"images/skies/2048-kloofendal_misty_morning_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):"cloudy"===this.data.preset?(e.setAttribute("light","intensity",2),i.setAttribute("light","intensity",.6),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(a,"images/skies/2048-kloofendal_48d_partly_cloudy_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):(t.setAttribute("visible",!1),this.scene.setAttribute("background","color",this.data.backgroundColor))},init:function(){var t=this.el;this.scene=document.querySelector("a-scene"),this.light1=document.createElement("a-entity");var e=this.light1;e.setAttribute("id","env-light1"),e.setAttribute("light",{type:"ambient",color:"#FFF"}),t.appendChild(e),this.light2=document.createElement("a-entity");var i=this.light2;i.setAttribute("id","env-light2"),i.setAttribute("position","-60 56 -16"),i.setAttribute("light","intensity: 2.2; castShadow: true; shadowCameraBottom: -20; shadowCameraLeft: -30; shadowCameraRight: 40; shadowCameraTop: 30; shadowMapHeight: 2048; shadowMapWidth: 2048"),t.appendChild(i),this.sky=document.createElement("a-sky");var a=this.sky;a.setAttribute("id","env-sky"),a.setAttribute("data-ignore-raycaster",""),t.appendChild(a)},update:function(t){this.setEnvOption()}}),AFRAME.registerComponent("wheel",{schema:{speed:{type:"number",default:1},wheelDiameter:{type:"number",default:1}},init:function(){var t=this.el,e=this;t.addEventListener("model-loaded",(function(i){var a=t.getObject3D("mesh");a&&(e.wheel_F_L=a.getObjectByName("wheel_F_L"),e.wheel_F_R=a.getObjectByName("wheel_F_R"),e.wheel_B_L=a.getObjectByName("wheel_B_L"),e.wheel_B_R=a.getObjectByName("wheel_B_R"),e.wheel_B_L_2=a.getObjectByName("wheel_B_L_2"),e.wheel_B_R_2=a.getObjectByName("wheel_B_R_2"))}))},tick:function(t,e){var i=this.data.speed/1e3/this.data.wheelDiameter*2*e;this.wheel_F_L&&this.wheel_F_L.rotateY(i),this.wheel_F_R&&this.wheel_F_R.rotateY(i),this.wheel_B_L&&this.wheel_B_L.rotateY(i),this.wheel_B_L_2&&this.wheel_B_L_2.rotateY(i),this.wheel_B_R_2&&this.wheel_B_R_2.rotateY(i),this.wheel_B_R&&this.wheel_B_R.rotateY(i)}})})(),{}})()));