/*! For license information please see aframe-street-component.js.LICENSE.txt */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var i in r)("object"==typeof exports?exports:t)[i]=r[i]}}(self,(()=>(()=>{var t={68:t=>{var e=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2,new THREE.Vector2];function r(t,r,i,n){const a=1/n,o=1/i;return e[0].set(a*r,o*t+o),e[1].set(a*r,o*t),e[2].set(a*r+a,o*t),e[3].set(a*r+a,o*t+o),e}AFRAME.registerComponent("atlas-uvs",{dependencies:["geometry"],schema:{totalColumns:{type:"int",default:1},totalRows:{type:"int",default:1},column:{type:"int",default:1},row:{type:"int",default:1}},update:function(){const t=this.data,e=r(t.row-1,t.column-1,t.totalRows,t.totalColumns),i=this.el.getObject3D("mesh").geometry;var n=new Float32Array([e[0].x,e[0].y,e[3].x,e[3].y,e[1].x,e[1].y,e[2].x,e[2].y]);i.setAttribute("uv",new THREE.BufferAttribute(n,2)),i.uvsNeedUpdate=!0}}),AFRAME.registerComponent("dynamic-texture-atlas",{schema:{canvasId:{default:"dynamicAtlas"},canvasHeight:{default:1024},canvasWidth:{default:1024},debug:{default:!1},numColumns:{default:8},numRows:{default:8}},multiple:!0,init:function(){const t=this.canvas=document.createElement("canvas");t.id=this.data.canvasId,t.height=this.data.canvasHeight,t.width=this.data.canvasWidth,this.ctx=t.getContext("2d"),document.body.appendChild(t),this.data.debug&&(t.style.left=0,t.style.top=0,t.style.position="fixed",t.style.zIndex=9999999999)},drawTexture:function(t,e,i,n,a){const o=this.canvas,s=this.data;t.complete||(t.onload=()=>{this.drawTexture(t,e,i)});const l=a||o.height/s.numRows,c=n||o.width/s.numColumns;return this.ctx.drawImage(t,c*e,c*i,c,l),r(e,i,s.numRows,s.numColumns)}}),t.exports.getGridUvs=r},3786:(t,e,r)=>{function i(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var a=r(5384),o=r(4594).segmentVariants;function s(t){for(var e=t.objectMixinId,r=void 0===e?"":e,i=t.parentEl,n=void 0===i?null:i,a=t.step,o=void 0===a?15:a,s=t.radius,l=void 0===s?60:s,c=t.rotation,u=void 0===c?"0 0 0":c,d=t.positionXYString,p=void 0===d?"0 0":d,m=t.length,h=void 0===m?void 0:m,f=t.randomY,g=void 0!==f&&f,y=-1*l;y<=l;y+=o){var b=document.createElement("a-entity");b.setAttribute("mixin",r),b.setAttribute("class",r),b.setAttribute("position",p+" "+y),h&&b.addEventListener("loaded",(function(t){t.target.setAttribute("geometry","height",h),t.target.setAttribute("atlas-uvs","c",1)})),g?b.setAttribute("rotation","0 "+Math.floor(361*Math.random())+" 0"):b.setAttribute("rotation",u),n.append(b)}}function l(t){var e=document.createElement("a-entity");return e.setAttribute("class","stencils-parent"),e.setAttribute("position",t),e}function c(t,e){var r=document.createElement("a-entity"),i={primitive:"box",depth:t,width:.1,height:.2};return r.setAttribute("geometry",i),r.setAttribute("material",{color:"#8f8f8f",metalness:1,emissive:"#828282",emissiveIntensity:.5,roughness:.1}),r.setAttribute("class","rails"),r.setAttribute("shadow","receive:true; cast: true"),r.setAttribute("position",e+" 0.2 0"),r}function u(t,e){var r=document.createElement("a-entity");r.setAttribute("class","track-parent"),r.setAttribute("position","0 -0.2 0");var i={tram:.7175,trolley:.5335}[e];return r.append(c(t,i)),r.append(c(t,-i)),r}function d(t){var e=document.createElement("a-entity");return e.setAttribute("class",t),e}function p(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2.25,i=d("dividers-".concat(t,"-parent"));return s({objectMixinId:"dividers-".concat(t),parentEl:i,step:r,radius:e}),i}function m(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2.25,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0 0 0",n=d("".concat(t,"-parent"));return s({objectMixinId:t,parentEl:n,step:r,radius:e,rotation:i}),n}function h(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)}function f(t,e){return Math.random()*(e-t)+t}function g(t,e,r){var i=Math.floor((e-t)/r)+1;return Array(i).fill().map((function(e,i){return t+i*r})).sort((function(){return.5-Math.random()}))}function y(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"random",a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=[-.37*t,.37*t],s=g(-.5*i,.5*i,1.5),l=parseInt({empty:0,sparse:.03,normal:.125,dense:.25}[e]*i,10),c=d("pedestrians-parent");c.setAttribute("position",{y:r});for(var u=0;u<l;u++){var p=!0===a?"a_char"+String(h(1,8)):"char"+String(h(1,16)),m=f(o[0],o[1]),y=s.pop(),b=document.createElement("a-entity"),v="inbound";b.setAttribute("position",{x:m,y:0,z:y}),b.setAttribute("mixin",p),Math.random()<.5&&"random"===n&&(b.setAttribute("rotation","0 180 0"),v="outbound"),a&&A(b,1.4,i,m,0,y,v),c.append(b)}return c}function b(t){return"colored"===t|"red"===t?"surface-red bus-lane":"blue"===t?"surface-blue bus-lane":"grass"===t?"surface-green bus-lane":"bus-lane"}function v(t,e,r){var i,n,a,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,l=t.object3D,c={start:-.5*(a=r)+.5*(o=s||(i=l,n=(new THREE.Box3).setFromObject(i),{x:n.max.x-n.min.x,y:n.max.y-n.min.y,z:n.max.z-n.min.z})[e]),end:.5*a-.5*o},u=c.start,d=c.end,p="set".concat(e.toUpperCase()),m=f(u,d);return l.position[p](m),m}function x(t,e,r,i){if(i){var n="inbound"===t[0]?0:180,a=document.createElement("a-entity");a.setAttribute("rotation","0 "+n+" 0"),a.setAttribute("mixin",e),a.setAttribute("class",e);var o=v(a,"z",r,23);return a.setAttribute("position","0 0 "+o),a}}function w(t,e,r){if(r){var i="inbound"===t[0]?0:180,n=document.createElement("a-entity"),a=document.createElement("a-entity");a.setAttribute("rotation","0 "+i+" 0"),a.setAttribute("mixin","bus");var o=v(a,"z",e,12);return a.setAttribute("position","0 0 "+o),n.append(a),n}}function A(t,e,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0,o=r/e*1e3,s="outbound"===(arguments.length>6?arguments[6]:void 0)?-r/2:r/2,l=Math.abs(s-a)/e*1e3,c={property:"position",easing:"linear",loop:"false",from:{x:i,y:n,z:a},to:{z:s},dur:l},u={property:"position",easing:"linear",loop:"true",from:{x:i,y:n,z:-s},to:{x:i,y:n,z:s},delay:l,dur:o};return t.setAttribute("animation__1",c),t.setAttribute("animation__2",u),t}function E(t,e,r){var n,a,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;if(!(arguments.length>4&&void 0!==arguments[4])||arguments[4]){var c=0,u=(a=3,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,n,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=a.call(r)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){c=!0,n=t}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw n}}return s}}(n,a)||i(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],p=u[1],m=u[2];2===t.length&&(m=p,p=d);var h,f={inbound:0,outbound:180,sideways:{left:-90,right:90},"angled-front-left":-60,"angled-front-right":60,"angled-rear-left":-120,"angled-rear-right":120};if(h="sideways"===d?f.sideways[p]:f[d],"pedestrian"===m)return y(e,"normal",0,r,p,o);var b=document.createElement("a-entity");if(1===t.length)return b;var x={car:{mixin:"sedan-rig",wheelDiameter:.76,length:5.17,width:2},microvan:{mixin:"suv-rig",wheelDiameter:.84,length:5,width:2},truck:{mixin:"box-truck-rig",wheelDiameter:1.05,length:6.95,width:2.5},av:{mixin:"self-driving-cruise-car-rig",wheelDiameter:.76,length:5.17,width:2}};if(x[m]||(m="car"),s>1){var w=r/2,E=l/2+l,S=g(-w+E,w-E,l).slice(0,s),k="sideways"===d||d.includes("angled")?"width":"length",T=x[m][k];S.forEach((function(t){var e=l-T-.2,r=-e/2+e*Math.random();e>0&&M(t+r,m)}))}else M(void 0,m);return b}function M(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=x[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"car"],i=document.createElement("a-entity");return t||(t=v(i,"z",r,e.length)),i.setAttribute("position","0 0 ".concat(t)),i.setAttribute("mixin",e.mixin),i.setAttribute("rotation","0 ".concat(h," 0")),o&&(c=5,i.setAttribute("wheel",{speed:c,wheelDiameter:e.wheelDiameter}),A(i,c,r,0,0,t,p)),b.append(i),i}}function S(t,e){var r=document.createElement("a-entity"),i=document.createElement("a-entity"),n="left"===t[0]?0:180;i.setAttribute("rotation","0 "+n+" 0"),i.setAttribute("mixin","food-trailer-rig");var a=v(i,"z",e,7);return i.setAttribute("positon","0 0 "+a),r.append(i),r}function k(t){if(t){var e=document.createElement("a-entity"),r=document.createElement("a-entity");r.setAttribute("position","0 1.75 0"),r.setAttribute("rotation","0 0 0"),r.setAttribute("mixin","magic-carpet"),e.append(r);var i=document.createElement("a-entity");return i.setAttribute("position","0 1.75 0"),i.setAttribute("rotation","0 0 0"),i.setAttribute("mixin","Character_1_M"),e.append(i),e}}function T(t,e,r){var i=e/2+e;return g(-t/2+i/2,t/2-i/2,i).slice(0,r)}function M(t,e){var r=document.createElement("a-entity");return T(t,2.27,5).forEach((function(t){var i=document.createElement("a-entity");i.setAttribute("mixin","outdoor_dining"),i.setAttribute("position",{y:e,z:t}),r.append(i)})),r}function _(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,n=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(arguments.length>4?arguments[4]:void 0){var a=document.createElement("a-entity"),o=h(2,5),s=["cyclist-cargo","cyclist1","cyclist2","cyclist3","cyclist-dutch","cyclist-kid"],l=s.length,c="Bicycle_1";return T(i,2.03,o).forEach((function(o){var u=document.createElement("a-entity"),d="inbound"===t[0]?0:180;u.setAttribute("rotation","0 "+d+" 0"),u.setAttribute("position",{y:r,z:o}),n&&(u.setAttribute("animation-mixer",""),A(u,5,i,0,r,o,t[0])),c="bike-lane"===e?s[h(0,l)]:"ElectricScooter_1",u.setAttribute("mixin",c),a.append(u)})),a}}function C(t,e){if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){var r=document.createElement("a-entity");return T(e,5,h(2,4)).forEach((function(e){var i=document.createElement("a-entity"),n="inbound"===t[1]?0:180;i.setAttribute("rotation","0 "+n+" 0"),"taxi"===t[0]?i.setAttribute("mixin","sedan-taxi-rig"):"rideshare"===t[0]&&i.setAttribute("mixin","sedan-rig"),i.setAttribute("position",{z:e}),r.append(i)})),r}}function R(){var t=document.createElement("a-entity");return t.setAttribute("class","bench-parent"),t.setAttribute("position","0 0.2 3.5"),t}function O(t){var e=document.createElement("a-entity");return e.setAttribute("class","bikerack-parent"),e.setAttribute("position",{y:t,z:-3.5}),e}function N(t,e){var r=document.createElement("a-entity");r.setAttribute("class","bikeshare"),r.setAttribute("mixin","bikeshare");var i="left"===t[0]?90:270;return r.setAttribute("rotation","0 "+i+" 0"),r.setAttribute("position",{y:e}),r}function P(t,e){var r=document.createElement("a-entity");return T(t,4.03,3).forEach((function(t){var i=document.createElement("a-entity");i.setAttribute("class","parklet"),i.setAttribute("position",{x:0,y:.02,z:t}),i.setAttribute("mixin","parklet");var n="left"===e[0]?90:270;i.setAttribute("rotation",{y:n}),r.append(i)})),r}function j(){var t=document.createElement("a-entity");return t.setAttribute("class","tree-parent"),t.setAttribute("position","0 0.2 7"),t}function I(){var t=document.createElement("a-entity");return t.setAttribute("class","lamp-parent"),t.setAttribute("position","0 0.2 0"),t}function L(t,e){var r=document.createElement("a-entity");return r.setAttribute("class","bus-stop"),r.setAttribute("rotation","0 "+t+" 0"),r.setAttribute("mixin","bus-stop"),r.setAttribute("position",{y:e}),r}function B(){var t=document.createElement("a-entity");return t.setAttribute("class","brt-station"),t.setAttribute("mixin","brt-station"),t}function F(t,e,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=document.createElement("a-entity"),s=[.2,.4,.6][a];return 0===a?e=-.1:2===a&&(e=.1),o.setAttribute("geometry","primitive: box; \n    height: ".concat(s,"; \n    depth: ").concat(i,";\n    width: ").concat(t,";")),o.setAttribute("position",{y:e}),o.setAttribute("mixin",r),0!==n.length&&o.setAttribute("material","repeat: ".concat(n[0]," ").concat(n[1])),o}function D(t,e,r,i,n){var a=document.createElement("a-entity"),o="1 "+i/150+" 1";return a.setAttribute("rotation","270 "+e+" 0"),a.setAttribute("scale",o),a.setAttribute("position","0 "+t+" 0"),a.setAttribute("mixin",r),0!==n.length&&a.setAttribute("material","repeat: ".concat(n[0]," ").concat(n[1])),a}function z(t,e){if("separator"!==t){var r=o[t];r?r.includes(e)||(STREET.notify.warningMessage("The '".concat(e,"' variant of segment '").concat(t,"' is not yet supported in 3DStreet")),console.log("The '".concat(e,"' variant of segment '").concat(t,"' is not yet supported in 3DStreet"))):(STREET.notify.warningMessage("The '".concat(t,"' segment type is not yet supported in 3DStreet")),console.log("The '".concat(t,"' segment type is not yet supported in 3DStreet")))}}t.exports.processSegments=function(t,e,r,o,c){var d=r/2;r>12&&(d=(r-12)/2),e&&(t=function(t){function e(t){return"lane"===t.slice(t.length-4)||"light-rail"===t||"streetcar"===t||"flex-zone"===t}return t.reduce((function(t,r,i,n){if(0===i)return t.concat(r);var a=n[i-1];if(e(r.type)&&e(a.type)){var o="solid";r.type===a.type&&(o="dashed"),("drive-lane"===r.type&&"turn-lane"===a.type||"drive-lane"===a.type&&"turn-lane"===r.type)&&(o="dashed"),r.variantString.split("|")[0]!==a.variantString.split("|")[0]&&(o="doubleyellow","bike-lane"===r.type&&"bike-lane"===a.type&&(o="shortdashedyellow"),"flex-zone"!==r.type&&"flex-zone"!==a.type||(o="solid")),"turn-lane"===r.type&&"shared"===r.variantString.split("|")[1]?o="soliddashedyellow":"turn-lane"===a.type&&"shared"===a.variantString.split("|")[1]&&(o="soliddashedyellowinverted"),"parking-lane"!==r.type&&"parking-lane"!==a.type||(o="invisible"),t.push({type:"separator",variantString:o,width:0,elevation:r.elevation})}return(e(r.type)&&"divider"===a.type||e(a.type)&&"divider"===r.type)&&t.push({type:"separator",variantString:"solid",width:0,elevation:r.elevation}),t.push(r),t}),[])}(t));var f,g=function(t){var e=document.createElement("a-entity"),r=0-t.reduce((function(t,e){return t+e.width}),0)/2;return e.setAttribute("position",r+" 0 0"),e}(t);g.classList.add("street-parent"),g.setAttribute("data-layer-name","Street Segments Container");for(var v,A,T,H,V=0,G=0;G<t.length;G++){var U=document.createElement("a-entity");U.classList.add("segment-parent-"+G);var Y=t[G].width,q=(V+=Y)-.5*Y,W=0,J=t[G].variantString?t[G].variantString.split("|"):"";z(t[G].type,t[G].variantString);var X=t[G].elevation,Q=[0,.2,.4][X];U.setAttribute("data-elevation-posY",Q);var Z="inbound"===J[0]||"inbound"===J[1]?180:0,K="outbound"===J[0]||"outbound"===J[1]?1:-1,$=t[G].type,tt=[];if("drive-lane"===t[G].type&&"sharrow"===J[1]){var et=l({y:Q+.015});s({objectMixinId:"stencils sharrow",parentEl:et,rotation:"-90 "+Z+" 0",step:10,radius:d}),U.append(et)}else if("bike-lane"===t[G].type||"scooter"===t[G].type){var rt=l({y:Q+.015});$="red"===(H=J[1])?"surface-red bike-lane":"blue"===H?"surface-blue bike-lane":"green"===H?"surface-green bike-lane":"bike-lane",s({objectMixinId:"stencils bike-arrow",parentEl:rt,rotation:"-90 "+Z+" 0",step:20,radius:d}),U.append(rt),U.append(_(J,t[G].type,Q,r,c,o))}else if("light-rail"===t[G].type||"streetcar"===t[G].type){$=b(J[1]);var it="streetcar"===t[G].type?"trolley":"tram";U.append(x(J,it,r,c));var nt=u(r,it);U.append(nt)}else if("turn-lane"===t[G].type){$="drive-lane";var at=J[1];"inbound"===J[0]&&(at=at.replace(/left|right/g,(function(t){return"left"===t?"right":"left"}))),"shared"===J[1]&&(at="left"),"left-right-straight"===J[1]&&(at="all");var ot="stencils "+at,st=l({y:Q+.015});if(s({objectMixinId:ot,parentEl:st,rotation:"-90 "+Z+" 0",step:15,radius:d}),U.append(st),"shared"===J[1]){var lt=l({y:Q+.015,z:-3*K});s({objectMixinId:ot,parentEl:lt,rotation:"-90 "+(Z+180)+" 0",step:15,radius:d}),U.append(lt)}}else if("divider"===t[G].type&&"bollard"===J[0]){$="divider";var ct=(T=void 0,(T=document.createElement("a-entity")).setAttribute("class","safehit-parent"),T);s({objectMixinId:"safehit",parentEl:ct,step:4,radius:d}),U.append(ct),tt[0]=1,tt[1]=parseInt(r)/4}else if("divider"===t[G].type&&"flowers"===J[0])$="grass",U.append(p("flowers",d,2.25));else if("divider"===t[G].type&&"planting-strip"===J[0])$="grass",U.append(p("planting-strip",d,2.25));else if("divider"===t[G].type&&"planter-box"===J[0])$="grass",U.append(p("planter-box",d,2.45));else if("divider"===t[G].type&&"palm-tree"===J[0]){$="grass";var ut=j();s({objectMixinId:"palm-tree",parentEl:ut,randomY:!0,radius:d}),U.append(ut)}else if("divider"===t[G].type&&"big-tree"===J[0]){$="grass";var dt=j();s({objectMixinId:"tree3",parentEl:dt,randomY:!0,radius:d}),U.append(dt)}else if("divider"===t[G].type&&"bush"===J[0])$="grass",U.append(p("bush",d,2.25));else if("divider"===t[G].type&&"dome"===J[0])$="divider",U.append(p("dome",d,2.25)),tt[0]=1,tt[1]=parseInt(r)/4;else if("divider"===t[G].type)$="divider",tt[0]=1,tt[1]=parseInt(r)/4;else if("temporary"===t[G].type&&"barricade"===J[0])$="drive-lane",U.append(m("temporary-barricade",d,2.25));else if("temporary"===t[G].type&&"traffic-cone"===J[0])$="drive-lane",U.append(m("temporary-traffic-cone",d,2.25));else if("temporary"===t[G].type&&"jersey-barrier-plastic"===J[0])$="drive-lane",U.append(m("temporary-jersey-barrier-plastic",d,2.25));else if("temporary"===t[G].type&&"jersey-barrier-concrete"===J[0])$="drive-lane",U.append(m("temporary-jersey-barrier-concrete",d,2.93));else if("bus-lane"===t[G].type||"brt-lane"===t[G].type){$=b(J[1]),U.append(w(J,r,c));var pt=void 0;s({objectMixinId:"stencils word-bus",parentEl:pt=l({y:Q+.015}),rotation:"-90 "+Z+" 0",step:50,radius:d}),U.append(pt),s({objectMixinId:"stencils word-taxi",parentEl:pt=l({y:Q+.015,z:10}),rotation:"-90 "+Z+" 0",step:50,radius:d}),U.append(pt),s({objectMixinId:"stencils word-only",parentEl:pt=l({y:Q+.015,z:20}),rotation:"-90 "+Z+" 0",step:50,radius:d}),U.append(pt)}else if("drive-lane"===t[G].type){var mt="animated"===J[2]||o,ht=h(2,3);U.append(E(J,Y,r,mt,c,ht,7.3))}else if("food-truck"===t[G].type)$="drive-lane",U.append(S(J,r));else if("flex-zone"===t[G].type){$="bright-lane",U.append(C(J,r,c));var ft=void 0;s({objectMixinId:"stencils word-loading-small",parentEl:ft=l({y:Q+.015,z:5}),rotation:"-90 "+Z+" 0",step:50,radius:d}),U.append(ft),s({objectMixinId:"stencils word-only-small",parentEl:ft=l({y:Q+.015,z:-5}),rotation:"-90 "+Z+" 0",step:50,radius:d}),U.append(ft)}else if("sidewalk"===t[G].type&&"empty"!==J[0]){var gt="animated"===J[1]||o;U.append(y(Y,J[0],Q,r,"random",gt))}else if("sidewalk-wayfinding"===t[G].type)U.append((v=void 0,A=void 0,A=document.createElement("a-entity"),(v=document.createElement("a-entity")).setAttribute("position","0 1 0"),v.setAttribute("mixin","wayfinding-box"),A.append(v),(v=document.createElement("a-entity")).setAttribute("position","0 1.2 0.06"),v.setAttribute("geometry","primitive: plane; width: 0.8; height: 1.6"),v.setAttribute("material","src:#wayfinding-map"),A.append(v),(v=document.createElement("a-entity")).setAttribute("position","0 1.2 -0.06"),v.setAttribute("rotation","0 180 0"),v.setAttribute("geometry","primitive: plane; width: 0.8; height: 1.6"),v.setAttribute("material","src:#wayfinding-map"),A.append(v),A));else if("sidewalk-bench"===t[G].type){var yt=R(),bt="right"===J[0]?-90:90;"center"===J[0]?(s({objectMixinId:"bench_orientation_center",parentEl:yt,rotation:"0 "+bt+" 0",radius:d}),U.append(yt)):(s({objectMixinId:"bench",parentEl:yt,rotation:"0 "+bt+" 0",radius:d}),U.append(yt))}else if("sidewalk-bike-rack"===t[G].type){var vt=O(Q);s({objectMixinId:"bikerack",parentEl:vt,rotation:"0 "+("sidewalk-parallel"===J[1]?90:0)+" 0",radius:d}),U.append(vt)}else if("magic-carpet"===t[G].type)$="drive-lane",U.append(k(c));else if("outdoor-dining"===t[G].type)$="road"===J[1]?"drive-lane":"sidewalk",U.append(M(r,Q));else if("parklet"===t[G].type)$="drive-lane",U.append(P(r,J));else if("bikeshare"===t[G].type)U.append(N(J,Q));else if("utilities"===t[G].type){var xt=m("utility_pole",d,15,"right"===J[0]?"0 180 0":"0 0 0");U.append(xt)}else if("sidewalk-tree"===t[G].type){var wt=j();s({objectMixinId:it="palm-tree"===J[0]?"palm-tree":"tree3",parentEl:wt,randomY:!0,radius:d}),U.append(wt)}else if("sidewalk-lamp"!==t[G].type||"modern"!==J[1]&&"pride"!==J[1]){if("sidewalk-lamp"===t[G].type&&"traditional"===J[1]){var At=I();s({objectMixinId:"lamp-traditional",parentEl:At,radius:d}),U.append(At)}else if("transit-shelter"===t[G].type){var Et="left"===J[0]?90:270;U.append(L(Et,Q))}else if("brt-station"===t[G].type)U.append(B());else if("separator"===t[G].type&&"dashed"===J[0])$="markings dashed-stripe",W=Q+.01,tt[0]=1,tt[1]=parseInt(r/6);else if("separator"===t[G].type&&"solid"===J[0])$="markings solid-stripe",W=Q+.01;else if("separator"===t[G].type&&"doubleyellow"===J[0])$="markings solid-doubleyellow",W=Q+.01;else if("separator"===t[G].type&&"shortdashedyellow"===J[0])$="markings yellow short-dashed-stripe",W=Q+.01,tt[0]=1,tt[1]=parseInt(r/3);else if("separator"===t[G].type&&"soliddashedyellow"===J[0])$="markings yellow solid-dashed",W=Q+.01;else if("separator"===t[G].type&&"soliddashedyellowinverted"===J[0])$="markings yellow solid-dashed",W=Q+.01,Z="180",tt[0]=1,tt[1]=parseInt(r/6);else if("parking-lane"===t[G].type){var St;$="bright-lane";var kt="stencils parking-t",Tt=6,Mt={outbound:90,inbound:90,sideways:0,"angled-front-left":30,"angled-front-right":-30,"angled-rear-left":-30,"angled-rear-right":30}[J[0]],_t=void 0,Ct=Y/2;90===Mt&&"right"===J[1]?(Mt=-90,Ct=.75-Ct):Ct-=.75,("sideways"===J[0]||J[0].includes("angled"))&&(Tt=3,_t=Y,Ct=0,kt="markings solid-stripe");var Rt=Ct+" 0",Ot=r/2-Tt;U.append(E([].concat(function(t){if(Array.isArray(t))return n(t)}(f=J)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(f)||i(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),["car"]),Y,r,!1,c,5,Tt)),J[1],s({objectMixinId:kt,parentEl:St=l({y:Q+.015}),positionXYString:Rt,rotation:"-90 90 "+Mt,length:_t,step:Tt,radius:Ot}),U.append(St)}}else{var Nt=I();"both"===J[0]?(s({objectMixinId:"lamp-modern-double",parentEl:Nt,rotation:"0 0 0",radius:d}),U.append(Nt)):(s({objectMixinId:"lamp-modern",parentEl:Nt,rotation:"0 "+("right"===J[0]?0:180)+" 0",radius:d}),U.append(Nt)),"pride"!==J[1]||"right"!==J[0]&&"both"!==J[0]||s({objectMixinId:"pride-flag",parentEl:Nt,positionXYString:"0.409 5",radius:d}),"pride"!==J[1]||"left"!==J[0]&&"both"!==J[0]||s({objectMixinId:"pride-flag",parentEl:Nt,rotation:"0 -180 0",positionXYString:"-0.409 5",radius:d})}a.isSidewalk(t[G].type)&&($="sidewalk",tt[0]=Y/1.5,tt[1]=parseInt(r/2)),"separator"!==t[G].type?U.append(F(Y,W,$,r,tt,X)):U.append(D(W,Z,$,r,tt)),g.append(U),U.setAttribute("position",q+" 0 0"),U.setAttribute("data-layer-name","Segment • "+t[G].type+", "+J[0])}var Pt=document.createElement("a-box"),jt=V/2;return Pt.setAttribute("position","".concat(jt," -1.1 0")),Pt.setAttribute("height",2),Pt.setAttribute("width",V),Pt.setAttribute("depth",r-.2),Pt.setAttribute("material","color: #664B00;"),Pt.setAttribute("data-layer-name","Underground"),g.append(Pt),g},t.exports.processBuildings=function(t,e,r,i,n){var o=document.createElement("a-entity"),l=.45*n;return o.classList.add("buildings-parent"),o.setAttribute("data-layer-name","Buildings & Blocks Container"),o.setAttribute("position","0 0.2 0"),[t,e].forEach((function(t,e){if(0!==t.length){var c,u=0===e?"left":"right",d="left"===u?-1:1,p=(n/4+r/2)*d,m=(75+r/2)*d;if(i)"waterfront"===t?((c=document.createElement("a-ocean-box")).setAttribute("geometry",{primitive:"box",depth:n,width:n/2,height:2,segmentsHeight:1,segmentsDepth:10,segmentsWidth:10}),c.setAttribute("position",{y:-3})):((c=document.createElement("a-box")).setAttribute("depth",n),c.setAttribute("height",2),c.setAttribute("width",n/2),c.setAttribute("shadow",""),c.setAttribute("mixin",{grass:"ground-grass-material",fence:"ground-grass-material","parking-lot":"ground-parking-lot-material",residential:"ground-grass-material",narrow:"ground-asphalt-material",wide:"ground-asphalt-material",arcade:"ground-tiled-concrete-material","compound-wall":"ground-asphalt-material"}[t]),c.setAttribute("position",{y:-1})),c.setAttribute("position",{x:p}),c.classList.add("ground-"+u),c.setAttribute("data-layer-name","Ground "+u+" • "+t),o.appendChild(c);var h={x:m,y:0,z:1===e?n/2:-n/2};switch(t){case"narrow":case"wide":h.x+=-72*d;break;case"residential":h.x+=-64*d,h.y=-.58,o.setAttribute("position","0 0.17 0");break;case"arcade":h.x+=-70.5*d}var f=function(t,e){var r=a.createBuildingsArray(n,t),i=JSON.stringify(r),o=document.createElement("a-entity");return o.setAttribute("rotation","0 "+90*e+" 0"),o.setAttribute("create-from-json","jsonString",i),o}(t,d);if(f.setAttribute("data-layer-name","Buildings "+u+" • "+t),f.setAttribute("position",h),o.append(f),"waterfront"===t||"compound-wall"===t){var g,y=m-150*d/2,b=document.createElement("a-entity");b.setAttribute("class","seawall-parent"),b.setAttribute("position",{x:y,z:4.5}),"compound-wall"===t?(b.setAttribute("position",{y:3}),b.setAttribute("position",{x:y+1.5*d}),g="left"===u?90:-90):g="left"===u?-90:90,b.classList.add("seawall-parent-"+u),o.appendChild(b),s({objectMixinId:"seawall",parentEl:b,rotation:"0 "+g+" 0",step:15,radius:l})}if("fence"===t||"parking-lot"===t){var v=m-150*d/2,x=document.createElement("a-entity");x.setAttribute("class","fence-parent"),x.setAttribute("position",v+" 0 4.625"),x.classList.add("fence-parent-"+m),s({objectMixinId:"fence",parentEl:x,rotation:"0 "+("right"===u?-90:90)+" 0",step:9.25,radius:l}),o.appendChild(x)}}})),o}},4956:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r(n.key),n)}}function r(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}function i(e,r,i){return r=a(r),function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,n()?Reflect.construct(r,i||[],a(e).constructor):r.apply(e,i))}function n(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(n=function(){return!!t})()}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}var s=function(t){function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=i(this,r)).isAssetItem=!0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(r,AFRAME.ANode),n=r,(a=[{key:"connectedCallback",value:function(){var t=this.getAttribute("categories"),e=this.getAttribute("url");e||(e="https://assets.3dstreet.app/",this.setAttribute("url",e));var r=function(t,e){console.log("[street]","Using street assets from",t);var r=.8,i={"sidewalk-props":'\n        \x3c!-- sidewalk props --\x3e\n        <img id="wayfinding-map" src="'.concat(t,'objects/wayfinding.jpg" crossorigin="anonymous" />\n        <a-asset-item id="streetProps" src="').concat(t,'sets/street-props/gltf-exports/draco/street-props.glb"></a-asset-item>\n        <a-asset-item id="brt-station-model" src="').concat(t,'sets/brt-station/gltf-exports/draco/brt-station.glb"></a-asset-item>\n        <a-mixin shadow id="brt-station" gltf-model="#brt-station-model" ></a-mixin>\n        <a-mixin shadow id="outdoor_dining" gltf-part="src: #streetProps; part: outdoor_dining"></a-mixin>\n        <a-mixin shadow id="bench_orientation_center" gltf-part="src: #streetProps; part: bench_orientation_center"></a-mixin>\n        <a-mixin shadow id="parklet" gltf-part="src: #streetProps; part: parklet"></a-mixin>\n        <a-mixin shadow id="utility_pole" gltf-part="src: #streetProps; part: utility_pole"></a-mixin>\n        <a-mixin shadow id="lamp-modern" gltf-part="src: #streetProps; part: street-light"></a-mixin>\n        <a-mixin shadow id="lamp-modern-double" gltf-part="src: #streetProps; part: street-light-double"></a-mixin>\n        <a-mixin shadow id="bikerack" gltf-part="src: #streetProps; part: bike_rack"></a-mixin>\n        <a-mixin shadow id="bikeshare" gltf-part="src: #streetProps; part: bike_share"></a-mixin>\n        <a-mixin shadow id="lamp-traditional" gltf-part="src: #streetProps; part: lamp_post_traditional" scale="2 2 2"></a-mixin>\n        <a-mixin shadow id="palm-tree" gltf-part="src: #streetProps; part: palmtree" scale="1 1.5 1"></a-mixin>\n        <a-mixin shadow id="bench" gltf-part="src: #streetProps; part: park_bench"></a-mixin>\n        <a-mixin shadow id="seawall" gltf-part="src: #streetProps; part: sea_wall"></a-mixin>\n        <a-mixin shadow id="track" gltf-part="src: #streetProps; part: track"></a-mixin>\n        <a-mixin shadow id="tree3" gltf-part="src: #streetProps; part: tree-01" scale="1.25 1.25 1.25"></a-mixin>\n        <a-mixin shadow id="bus-stop" gltf-part="src: #streetProps; part: transit-shelter-1"></a-mixin>\n        <a-mixin shadow id="pride-flag" position="0.409 3.345 0" rotation="0 0 0" scale="0.5 0.75 0" geometry="width:2;height:2;primitive:plane" material="side:double; src:').concat(t,'materials/rainbow-flag-poles_512.png;transparent: true;"></a-mixin>\n        <a-mixin shadow id="wayfinding-box" geometry="primitive: box; height: 2; width: 0.84; depth: 0.1" material="color: gray"></a-mixin>\n      '),people:'\n        \x3c!-- human characters --\x3e\n        <a-asset-item id="humans" src="'.concat(t,'sets/human-characters-poses-1/gltf-exports/draco/human-characters-poses-1.glb"></a-asset-item>\n        <a-mixin shadow id="char1" gltf-part="src: #humans; part: Character_1"></a-mixin>\n        <a-mixin shadow id="char2" gltf-part="src: #humans; part: Character_2"></a-mixin>\n        <a-mixin shadow id="char3" gltf-part="src: #humans; part: Character_3"></a-mixin>\n        <a-mixin shadow id="char4" gltf-part="src: #humans; part: Character_4"></a-mixin>\n        <a-mixin shadow id="char5" gltf-part="src: #humans; part: Character_5"></a-mixin>\n        <a-mixin shadow id="char6" gltf-part="src: #humans; part: Character_6"></a-mixin>\n        <a-mixin shadow id="char7" gltf-part="src: #humans; part: Character_7"></a-mixin>\n        <a-mixin shadow id="char8" gltf-part="src: #humans; part: Character_8"></a-mixin>\n        <a-asset-item id="humans2" src="').concat(t,'sets/human-characters-poses-2/gltf-exports/draco/human-characters-poses-2.glb"></a-asset-item>\n        <a-mixin shadow id="char9" gltf-part="src: #humans2; part: Character_9"></a-mixin>\n        <a-mixin shadow id="char10" gltf-part="src: #humans2; part: Character_10"></a-mixin>\n        <a-mixin shadow id="char11" gltf-part="src: #humans2; part: Character_11"></a-mixin>\n        <a-mixin shadow id="char12" gltf-part="src: #humans2; part: Character_12"></a-mixin>\n        <a-mixin shadow id="char13" gltf-part="src: #humans2; part: Character_13"></a-mixin>\n        <a-mixin shadow id="char14" gltf-part="src: #humans2; part: Character_14"></a-mixin>\n        <a-mixin shadow id="char15" gltf-part="src: #humans2; part: Character_15"></a-mixin>\n        <a-mixin shadow id="char16" gltf-part="src: #humans2; part: Character_16"></a-mixin>\n      '),"people-rigged":'          \n        <a-asset-item id="character1walk" src="'.concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-1-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char1" gltf-model="#character1walk" animation-mixer></a-mixin>\n        \n        <a-asset-item id="character2walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-2-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char2" gltf-model="#character2walk" animation-mixer></a-mixin>\n        <a-asset-item id="character3walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-3-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char3" gltf-model="#character3walk" animation-mixer></a-mixin>\n        <a-asset-item id="character4walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-4-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char4" gltf-model="#character4walk" animation-mixer></a-mixin>\n        <a-asset-item id="character5walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-5-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char5" gltf-model="#character5walk" animation-mixer></a-mixin>\n        <a-asset-item id="character6walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-6-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char6" gltf-model="#character6walk" animation-mixer></a-mixin>\n        <a-asset-item id="character7walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-7-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char7" gltf-model="#character7walk" animation-mixer></a-mixin>\n        <a-asset-item id="character8walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-8-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char8" gltf-model="#character8walk" animation-mixer></a-mixin>\n      '),vehicles:'\n        \x3c!-- vehicles --\x3e\n        <a-asset-item id="magic-carpet-glb" src="'.concat(t,'sets/magic-carpet/gltf-exports/draco/magic-carpet.glb"></a-asset-item>\n        <a-mixin shadow id="Character_1_M" gltf-part="src: #magic-carpet-glb; part: Character_1_M"></a-mixin>\n        <a-mixin shadow id="magic-carpet" gltf-part="src: #magic-carpet-glb; part: magic-carpet"></a-mixin>\n        \x3c!-- micro mobility vehicles --\x3e\n        <a-asset-item id="microMobilityDevices" src="').concat(t,'sets/micro-mobility-devices/gltf-exports/draco/micro-mobility-devices_v01.glb"></a-asset-item>\n        <a-mixin shadow id="Bicycle_1" gltf-part="src: #microMobilityDevices; part: Bicycle_1"></a-mixin>\n        <a-mixin shadow id="ElectricScooter_1" gltf-part="src: #microMobilityDevices; part: ElectricScooter_1"></a-mixin>\n      '),"vehicles-rigged":'\n        \x3c!-- vehicles rigged --\x3e\n        <a-mixin shadow id="sedan-rig" gltf-model="url('.concat(t,'sets/vehicles-rig/gltf-exports/draco/toyota-prius-rig.glb)" ></a-mixin>\n        <a-mixin shadow id="sedan-taxi-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/sedan-taxi-rig.glb)"></a-mixin>\n        <a-mixin shadow id="suv-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/suv-rig.glb)"></a-mixin>\n        <a-mixin shadow id="box-truck-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/isuzu-truck-rig.glb)"></a-mixin>\n        <a-mixin shadow id="food-trailer-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/food-trailer-rig.glb)"></a-mixin>\n        <a-mixin shadow id="fire-truck-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/fire-truck-pumper-rig.glb)"></a-mixin>\n        <a-mixin shadow id="fire-ladder-rig" gltf-model="url(').concat(t,'sets/vehicles/gltf-exports/draco/fire_truck_ladder.glb)"></a-mixin>\n        <a-mixin shadow id="self-driving-cruise-car-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/self-driving-cruise-car-rig.glb)"></a-mixin>\n      '),buildings:'\n        \x3c!-- blocks --\x3e\n        <a-asset-item id="blockmodel" src="'.concat(t,'sets/buildings/gltf-exports/draco/buildings.glb"></a-asset-item>\n        <a-asset-item id="archedmodel" src="').concat(t,'sets/arcade-style-buildings/gltf-exports/draco/arched-buildings.glb"></a-asset-item>\n        <a-asset-item id="suburbiamodel" src="').concat(t,'sets/suburban-houses/gltf-exports/draco/suburban-houses.glb"></a-asset-item>\n\n        \x3c!-- buildings and blocks --\x3e\n        <a-mixin shadow id="SM3D_Bld_Mixed_Corner_4fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_Corner_4fl"></a-mixin>\n        <a-mixin shadow id="SM3D_Bld_Mixed_Double_5fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_Double_5fl"></a-mixin>\n        <a-mixin shadow id="SM3D_Bld_Mixed_4fl_2" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_4fl_2"></a-mixin>\n        <a-mixin shadow id="SM3D_Bld_Mixed_5fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_5fl"></a-mixin>\n        <a-mixin shadow id="SM3D_Bld_Mixed_4fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_4fl"></a-mixin>\n\n        \x3c!-- suburban buildings --\x3e\n        <a-mixin shadow id="SM_Bld_House_Preset_03_1800" scale="1 1 1" rotation="0 0 0" gltf-part="src: #suburbiamodel; part: suburban-house_1"></a-mixin>\n        <a-mixin shadow id="SM_Bld_House_Preset_08_1809" scale="1 1 1" rotation="0 0 0" gltf-part="src: #suburbiamodel; part: suburban-house_3"></a-mixin>\n        <a-mixin shadow id="SM_Bld_House_Preset_09_1845" scale="1 1 1" rotation="0 0 0" gltf-part="src: #suburbiamodel; part: suburban-house_2"></a-mixin>\n\n        \x3c!-- arched style buildings --\x3e\n        <a-mixin shadow id="arched-building-01" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-01"></a-mixin>\n        <a-mixin shadow id="arched-building-02" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-02"></a-mixin>\n        <a-mixin shadow id="arched-building-03" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-03"></a-mixin>\n        <a-mixin shadow id="arched-building-04" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-04"></a-mixin>\n'),"intersection-props":'\n        <a-asset-item id="stopsign" src="'.concat(t,'sets/road-signs/gltf-exports/draco/stop-sign.glb"></a-asset-item>\n        <a-asset-item id="signal1" src="').concat(t,'sets/signals/gltf-exports/draco/signal1.glb"></a-asset-item>\n        <a-asset-item id="signal2" src="').concat(t,'sets/signals/gltf-exports/draco/signal2.glb"></a-asset-item>\n        <a-mixin id="signal_left" gltf-model="#signal1"></a-mixin>\n        <a-mixin id="signal_right" gltf-model="#signal2"></a-mixin>\n        <a-mixin id="stop_sign" gltf-model="#stopsign"></a-mixin>\n      '),"segment-textures":'  \n        \x3c!-- segment mixins with textures --\x3e\n        <img id="seamless-road" src="'.concat(t,'materials/TexturesCom_Roads0086_1_seamless_S_rotate.jpg" crossorigin="anonymous">\n        <img id="seamless-bright-road" src="').concat(t,'materials/asphalthd_Base_Color.jpg" crossorigin="anonymous">\n        <img id="seamless-sidewalk" src="').concat(t,'materials/TexturesCom_FloorsRegular0301_1_seamless_S.jpg" crossorigin="anonymous">\n        <img id="hatched-base" src="').concat(t,'materials/seamless-lane-with-hatch-half.jpg" crossorigin="anonymous">\n        <img id="hatched-normal" src="').concat(t,'materials/seamless-lane-with-hatch-half.jpg" crossorigin="anonymous">\n        <a-mixin shadow="cast: false" id="drive-lane" geometry="width:3;height:150;primitive:plane" material="roughness:').concat(r,';repeat:0.3 25;offset:0.55 0;src:#seamless-road;"></a-mixin>\n        <a-mixin shadow="cast: false" id="bright-lane" geometry="width:3;height:150;primitive:plane" material="roughness:').concat(r,';repeat:0.6 50;offset:0.55 0;src:#seamless-bright-road;color:#dddddd"></a-mixin>\n        <a-mixin shadow="cast: false" id="bike-lane" geometry="width:1.8;height:150;primitive:plane" material="roughness:').concat(r,';repeat:0.3 25;offset:0.55 0;metalness:0;src:#seamless-road;"></a-mixin>\n        <a-mixin shadow id="sidewalk" anisotropy geometry="width:3;height:150;primitive:plane" material="roughness:').concat(r,';repeat:1.5 75;src:#seamless-sidewalk;"></a-mixin>\n        <a-mixin shadow="cast: false" id="bus-lane" geometry="width:3;height:150;primitive:plane" material="roughness:').concat(r,';repeat:0.3 25;offset:0.55 0;src:#seamless-road;"></a-mixin>\n        <a-mixin shadow="cast: false" id="divider" geometry="width:0.3;height:150;primitive:plane" material="roughness:').concat(r,';src:#hatched-base;"></a-mixin>\n        <a-mixin shadow="cast: false" id="grass" geometry="width:0.3;height:150;primitive:plane" material="roughness:').concat(r,';repeat:1 150;offset:0.415 0;src:#grass-texture;"></a-mixin>\n      '),"segment-colors":'  \n        \x3c!-- segment color modifier mixins --\x3e\n        <a-mixin id="yellow" material="color:#f7d117"></a-mixin>\n        <a-mixin id="surface-green" material="color:#adff83"></a-mixin>\n        <a-mixin id="surface-red" material="color:#ff9393"></a-mixin>\n        <a-mixin id="surface-blue" material="color:#00b6b6"></a-mixin>\n      ',"lane-separator":'\n        \x3c!-- lane separator markings --\x3e\n        <img id="markings-atlas" src="'.concat(t,'materials/lane-markings-atlas_1024.png" crossorigin="anonymous" /> \n        <a-mixin shadow="cast: false" id="markings" anisotropy atlas-uvs="totalRows: 1; totalColumns: 8; row: 1" scale="1 1 1" material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 25;" geometry="primitive: plane; buffer: false; skipCache: true; width:0.2; height:150;"></a-mixin>\n        <a-mixin shadow="cast: false" id="solid-stripe" atlas-uvs="column: 3; row: 1" material="repeat:1 5;"></a-mixin>\n        <a-mixin shadow="cast: false" id="dashed-stripe" atlas-uvs="column: 4; row: 1"></a-mixin>\n        <a-mixin shadow="cast: false" id="short-dashed-stripe" atlas-uvs="column: 4" material="repeat:1 50;"></a-mixin>\n        <a-mixin shadow="cast: false" id="solid-doubleyellow" atlas-uvs="totalColumns: 4; column: 3" geometry="width: 0.5"></a-mixin>\n        <a-mixin shadow="cast: false" id="solid-dashed" atlas-uvs="totalColumns: 4; column: 2" geometry="width: 0.4"></a-mixin>\n        <a-mixin shadow="cast: false" id="crosswalk-zebra" atlas-uvs="totalColumns: 4; column: 4" geometry="width: 2; height: 12"  material="repeat: 1 2"></a-mixin>\n      '),stencils:'  \n        \x3c!-- stencil markings --\x3e\n        <img id="stencils-atlas" src="'.concat(t,'materials/stencils-atlas_2048.png" crossorigin="anonymous" />\n        <a-mixin shadow="cast: false" id="stencils" anisotropy atlas-uvs="totalRows: 4; totalColumns: 4" scale="2 2 2" material="src: #stencils-atlas;alphaTest: 0;transparent:true;" geometry="primitive: plane; buffer: false; skipCache: true;"></a-mixin>\n        <a-mixin id="right" atlas-uvs="column: 3; row: 2"></a-mixin>\n        <a-mixin id="left" atlas-uvs="column: 3; row: 3"></a-mixin>\n        <a-mixin id="both" atlas-uvs="column: 2; row: 1"></a-mixin>\n        <a-mixin id="all" atlas-uvs="column: 3; row: 1"></a-mixin>\n        <a-mixin id="left-straight" atlas-uvs="column: 2; row: 3"></a-mixin>\n        <a-mixin id="right-straight" atlas-uvs="column: 2; row: 2"></a-mixin>\n        <a-mixin id="straight" atlas-uvs="column: 2; row: 4"></a-mixin>\n        <a-mixin id="sharrow" atlas-uvs="totalRows: 4; totalColumns: 8; column: 2; row: 3" scale="1.5 3 1"></a-mixin>\n        <a-mixin id="bike-arrow" atlas-uvs="totalRows: 2; totalColumns: 8; column: 1; row: 2" scale="1 4 1"></a-mixin>\n        <a-mixin id="word-bus" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 4" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-lane" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 4" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-taxi" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 3" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-only" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 3" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-only-small" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 3" scale="2.5 2 2.5"></a-mixin>\n        <a-mixin id="word-yield" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 2" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-slow" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 2" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-xing" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 1" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-stop" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 1" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-loading-small" atlas-uvs="totalRows: 8; totalColumns: 4; column: 4; row: 1" scale="2.75 1.75 2.75"></a-mixin>\n        <a-mixin id="perpendicular-stalls" atlas-uvs="totalRows: 4; totalColumns: 8; column: 5; row: 4" scale="5 10 5"></a-mixin>\n        <a-mixin id="parking-t" atlas-uvs="totalRows: 8; totalColumns: 16; column: 4; row: 7" scale="1.5 2 2"></a-mixin>\n        <a-mixin id="painted-safety-zone" atlas-uvs="totalRows: 4; totalColumns: 4; column: 4; row: 4" scale="8 8 8"></a-mixin>\n        <a-mixin id="hash-left" atlas-uvs="totalRows: 4; totalColumns: 8; column: 7; row: 2" scale="3 6 3"></a-mixin>\n        <a-mixin id="hash-right" atlas-uvs="totalRows: 4; totalColumns: 8; column: 8; row: 2" scale="3 6 3"></a-mixin>\n        <a-mixin id="hash-chevron" atlas-uvs="totalRows: 4; totalColumns: 4; column: 4; row: 2" scale="3 3 3"></a-mixin>\n      '),"vehicles-transit":'\n        \x3c!-- vehicles-transit --\x3e\n        <a-mixin shadow id="bus" anisotropy gltf-model="url('.concat(t,'sets/flyer-bus/gltf-exports/draco/new-flyer-bus.glb)"></a-mixin>\n        <a-mixin shadow id="tram" anisotropy gltf-model="url(').concat(t,'sets/light-rail-vehicle/gltf-exports/draco/light-rail-vehicle-v02.glb)"></a-mixin>\n        <a-mixin shadow id="trolley" gltf-model="url(').concat(t,'sets/sanfrancisco-cablecar/gltf-exports/draco/sanfrancisco-cablecar_v01.glb)"></a-mixin>\n        '),dividers:'\n        \x3c!-- dividers --\x3e\n        <a-asset-item id="dividers" src="'.concat(t,'sets/dividers/gltf-exports/draco/dividers.glb"></a-asset-item>        \n        <a-mixin shadow id="dividers-flowers" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: flowers"></a-mixin>\n        <a-mixin shadow id="dividers-planting-strip" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: planting-strip"></a-mixin>\n        <a-mixin shadow id="dividers-planter-box" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: planter-box"></a-mixin>\n        <a-mixin shadow id="dividers-bush" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: bush"></a-mixin>\n        <a-mixin shadow id="dividers-dome" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: dome"></a-mixin>\n        <a-mixin shadow id="safehit" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: bollard"></a-mixin>\n        <a-mixin shadow id="temporary-barricade" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: barricade"></a-mixin>\n        <a-mixin shadow id="temporary-traffic-cone" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: traffic-cone"></a-mixin>\n        <a-mixin shadow id="temporary-jersey-barrier-plastic" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: jersey-barrier-plastic"></a-mixin>\n        <a-mixin shadow id="temporary-jersey-barrier-concrete" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: jersey-barrier-concrete"></a-mixin>\n      '),sky:'\n        \x3c!-- sky --\x3e\n        <img id="sky" src="'.concat(t,'images/skies/2048-polyhaven-wasteland_clouds_puresky.jpeg" crossorigin="anonymous" />\n        <img id="sky-night" src="').concat(t,'images/AdobeStock_286725174-min.jpeg" crossorigin="anonymous" />\n      '),grounds:'\n        \x3c!-- grounds --\x3e\n        <img id="grass-texture" src="'.concat(t,'materials/TexturesCom_Grass0052_1_seamless_S.jpg" crossorigin="anonymous">\n        <img id="parking-lot-texture" src="').concat(t,'materials/TexturesCom_Roads0111_1_seamless_S.jpg" crossorigin="anonymous">\n        <img id="asphalt-texture" src="').concat(t,'materials/TexturesCom_AsphaltDamaged0057_1_seamless_S.jpg" crossorigin="anonymous">\n\n        \x3c!-- legacy plane-based grounds for compatibility with 0.4.2 and earlier scenes, not used for new streets --\x3e\n        <a-mixin shadow id="ground-grass" rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#grass-texture;repeat:5 5;roughness:1"></a-mixin>\n        <a-mixin shadow id="ground-parking-lot" rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#parking-lot-texture;repeat:2 4;roughness:1"></a-mixin>\n        <a-mixin shadow id="ground-asphalt" rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#asphalt-texture;repeat:5 5;roughness:1"></a-mixin>\n        <a-mixin shadow id="ground-tiled-concrete" anisotropy rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#seamless-sidewalk;repeat:5 5;roughness:1"></a-mixin>\n\n        \x3c!-- new grounds for 0.4.4 and later --\x3e \n        <a-mixin shadow id="ground-grass-material" material="src:#grass-texture;repeat:2.5 5;roughness:').concat(r,'"></a-mixin>\n        <a-mixin shadow id="ground-parking-lot-material" material="src:#parking-lot-texture;repeat:.5 2;roughness:').concat(r,'"></a-mixin>\n        <a-mixin shadow id="ground-asphalt-material" material="src:#asphalt-texture;repeat:5 5;roughness:').concat(r,'"></a-mixin>\n        <a-mixin shadow id="ground-tiled-concrete-material" material="src:#seamless-sidewalk;repeat:10 20;roughness:').concat(r,'"></a-mixin>\n\n        <a-asset-item id="fence-model" src="').concat(t,'sets/fences/gltf-exports/draco/fence4.glb"></a-asset-item>\n        <a-mixin shadow id="fence" gltf-model="#fence-model" scale="0.1 0.1 0.1"></a-mixin>\n      '),"loud-bicycle":'\n        \x3c!-- loud-bicycle-game --\x3e\n        <a-mixin shadow id="cyclist-cargo" gltf-model="url('.concat(t,'sets/cargo-bike-animation/gltf-exports/draco/cargo_bike_animation_v1.glb)"></a-mixin>\n        <a-mixin shadow id="cyclist1" gltf-model="url(').concat(t,'sets/cyclist-animation/gltf-exports/draco/cyclist-1-animation-v1.glb)"></a-mixin>\n        <a-mixin shadow id="cyclist2" gltf-model="url(').concat(t,'sets/cyclist-animation/gltf-exports/draco/cyclist-2-animation-v1.glb)"></a-mixin>\n        <a-mixin shadow id="cyclist3" gltf-model="url(').concat(t,'sets/cyclist-animation/gltf-exports/draco/cyclist-3-animation-v1.glb)"></a-mixin>\n        <a-mixin shadow id="cyclist-kid" gltf-model="url(').concat(t,'sets/cyclist-animation/gltf-exports/draco/Kid_cyclist_animation_v01.glb)"></a-mixin>\n        <a-mixin shadow id="cyclist-dutch" gltf-model="url(').concat(t,'sets/cyclist-animation/gltf-exports/draco/Dutch_cyclist_animation_v01.glb)"></a-mixin>\n        <a-mixin shadow id="loud-bicycle-mini" gltf-model="url(').concat(t,'sets/cycle-horn/gltf-exports/draco/loud-bicycle-mini-horn.glb)"></a-mixin>\n        <a-mixin shadow id="loud-bicycle-classic" gltf-model="url(').concat(t,'sets/cycle-horn/gltf-exports/draco/loud-bicycle-classic-horn.glb)"></a-mixin>\n        <a-mixin shadow id="building-school" gltf-model="url(').concat(t,'sets/school-building/gltf-exports/draco/school-building.glb)"></a-mixin>\n        <a-mixin shadow id="building-bar" gltf-model="url(').concat(t,'sets/irish-bar-building/gltf-exports/draco/irish-bar-building.glb)"></a-mixin>\n        <a-mixin shadow id="vehicle-bmw-m2" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/BWM_m2-rig.glb)"></a-mixin>\n        <a-mixin shadow id="prop-suburban-houses" gltf-model="url(').concat(t,'sets/suburban-houses/gltf-exports/draco/suburban-houses.glb)"></a-mixin>\n        <a-mixin shadow id="prop-banner-wfh" gltf-model="url(').concat(t,'sets/wfh-banner/gltf-exports/draco/wfh-banner.glb)"></a-mixin>\n        <a-mixin shadow id="prop-raygun" gltf-model="url(').concat(t,'sets/ray-gun/gltf-exports/draco/rayGun.glb)"></a-mixin>\n        <a-mixin shadow id="prop-co2-scrubber" gltf-model="url(').concat(t,'sets/c02-scrubber/gltf-exports/draco/co2-scrubber.glb)"></a-mixin>\n    ')};function n(t,e){var r=(new DOMParser).parseFromString(t,"text/html");return r.querySelectorAll("a-mixin").forEach((function(t){t.setAttribute("category",e)})),r.documentElement.innerHTML}var a=Object.keys(i);if(e){var o=e.split(" ");a=a.filter((function(t){return o.includes(t)}))}var s="";for(var l in i)a.includes(l)&&(s+=n(i[l],l));return s}(e,t);this.insertAdjacentHTML("afterend",r),AFRAME.ANode.prototype.load.call(this)}}])&&e(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a}();customElements.define("street-assets",s),document.addEventListener("DOMSubtreeModified",(function t(e){if("A-SCENE"===e.target.nodeName){var r=e.target.querySelector("a-assets");if(r||(r=document.createElement("a-assets"),e.target.append(r)),r.querySelector("street-assets"))document.removeEventListener("DOMSubtreeModified",t);else{var i=document.createElement("street-assets");r.append(i),document.removeEventListener("DOMSubtreeModified",t)}}}),!1)},6948:(t,e,r)=>{var i=r(4001);AFRAME.registerComponent("create-from-json",{schema:{jsonString:{type:"string",default:""}},update:function(t){var e=this.data,r=this.el;if(t.string&&e.string!==t.string)for(;r.firstChild;)r.removeChild(r.lastChild);i.appendChildElementsFromArray(JSON.parse(e.jsonString),r)}})},6023:()=>{var t={},e={};AFRAME.registerComponent("gltf-part",{schema:{buffer:{default:!0},part:{type:"string"},src:{type:"asset"}},init:function(){this.dracoLoader=document.querySelector("a-scene").systems["gltf-model"].getDRACOLoader()},update:function(){var t=this.el;!this.data.part&&this.data.src||this.getModel((function(e){e&&t.setObject3D("mesh",e)}))},getModel:function(r){var i=this;if(!e[this.data.src])return t[this.data.src]?t[this.data.src].then((function(t){r(i.selectFromModel(t))})):void(t[this.data.src]=new Promise((function(n){var a=new THREE.GLTFLoader;i.dracoLoader&&a.setDRACOLoader(i.dracoLoader),a.load(i.data.src,(function(a){var o=a.scene||a.scenes[0];e[i.data.src]=o,delete t[i.data.src],r(i.selectFromModel(o)),n(o)}),(function(){}),console.error)})));r(this.selectFromModel(e[this.data.src]))},selectFromModel:function(t){var e,r;if(r=t.getObjectByName(this.data.part))return e=r.getObjectByProperty("type","Mesh").clone(!0),this.data.buffer?(e.geometry=e.geometry.toNonIndexed(),e):(e.geometry=(new THREE.Geometry).fromBufferGeometry(e.geometry),e);console.error("[gltf-part] `"+this.data.part+"` not found in model.")}})},4857:(t,e,r)=>{var i=r(5165).Notyf;AFRAME.registerComponent("notify",{schema:{duration:{type:"number",default:6e3},ripple:{type:"boolean",default:!1},position:{type:"string",default:{x:"center",y:"bottom"}},dismissible:{type:"boolean",default:!1},type:{type:"string",default:"info"},message:{type:"string",default:""}},init:function(){var t=this;this.notify=new i({types:[{type:"info",background:"blue",icon:!1},{type:"warning",background:"orange",icon:!1}],duration:this.data.duration,ripple:this.data.ripple,position:this.data.position,dismissible:this.data.dismissible}),this.types=this.notify.options.types.map((function(t){return t.type})),STREET&&(STREET.notify={},STREET.notify.successMessage=function(e){t.message(e,"success")},STREET.notify.errorMessage=function(e){t.message(e,"error")},STREET.notify.warningMessage=function(e){t.message(e,"warning")})},message:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";t&&this.types.includes(e)&&this.notify.open({type:e,message:t})},update:function(t){if(0!==Object.keys(t).length){var e=this.data.message,r=this.data.type;e&&this.types.includes(r)&&(this.message(e,r),this.data.message="")}}})},2052:()=>{AFRAME.registerComponent("wobble-normal",{schema:{},tick:function(t){this.el.components.material.material.normalMap&&(this.el.components.material.material.normalMap.offset.x+=1e-4*Math.sin(t/1e4),this.el.components.material.material.normalMap.offset.y+=1e-4*Math.cos(t/8e3),this.el.components.material.material.normalScale.x=.5+.5*Math.cos(t/1e3),this.el.components.material.material.normalScale.x=.5+.5*Math.sin(t/1200))}}),AFRAME.registerComponent("wobble-geometry",{schema:{amplitude:{default:.1},amplitudeVariance:{default:.3},speed:{default:.25},speedVariance:{default:2}},play:function(){var t=this.data,e=this.geometry=this.el.object3D.children[0].geometry;console.log(this.el.object3D.children[0].geometry),this.waves=[];var r=e.getAttribute("position");console.log(r);for(var i=0;i<r.count;i++)this.waves.push({z:r.getZ(i),ang:Math.random()*Math.PI*2,amp:t.amplitude+Math.random()*t.amplitudeVariance,speed:(t.speed+Math.random()*t.speedVariance)/1e3})},tick:function(t,e){if(e){for(var r=this.geometry.getAttribute("position"),i=0;i<r.count;i++){var n=this.waves[i],a=n.z+Math.sin(n.ang)*n.amp;r.setZ(i,a),n.ang+=n.speed*e}r.needsUpdate=!0}}}),AFRAME.registerPrimitive("a-ocean-plane",{defaultComponents:{geometry:{primitive:"plane",height:1e3,width:1e3,segmentsHeight:100,segmentsWidth:100},rotation:"-90 0 0",material:{shader:"standard",color:"#8ab39f",metalness:1,roughness:.2,normalMap:"url(assets/materials/waternormals.jpg)",normalTextureRepeat:"50 50",normalTextureOffset:"0 0",normalScale:"0.5 0.5",opacity:.8},"wobble-normal":{},"wobble-geometry":{}}}),AFRAME.registerComponent("wobble-geometry-box",{schema:{amplitude:{default:.1},amplitudeVariance:{default:.3},speed:{default:.25},speedVariance:{default:2}},play:function(){var t=this.data,e=this.geometry=this.el.object3D.children[0].geometry;this.waves=[];for(var r=e.getAttribute("position"),i=0;i<r.count;i++)this.waves.push({y:r.getY(i),ang:Math.random()*Math.PI*2,amp:t.amplitude+Math.random()*t.amplitudeVariance,speed:(t.speed+Math.random()*t.speedVariance)/1e3})},tick:function(t,e){if(e){for(var r=this.geometry.getAttribute("position"),i=0;i<r.count;i++){var n=this.waves[i],a=n.y+Math.sin(n.ang)*n.amp;r.setY(i,a),n.ang+=n.speed*e}r.needsUpdate=!0}}}),AFRAME.registerPrimitive("a-ocean-box",{defaultComponents:{geometry:{primitive:"box",depth:100,width:100,height:4,segmentsHeight:10,segmentsDepth:100,segmentsWidth:100},rotation:"0 0 0",material:{shader:"standard",color:"#8ab39f",metalness:1,roughness:.2,normalMap:"url(https://assets.3dstreet.app/materials/waternormals.jpg)",normalTextureRepeat:"10 10",normalTextureOffset:"0 0",normalScale:"0.5 0.5",opacity:.8},"wobble-normal":{},"wobble-geometry-box":{}}})},5927:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";e=function(){return i};var r,i={},n=Object.prototype,a=n.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(r){d=function(t,e,r){return t[e]=r}}function p(t,e,r,i){var n=e&&e.prototype instanceof v?e:v,a=Object.create(n.prototype),s=new N(i||[]);return o(a,"_invoke",{value:_(t,r,s)}),a}function m(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}i.wrap=p;var h="suspendedStart",f="suspendedYield",g="executing",y="completed",b={};function v(){}function x(){}function w(){}var A={};d(A,l,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(P([])));S&&S!==n&&a.call(S,l)&&(A=S);var k=w.prototype=v.prototype=Object.create(A);function T(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function M(e,r){function i(n,o,s,l){var c=m(e[n],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==t(d)&&a.call(d,"__await")?r.resolve(d.__await).then((function(t){i("next",t,s,l)}),(function(t){i("throw",t,s,l)})):r.resolve(d).then((function(t){u.value=t,s(u)}),(function(t){return i("throw",t,s,l)}))}l(c.arg)}var n;o(this,"_invoke",{value:function(t,e){function a(){return new r((function(r,n){i(t,e,r,n)}))}return n=n?n.then(a,a):a()}})}function _(t,e,i){var n=h;return function(a,o){if(n===g)throw Error("Generator is already running");if(n===y){if("throw"===a)throw o;return{value:r,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var l=C(s,i);if(l){if(l===b)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===h)throw n=y,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=g;var c=m(t,e,i);if("normal"===c.type){if(n=i.done?y:f,c.arg===b)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n=y,i.method="throw",i.arg=c.arg)}}}function C(t,e){var i=e.method,n=t.iterator[i];if(n===r)return e.delegate=null,"throw"===i&&t.iterator.return&&(e.method="return",e.arg=r,C(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),b;var a=m(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,b;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,b):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,b)}function R(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(R,this),this.reset(!0)}function P(e){if(e||""===e){var i=e[l];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}throw new TypeError(t(e)+" is not iterable")}return x.prototype=w,o(k,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:x,configurable:!0}),x.displayName=d(w,u,"GeneratorFunction"),i.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,d(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},i.awrap=function(t){return{__await:t}},T(M.prototype),d(M.prototype,c,(function(){return this})),i.AsyncIterator=M,i.async=function(t,e,r,n,a){void 0===a&&(a=Promise);var o=new M(p(t,e,r,n),a);return i.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},T(k),d(k,u,"Generator"),d(k,l,(function(){return this})),d(k,"toString",(function(){return"[object Generator]"})),i.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},i.values=P,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,n){return s.type="throw",s.arg=t,e.next=i,n&&(e.method="next",e.arg=r),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=t,o.arg=e,n?(this.method="next",this.next=n.finallyLoc,b):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;O(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:P(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=r),b}},i}function r(t,e,r,i,n,a,o){try{var s=t[a](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(i,n)}function i(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var o=t.apply(e,i);function s(t){r(o,n,a,s,l,"next",t)}function l(t){r(o,n,a,s,l,"throw",t)}s(void 0)}))}}var n;AFRAME.registerComponent("screentock",{schema:{takeScreenshot:{type:"boolean",default:!1},filename:{type:"string",default:"screenshot"},type:{type:"string",default:"jpg"},imgElementSelector:{type:"selector"}},takeScreenshotNow:(n=i(e().mark((function t(r,n,a){var o,s,l,c,u,d,p,m,h;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p=function(t,e,r){var i=document.createElement("a"),n=e.replace(/^data:image\/[^;]/,"data:application/octet-stream");i.setAttribute("href",n),i.setAttribute("download",t),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)},u=function(t,e,r){t.font="25px Lato",t.textAlign="center",t.fillStyle="#FFF",t.fillText(STREET.utils.getCurrentSceneTitle(),e-e/2,r-43)},l=function(t){o&&o.opened&&(o.sceneHelpers.visible=t),t?document.querySelector("#cameraRig").setAttribute("cursor-teleport","cameraRig: #cameraRig; cameraHead: #camera;"):document.querySelector("#cameraRig").removeAttribute("cursor-teleport")},o=AFRAME.INSPECTOR,s=AFRAME.scenes[0].renderer,l(!1),c=function(){var t=i(e().mark((function t(r){var i,n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=document.querySelector("#screenshotCanvas"))||((i=document.createElement("canvas")).id="screenshotCanvas",i.hidden=!0,document.body.appendChild(i)),i.width=r.width,i.height=r.height,(n=i.getContext("2d")).drawImage(r,0,0),u(n,i.width,i.height),t.next=9,d(n);case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=i(e().mark((function t(r){var i,n,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=document.querySelector("img.viewer-logo-img"),n=document.querySelector("#aframeInspector #logoImg svg"),!i){t.next=6;break}r.drawImage(i,0,0,135,43,40,30,270,86),t.next=12;break;case 6:if(!n){t.next=12;break}return(a=new Image).src="data:image/svg+xml;base64,".concat(window.btoa(n.outerHTML)),t.next=11,new Promise((function(t){a.onload=t}));case 11:r.drawImage(a,0,0,135,23,40,40,270,46);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=r+"."+n,s.render(AFRAME.scenes[0].object3D,AFRAME.scenes[0].camera),t.next=12,c(s.domElement);case 12:h=t.sent,"img"===n&&(a.src=h.toDataURL()),"png"===n?p(m,h.toDataURL("image/png")):"jpg"===n&&p(m,h.toDataURL("image/jpeg",.95)),l(!0);case 16:case"end":return t.stop()}}),t)}))),function(t,e,r){return n.apply(this,arguments)}),update:function(t){0!==Object.keys(t).length&&this.data.takeScreenshot&&(this.data.takeScreenshot=!1,this.takeScreenshotNow(this.data.filename,this.data.type,this.data.imgElementSelector))}})},2411:()=>{function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}AFRAME.registerComponent("street-geo",{schema:{longitude:{type:"number",default:0},latitude:{type:"number",default:0},elevation:{type:"number",default:0},maps:{type:"array",default:[]}},init:function(){this.mapTypes=["mapbox2d","google3d"],this.elevationHeightConstant=32.49158},update:function(e){var r,i=this.data,n=AFRAME.utils.diff(e,i),a=function(e,r){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,r){if(e){if("string"==typeof e)return t(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var t=i.next();return s=t.done,t},e:function(t){l=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw o}}}}(this.mapTypes);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=this[o+"Create"].bind(this);i.maps.includes(o)&&!this[o]?this[o]=s():i.maps.includes(o)&&(n.longitude||n.latitude||n.elevation)?this[o+"Update"].bind(this)():this[o]&&!i.maps.includes(o)&&(this.el.removeChild(this[o]),this[o]=null)}}catch(t){a.e(t)}finally{a.f()}},mapbox2dCreate:function(){var t=this.data,e=this.el,r=document.createElement("a-entity");return r.setAttribute("data-layer-name","Mapbox Satellite Streets"),r.setAttribute("geometry","primitive: plane; width: 512; height: 512;"),r.setAttribute("material","color: #ffffff; shader: flat; side: both; transparent: true;"),r.setAttribute("rotation","-90 -4.25 0"),r.setAttribute("anisotropy",""),r.setAttribute("mapbox",{accessToken:"pk.eyJ1Ijoia2llcmFuZmFyciIsImEiOiJjazB0NWh2YncwOW9rM25sd2p0YTlxemk2In0.mLl4sNGDFbz_QXk0GIK02Q",center:"".concat(t.longitude,", ").concat(t.latitude),zoom:15,style:"mapbox://styles/mapbox/satellite-streets-v11",pxToWorldRatio:4}),r.classList.add("autocreated"),e.appendChild(r),r},google3dCreate:function(){var t=this.data,e=this.el,r=document.createElement("a-entity");return r.setAttribute("data-layer-name","Google 3D Tiles"),r.setAttribute("loader-3dtiles",{url:"https://tile.googleapis.com/v1/3dtiles/root.json",long:t.longitude,lat:t.latitude,height:t.elevation-this.elevationHeightConstant,googleApiKey:"AIzaSyAQshwLVKTpwTfPJxFEkEzOdP_cgmixTCQ",geoTransform:"WGS84Cartesian",maximumSSE:48,maximumMem:400,cameraEl:"#camera"}),r.classList.add("autocreated"),e.appendChild(r),r},google3dUpdate:function(){var t=this.data;this.google3d.setAttribute("loader-3dtiles",{lat:t.latitude,long:t.longitude,height:t.elevation-this.elevationHeightConstant})},mapbox2dUpdate:function(){var t=this.data;this.mapbox2d.setAttribute("mapbox",{center:"".concat(t.longitude,", ").concat(t.latitude)})}})},1394:(t,e,r)=>{var i=r(2480);AFRAME.registerComponent("streetplan-loader",{dependencies:["street"],schema:{streetplanStreetURL:{type:"string"},streetplanAPIURL:{type:"string"},streetplanEncJSON:{type:"string"},showBuildings:{default:!0},name:{default:""}},streetplanResponseParse:function(t){var e,r=this.el,n=this.data,a=t.project,o=i.convertStreetStruct(a),s=o.segments,l=o.name;console.log("streetplanName",l);var c=this.el.sceneEl;c&&c.getAttribute("metadata")&&(e=c.getAttribute("metadata").sceneTitle),e||(c.setAttribute("metadata","sceneTitle",l),console.log("therefore setting metadata sceneTitle as streetplanName",l)),r.setAttribute("data-layer-name","StreetPlan • "+l),n.showBuildings&&(r.setAttribute("street","right",o.rightBuildingVariant),r.setAttribute("street","left",o.leftBuildingVariant)),r.setAttribute("street","type","streetmixSegmentsMetric"),r.setAttribute("street","JSON",JSON.stringify({streetmixSegmentsMetric:s})),r.emit("streetplan-loader-street-loaded")},update:function(t){var e=this,r=this.data;if(r.streetplanEncJSON){var i=decodeURIComponent(r.streetplanEncJSON);this.streetplanResponseParse(JSON.parse(i))}else if(t.streetplanStreetURL!==r.streetplanStreetURL||t.streetplanAPIURL!==r.streetplanAPIURL){var n=new XMLHttpRequest;console.log("[streetplan-loader]","GET "+r.streetplanAPIURL),n.open("GET",r.streetplanAPIURL,!0),n.onload=function(){if(this.status>=200&&this.status<400){var t=JSON.parse(this.response);e.streetplanResponseParse(t)}else console.log("[streetplan-loader]","Loading Error: We reached the target server, but it returned an error")},n.onerror=function(){console.log("[streetplan-loader]","Loading Error: There was a connection error of some sort")},n.send()}}})},608:(t,e,r)=>{var i=r(2072).SVGLoader;AFRAME.registerComponent("svg-extruder",{schema:{svgString:{type:"string"},depth:{type:"number",default:4},bevelEnabled:{type:"boolean",default:!1},bevelThickness:{type:"number",default:1},bevelSize:{type:"number",default:1},bevelOffset:{type:"number",default:1},bevelSegments:{type:"number",default:1},topElement:{type:"boolean",default:!1},topColor:{type:"color",default:"white"},topSrc:{type:"string",default:"#grass-texture"},color:{type:"color",default:"grey"},src:{type:"string",default:""},lineColor:{type:"color",default:"black"}},init:function(){var t=this.el;this.loader=new i,t.removeAttribute("material"),t.setAttribute("shadow","cast: true; receive: true")},createTopEntity:function(t){var e=this.data,r=this.el.children[0];r||((r=document.createElement("a-entity")).classList.add("topElement"),this.el.appendChild(r));var i=this.mergedGeometryFromArray(t);i.translate(0,.15,0);var n=new THREE.Mesh(i,this.materialFromSrc(e.topSrc,e.topColor));r.getObject3D("mesh")&&r.removeObject3D("mesh"),r.setObject3D("mesh",n)},materialFromSrc:function(t,e){var r=null,i=""!==t?document.querySelector(t):null;i&&((r=new THREE.Texture(i)).encoding=THREE.sRGBEncoding,r.wrapS=THREE.RepeatWrapping,r.wrapT=THREE.RepeatWrapping,r.repeat.set(.01,.01));var n=new THREE.MeshStandardMaterial({color:e,map:r,roughness:1});return n.map&&(n.map.needsUpdate=!0),n},mergedGeometryFromArray:function(t){var e=THREE.BufferGeometryUtils.mergeGeometries(t);return e.computeBoundingBox(),e.computeVertexNormals(),e.center(),e.rotateX(Math.PI/2),e.scale(.05,.05,.05),e},extrudeFromSVG:function(t){var e=this.data,r=this.el,n=this.loader.parse(t),a={depth:e.depth,bevelEnabled:e.bevelEnabled,bevelThickness:e.bevelThickness,bevelSize:e.bevelSize,bevelOffset:e.bevelOffset,bevelSegments:e.bevelSegments},o=[],s=[];n.paths.forEach((function(t){i.createShapes(t).forEach((function(t){var e=new THREE.ExtrudeGeometry(t,{depth:1,bevelEnabled:!1}),r=new THREE.ExtrudeGeometry(t,a);s.push(e),o.push(r)}))}));var l=this.mergedGeometryFromArray(o),c=new THREE.LineBasicMaterial({color:e.lineColor}),u=new THREE.EdgesGeometry(l),d=new THREE.LineSegments(u,c);r.setObject3D("lines",d);var p=new THREE.Mesh(l,this.materialFromSrc(e.src,e.color));r.getObject3D("mesh")&&r.removeObject3D("mesh"),r.setObject3D("mesh",p);var m=this.el.children[0];e.topElement?this.createTopEntity(s):m&&r.removeChild(m)},update:function(t){var e=this.data.svgString;e&&this.extrudeFromSVG(e)}})},7554:()=>{function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,n,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=a.call(r)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){c=!0,n=t}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw n}}return s}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=i(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){l=!0,o=t},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw o}}}}function i(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var a;function o(t){if(t.isEntity){var e=function(t){var e={};e.element=t.tagName.toLowerCase(),t.id&&(e.id=t.id),t.className&&(e.class=Array.from(t.classList)),t.getAttribute("mixin")&&(e.mixin=t.getAttribute("mixin")),t.getAttribute("data-layer-name")&&(e["data-layer-name"]=t.getAttribute("data-layer-name"));var r=t.components;if(r){var i=t.getAttribute("geometry");for(var n in i&&i.primitive&&(e.primitive=i.primitive),e.components={},r){var a=p(t,n);a&&(l(a)?e.components[n]="":e.components[n]=s(a))}}return e}(t),i=t.childNodes;if(i.length&&!["environment"].includes(e.id)){e.children=[];var n,a=r(i);try{for(a.s();!(n=a.n()).done;){var c=n.value;c.nodeType===Node.ELEMENT_NODE&&e.children.push(o(c))}}catch(t){a.e(t)}finally{a.f()}}return e}}function s(r){return"string"==typeof r||"number"==typeof r||"boolean"==typeof r||Array.isArray(r)?r.toString():r.isVector3||r.isVector2||r.isVector4||r.hasOwnProperty("x")&&r.hasOwnProperty("y")?AFRAME.utils.coordinates.stringify(r):"object"===e(r)?Object.entries(r).map((function(e){var r=t(e,2),i=r[0],n=r[1];return"src"===i?n.src&&!n.src.includes(a)?"".concat(i,": ").concat(n.src):n.id?"".concat(i,": #").concat(n.id):"".concat(i,": ").concat(n):"".concat(i,": ").concat(s(n))})).join("; "):void 0}function l(t){return 0===Object.keys(t).length}window.STREET={},STREET.utils={},STREET.utils.getCurrentSceneId=function(){var t,e=AFRAME.scenes[0].getAttribute("metadata").sceneId,r=(t=window.location.hash.match(/#\/scenes\/([a-zA-Z0-9-]+)\.json/))&&t[1]?t[1]:null;return e||r&&(e=r),e},STREET.utils.getCurrentSceneTitle=function(){var t=AFRAME.scenes[0].getAttribute("metadata").sceneTitle;return console.log("currentSceneTitle",t),t},STREET.utils.convertDOMElToObject=function(t){var e=[],r=[t,document.querySelector("#environment"),document.querySelector("#reference-layers")];a=document.querySelector("street-assets").getAttribute("url");for(var i=0,n=r;i<n.length;i++){var s=o(n[i]);s&&e.push(s)}return{title:"scene",version:"1.0",data:e}};var c={src:{},normalMap:{},"set-loader-from-hash":"*","create-from-json":"*",street:{JSON:"*"}},u={"streetmix-loader":"not-streetmix-loader",street:"not-street",intersection:"not-intersection"};function d(t,e){if("string"==typeof t&&"string"==typeof e||"number"==typeof t&&"number"==typeof e)return t===e;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var n=0,a=r;n<a.length;n++){var o=a[n];if(t[o]!==e[o])return!1}return!0}function p(e,r){var i=AFRAME.utils.entity.getComponentProperty(e,r);if(!e.components[r])return["id","class","tag","mixin"].includes(r)?null:i;var n,a=e.components[r].schema,o=t(function(t,e,r){for(var i,n=r.mixinEls.reverse(),a=0;void 0===i&&a<n.length;a++){var o=n[a];o.attributes.hasOwnProperty(t.name)&&(i=o.getAttribute(t.name))}return[t.name,i]}(e.components[r],0,e),2),s=o[0],l=o[1];if(l&&["src","atlas-uvs","gltf-model","gltf-part","shadow"].includes(s))return null;if(n=a,AFRAME.schema.isSingleProperty(n)){var c=a.default,u=i;if(l&&d(l,u))return null;if((u||c)&&u!==c)return i}var p={};for(var m in i){var h=a[m]?a[m].default:"",f=i[m];l&&l[m]&&d(l[m],i[m])||!f&&!h||AFRAME.utils.deepEqual(f,h)||(p[m]=i[m])}return p}function m(t,e){var i,n=document.querySelector("a-scene"),a=["environment","reference-layers"],o=r(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;"street-container"===s.id&&s.children&&"default-street"===s.children[0].id&&s.children[0].components["set-loader-from-hash"]&&delete s.children[0].components["set-loader-from-hash"];var l=document.getElementById(s.id);l&&(a.includes(s.id)?l.remove():s.entityElement=l),h(s,n)}}catch(t){o.e(t)}finally{o.f()}}function h(t,e){var a,o,s=t.entityElement||document.createElement(t.element);!s.parentEl&&e&&e.appendChild(s),t.primitive&&s.setAttribute("geometry","primitive",t.primitive);for(var l=0,c=["geometry","material"];l<c.length;l++){var u=c[l];t.components[u]&&(s.setAttribute(u,t.components[u]),delete t.components[u])}if(t.id&&s.setAttribute("id",t.id),t.class&&(a=s.classList).add.apply(a,function(t){if(Array.isArray(t))return n(t)}(o=t.class)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||i(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),t["data-layer-name"]&&s.setAttribute("data-layer-name",t["data-layer-name"]),s.addEventListener("loaded",(function(){for(var e in t.components)s.setAttribute(e,t.components[e]);t.mixin&&s.setAttribute("mixin",t.mixin),s.emit("entitycreated",{},!1)})),t.children){var d,p=r(t.children);try{for(p.s();!(d=p.n()).done;)h(d.value,s)}catch(t){p.e(t)}finally{p.f()}}}function f(t){var r={};if("string"==typeof t){var i=t.replace(/'/g,"").replace(/\n/g,"").replace(/[\u0000-\u0019]+/g,"");r=JSON.parse(i)}else"object"===e(t)&&(r=t);var n=r.title;n&&(console.log("sceneTitle from createElementsFromJSON",n),AFRAME.scenes[0].setAttribute("metadata","sceneTitle",n));for(var a=document.getElementById("street-container");a.firstChild;)a.removeChild(a.lastChild);m(r.data),STREET.notify.successMessage("Scene loaded from JSON")}STREET.utils.filterJSONstreet=function(t){function r(t,e){if(AFRAME.utils.deepEqual(t,e)||"*"===t)return!0}var i=JSON.stringify(t,(function(t,i){var n;for(var a in c)if(t===a){n=AFRAME.utils.styleParser.parse(i);var o=c[a];if("object"===e(o)&&!l(o))for(var s=0,u=Object.keys(o);s<u.length;s++){var d=u[s],p=o[d];Object.prototype.hasOwnProperty.call(n,d)&&r(p,n[d])&&delete n[d]}if(r(o,i))return}return n||i}));for(var n in u){var a=new RegExp('"'.concat(n,'":'),"g");i=i.replaceAll(a,'"'.concat(u[n],'":'))}return i},STREET.utils.createEntities=m,AFRAME.registerComponent("metadata",{schema:{sceneTitle:{default:""},sceneId:{default:""}},init:function(){},update:function(t){var e=this.data.sceneTitle;e!==t.sceneTitle&&this.el.emit("newTitle",{sceneTitle:e})}}),AFRAME.registerComponent("scene-title",{schema:{titleText:{default:""}},init:function(){var t=this;this.titleElement=void 0,this.el.addEventListener("newTitle",(function(e){t.el.setAttribute("scene-title","titleText",e.detail.sceneTitle)}))},createTitleElement:function(t){var e=this.titleElement=document.createElement("div"),r=document.createTextNode(t);e.setAttribute("id","sceneTitle"),e.appendChild(r),document.body.append(e)},updateTitleText:function(t){this.titleElement.textContent=t},update:function(t){if(0!==Object.keys(t).length){var e=this.data.titleText,r=this.titleElement;e!==t.titleText&&(r?this.updateTitleText(e):this.createTitleElement(e))}}}),AFRAME.registerComponent("set-loader-from-hash",{schema:{defaultURL:{type:"string"}},init:function(){this.runOnce=!1},play:function(){if(!this.runOnce){this.runOnce=!0;var t=window.location.hash.substring(1);if(!t)return;t.includes("//streetmix.net")?(console.log("[set-loader-from-hash]","Set streetmix-loader streetmixStreetURL to",t),this.el.setAttribute("streetmix-loader","streetmixStreetURL",t)):t.includes("streetplan.net/")?(console.log("[set-loader-from-hash]","Set streetplan-loader streetplanAPIURL to",t),this.el.setAttribute("streetplan-loader","streetplanAPIURL",t)):(console.log("[set-loader-from-hash]","Load 3DStreet scene with fetchJSON from",t),this.fetchJSON(t))}},fetchJSON:function(t){var e=new XMLHttpRequest;e.open("GET",t,!0),e.onload=function(){if(this.status>=200&&this.status<400){var e=JSON.parse(this.response,(function(t,e){return"set-loader-from-hash"===t?void 0:e}));console.log("[set-loader-from-hash]","200 response received and JSON parsed, now createElementsFromJSON"),STREET.utils.createElementsFromJSON(e);var r=(i=t.match(/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/))?i[0]:null;r&&(console.log("sceneId from fetchJSON from url hash loader",r),AFRAME.scenes[0].setAttribute("metadata","sceneId",r))}else 404===this.status&&(console.error("[set-loader-from-hash] Error trying to load scene: Resource not found."),STREET.notify.errorMessage("Error trying to load scene: Resource not found."));var i},e.onerror=function(){console.error("Loading Error: There was a connection error during JSON loading"),STREET.notify.errorMessage("Could not fetch scene.")},e.send()}}),STREET.utils.inputStreetmix=function(){var t=prompt("Please enter a Streetmix URL","https://streetmix.net/kfarr/3/example-street");setTimeout((function(){window.location.hash=t}));for(var e=document.getElementById("street-container");e.firstChild;)e.removeChild(e.lastChild);AFRAME.scenes[0].setAttribute("metadata","sceneId",""),AFRAME.scenes[0].setAttribute("metadata","sceneTitle",""),e.innerHTML='<a-entity street streetmix-loader="streetmixStreetURL: '+t+'""></a-entity>'},STREET.utils.createElementsFromJSON=f,STREET.utils.fileJSON=function(){var t=new FileReader;t.onload=function(){AFRAME.scenes[0].setAttribute("metadata","sceneId",""),AFRAME.scenes[0].setAttribute("metadata","sceneTitle",""),f(t.result)},t.readAsText(this.files[0])}},2072:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,n,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=a.call(r)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){c=!0,n=t}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw n}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function n(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,a(i.key),i)}}function a(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:r+""}function o(t,r,i){return r=l(r),function(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(r,i||[],l(t).constructor):r.apply(t,i))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}var u=THREE,d=u.Box2,p=u.BufferGeometry,m=u.FileLoader,h=u.Float32BufferAttribute,f=u.Loader,g=u.Matrix3,y=u.Path,b=u.Shape,v=u.ShapePath,x=u.ShapeUtils,w=u.SRGBColorSpace,A=u.Vector2,E=u.Vector3,S=w,k=function(t){function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o(this,i,[t])).defaultDPI=90,e.defaultUnit="px",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(i,t),a=i,l=[{key:"createShapes",value:function(t){var e=999999999,r={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},i={loc:r.ORIGIN,t:0};function n(t,e,n,o){var s=t.x,l=e.x,c=n.x,u=o.x,d=t.y,p=e.y,m=n.y,h=o.y,f=(u-c)*(d-m)-(h-m)*(s-c),g=(h-m)*(l-s)-(u-c)*(p-d),y=f/g,b=((l-s)*(d-m)-(p-d)*(s-c))/g;if(0===g&&0!==f||y<=0||y>=1||b<0||b>1)return null;if(0===f&&0===g){for(var v=0;v<2;v++){if(a(0===v?n:o,t,e),i.loc==r.ORIGIN){var x=0===v?n:o;return{x:x.x,y:x.y,t:i.t}}if(i.loc==r.BETWEEN)return{x:+(s+i.t*(l-s)).toPrecision(10),y:+(d+i.t*(p-d)).toPrecision(10),t:i.t}}return null}for(var w=0;w<2;w++)if(a(0===w?n:o,t,e),i.loc==r.ORIGIN){var A=0===w?n:o;return{x:A.x,y:A.y,t:i.t}}return{x:+(s+y*(l-s)).toPrecision(10),y:+(d+y*(p-d)).toPrecision(10),t:y}}function a(t,e,n){var a,o=n.x-e.x,s=n.y-e.y,l=t.x-e.x,c=t.y-e.y,u=o*c-l*s;return t.x===e.x&&t.y===e.y?(i.loc=r.ORIGIN,void(i.t=0)):t.x===n.x&&t.y===n.y?(i.loc=r.DESTINATION,void(i.t=1)):void(u<-Number.EPSILON?i.loc=r.LEFT:u>Number.EPSILON?i.loc=r.RIGHT:o*l<0||s*c<0?i.loc=r.BEHIND:Math.sqrt(o*o+s*s)<Math.sqrt(l*l+c*c)?i.loc=r.BEYOND:(a=0!==o?l/o:c/s,i.loc=r.BETWEEN,i.t=a))}var o=e,s=-999999999,l=t.subPaths.map((function(t){for(var r=t.getPoints(),i=-999999999,n=e,a=-999999999,l=e,c=0;c<r.length;c++){var u=r[c];u.y>i&&(i=u.y),u.y<n&&(n=u.y),u.x>a&&(a=u.x),u.x<l&&(l=u.x)}return s<=a&&(s=a+1),o>=l&&(o=l-1),{curves:t.curves,points:r,isCW:x.isClockWise(r),identifier:-1,boundingBox:new d(new A(l,n),new A(a,i))}}));l=l.filter((function(t){return t.points.length>1}));for(var c=0;c<l.length;c++)l[c].identifier=c;var u=l.map((function(e){return function(t,e,r,i,a){null!=a&&""!==a||(a="nonzero");var o=new A;t.boundingBox.getCenter(o);var s=function(t,e,r){var i=new A;e.getCenter(i);var a=[];return r.forEach((function(e){e.boundingBox.containsPoint(i)&&function(t,e){for(var r=[],i=[],a=1;a<t.length;a++)for(var o=t[a-1],s=t[a],l=function(){var t=e[c-1],a=e[c],l=n(o,s,t,a);null!==l&&void 0===r.find((function(t){return t.t<=l.t+Number.EPSILON&&t.t>=l.t-Number.EPSILON}))&&(r.push(l),i.push(new A(l.x,l.y)))},c=1;c<e.length;c++)l();return i}(t,e.points).forEach((function(t){a.push({identifier:e.identifier,isCW:e.isCW,point:t})}))})),a.sort((function(t,e){return t.point.x-e.point.x})),a}([new A(r,o.y),new A(i,o.y)],t.boundingBox,e);s.sort((function(t,e){return t.point.x-e.point.x}));var l=[],c=[];s.forEach((function(e){e.identifier===t.identifier?l.push(e):c.push(e)}));for(var u=l[0].point.x,d=[],p=0;p<c.length&&c[p].point.x<u;)d.length>0&&d[d.length-1]===c[p].identifier?d.pop():d.push(c[p].identifier),p++;if(d.push(t.identifier),"evenodd"===a){var m=d.length%2==0,h=d[d.length-2];return{identifier:t.identifier,isHole:m,for:h}}if("nonzero"===a){for(var f=!0,g=null,y=null,b=0;b<d.length;b++){var v=d[b];f?(y=e[v].isCW,f=!1,g=v):y!==e[v].isCW&&(y=e[v].isCW,f=!0)}return{identifier:t.identifier,isHole:f,for:g}}console.warn('fill-rule: "'+a+'" is currently not implemented.')}(e,l,o,s,t.userData?t.userData.style.fillRule:void 0)})),p=[];return l.forEach((function(t){if(!u[t.identifier].isHole){var e=new b;e.curves=t.curves,u.filter((function(e){return e.isHole&&e.for===t.identifier})).forEach((function(t){var r=l[t.identifier],i=new y;i.curves=r.curves,e.holes.push(i)})),p.push(e)}})),p}},{key:"getStrokeStyle",value:function(t,e,r,i,n){return{strokeColor:e=void 0!==e?e:"#000",strokeWidth:t=void 0!==t?t:1,strokeLineJoin:r=void 0!==r?r:"miter",strokeLineCap:i=void 0!==i?i:"butt",strokeMiterLimit:n=void 0!==n?n:4}}},{key:"pointsToStroke",value:function(t,e,r,n){var a=[],o=[],s=[];if(0===i.pointsToStrokeWithBuffers(t,e,r,n,a,o,s))return null;var l=new p;return l.setAttribute("position",new h(a,3)),l.setAttribute("normal",new h(o,3)),l.setAttribute("uv",new h(s,2)),l}},{key:"pointsToStrokeWithBuffers",value:function(t,e,r,i,n,a,o,s){var l=new A,c=new A,u=new A,d=new A,p=new A,m=new A,h=new A,f=new A,g=new A,y=new A,b=new A,v=new A,x=new A,w=new A,E=new A,S=new A,k=new A;r=void 0!==r?r:12,i=void 0!==i?i:.001,s=void 0!==s?s:0;var T=(t=function(t){for(var e=!1,r=1,n=t.length-1;r<n;r++)if(t[r].distanceTo(t[r+1])<i){e=!0;break}if(!e)return t;var a=[];a.push(t[0]);for(var o=1,s=t.length-1;o<s;o++)t[o].distanceTo(t[o+1])>=i&&a.push(t[o]);return a.push(t[t.length-1]),a}(t)).length;if(T<2)return 0;var M,_,C,R,O,N,P=t[0].equals(t[T-1]),j=t[0],I=e.strokeWidth/2,L=1/(T-1),B=0,F=!1,D=0,z=3*s,H=2*s;K(t[0],t[1],l).multiplyScalar(I),f.copy(t[0]).sub(l),g.copy(t[0]).add(l),y.copy(f),b.copy(g);for(var V=1;V<T;V++){M=t[V],_=V===T-1?P?t[1]:void 0:t[V+1];var G=l;if(K(j,M,G),u.copy(G).multiplyScalar(I),v.copy(M).sub(u),x.copy(M).add(u),C=B+L,R=!1,void 0!==_){K(M,_,c),u.copy(c).multiplyScalar(I),w.copy(M).sub(u),E.copy(M).add(u),O=!0,u.subVectors(_,j),G.dot(u)<0&&(O=!1),1===V&&(F=O),u.subVectors(_,M),u.normalize();var U=Math.abs(G.dot(u));if(U>Number.EPSILON){var Y=I/U;u.multiplyScalar(-Y),d.subVectors(M,j),p.copy(d).setLength(Y).add(u),S.copy(p).negate();var q=p.length(),W=d.length();d.divideScalar(W),m.subVectors(_,M);var J=m.length();switch(m.divideScalar(J),d.dot(S)<W&&m.dot(S)<J&&(R=!0),k.copy(p).add(M),S.add(M),N=!1,R?O?(E.copy(S),x.copy(S)):(w.copy(S),v.copy(S)):et(),e.strokeLineJoin){case"bevel":rt(O,R,C);break;case"round":it(O,R),O?tt(M,v,w,C,0):tt(M,E,x,C,1);break;default:var X=I*e.strokeMiterLimit/q;if(X<1){if("miter-clip"!==e.strokeLineJoin){rt(O,R,C);break}it(O,R),O?(m.subVectors(k,v).multiplyScalar(X).add(v),h.subVectors(k,w).multiplyScalar(X).add(w),$(v,C,0),$(m,C,0),$(M,C,.5),$(M,C,.5),$(m,C,0),$(h,C,0),$(M,C,.5),$(h,C,0),$(w,C,0)):(m.subVectors(k,x).multiplyScalar(X).add(x),h.subVectors(k,E).multiplyScalar(X).add(E),$(x,C,1),$(m,C,1),$(M,C,.5),$(M,C,.5),$(m,C,1),$(h,C,1),$(M,C,.5),$(h,C,1),$(E,C,1))}else R?(O?($(g,B,1),$(f,B,0),$(k,C,0),$(g,B,1),$(k,C,0),$(S,C,1)):($(g,B,1),$(f,B,0),$(k,C,1),$(f,B,0),$(S,C,0),$(k,C,1)),O?w.copy(k):E.copy(k)):O?($(v,C,0),$(k,C,0),$(M,C,.5),$(M,C,.5),$(k,C,0),$(w,C,0)):($(x,C,1),$(k,C,1),$(M,C,.5),$(M,C,.5),$(k,C,1),$(E,C,1)),N=!0}}else et()}else et();P||V!==T-1||nt(t[0],y,b,O,!0,B),B=C,j=M,f.copy(w),g.copy(E)}if(P){if(R&&n){var Q=k,Z=S;F!==O&&(Q=S,Z=k),O?(N||F)&&(Z.toArray(n,0),Z.toArray(n,9),N&&Q.toArray(n,3)):!N&&F||(Z.toArray(n,3),Z.toArray(n,9),N&&Q.toArray(n,0))}}else nt(M,v,x,O,!1,C);return D;function K(t,e,r){return r.subVectors(e,t),r.set(-r.y,r.x).normalize()}function $(t,e,r){n&&(n[z]=t.x,n[z+1]=t.y,n[z+2]=0,a&&(a[z]=0,a[z+1]=0,a[z+2]=1),z+=3,o&&(o[H]=e,o[H+1]=r,H+=2)),D+=3}function tt(t,e,i,n,a){l.copy(e).sub(t).normalize(),c.copy(i).sub(t).normalize();var o=Math.PI,s=l.dot(c);Math.abs(s)<1&&(o=Math.abs(Math.acos(s))),o/=r,u.copy(e);for(var p=0,m=r-1;p<m;p++)d.copy(u).rotateAround(t,o),$(u,n,a),$(d,n,a),$(t,n,.5),u.copy(d);$(d,n,a),$(i,n,a),$(t,n,.5)}function et(){$(g,B,1),$(f,B,0),$(v,C,0),$(g,B,1),$(v,C,0),$(x,C,1)}function rt(t,e,r){e?t?($(g,B,1),$(f,B,0),$(v,C,0),$(g,B,1),$(v,C,0),$(S,C,1),$(v,r,0),$(w,r,0),$(S,r,.5)):($(g,B,1),$(f,B,0),$(x,C,1),$(f,B,0),$(S,C,0),$(x,C,1),$(x,r,1),$(S,r,0),$(E,r,1)):t?($(v,r,0),$(w,r,0),$(M,r,.5)):($(x,r,1),$(E,r,0),$(M,r,.5))}function it(t,e){e&&(t?($(g,B,1),$(f,B,0),$(v,C,0),$(g,B,1),$(v,C,0),$(S,C,1),$(v,B,0),$(M,C,.5),$(S,C,1),$(M,C,.5),$(w,B,0),$(S,C,1)):($(g,B,1),$(f,B,0),$(x,C,1),$(f,B,0),$(S,C,0),$(x,C,1),$(x,B,1),$(S,C,0),$(M,C,.5),$(M,C,.5),$(S,C,0),$(E,B,1)))}function nt(t,r,i,a,s,p){switch(e.strokeLineCap){case"round":s?tt(t,i,r,p,.5):tt(t,r,i,p,.5);break;case"square":if(s)l.subVectors(r,t),c.set(l.y,-l.x),u.addVectors(l,c).add(t),d.subVectors(c,l).add(t),a?(u.toArray(n,3),d.toArray(n,0),d.toArray(n,9)):(u.toArray(n,3),1===o[7]?d.toArray(n,9):u.toArray(n,9),d.toArray(n,0));else{l.subVectors(i,t),c.set(l.y,-l.x),u.addVectors(l,c).add(t),d.subVectors(c,l).add(t);var m=n.length;a?(u.toArray(n,m-3),d.toArray(n,m-6),d.toArray(n,m-12)):(d.toArray(n,m-6),u.toArray(n,m-3),d.toArray(n,m-12))}}}}}],(s=[{key:"load",value:function(t,e,r,i){var n=this,a=new m(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.setWithCredentials(n.withCredentials),a.load(t,(function(r){try{e(n.parse(r))}catch(e){i?i(e):console.error(e),n.manager.itemError(t)}}),r,i)}},{key:"parse",value:function(t){var i=this;function n(t,e,r,i,n,o,s,l){if(0!=e&&0!=r){i=i*Math.PI/180,e=Math.abs(e),r=Math.abs(r);var c=(s.x-l.x)/2,u=(s.y-l.y)/2,d=Math.cos(i)*c+Math.sin(i)*u,p=-Math.sin(i)*c+Math.cos(i)*u,m=e*e,h=r*r,f=d*d,g=p*p,y=f/m+g/h;if(y>1){var b=Math.sqrt(y);m=(e*=b)*e,h=(r*=b)*r}var v=m*g+h*f,x=(m*h-v)/v,w=Math.sqrt(Math.max(0,x));n===o&&(w=-w);var A=w*e*p/r,E=-w*r*d/e,S=Math.cos(i)*A-Math.sin(i)*E+(s.x+l.x)/2,k=Math.sin(i)*A+Math.cos(i)*E+(s.y+l.y)/2,T=a(1,0,(d-A)/e,(p-E)/r),M=a((d-A)/e,(p-E)/r,(-d-A)/e,(-p-E)/r)%(2*Math.PI);t.currentPath.absellipse(S,k,e,r,T,T+M,0===o,i)}else t.lineTo(l.x,l.y)}function a(t,e,r,i){var n=t*r+e*i,a=Math.sqrt(t*t+e*e)*Math.sqrt(r*r+i*i),o=Math.acos(Math.max(-1,Math.min(1,n/a)));return t*i-e*r<0&&(o=-o),o}function o(t,e){e=Object.assign({},e);var r={};if(t.hasAttribute("class"))for(var i=t.getAttribute("class").split(/\s/).filter(Boolean).map((function(t){return t.trim()})),n=0;n<i.length;n++)r=Object.assign(r,x["."+i[n]]);function a(i,n,a){void 0===a&&(a=function(t){return t.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),t}),t.hasAttribute(i)&&(e[n]=a(t.getAttribute(i))),r[i]&&(e[n]=a(r[i])),t.style&&""!==t.style[i]&&(e[n]=a(t.style[i]))}function o(t){return Math.max(0,Math.min(1,d(t)))}function s(t){return Math.max(0,d(t))}return t.hasAttribute("id")&&(r=Object.assign(r,x["#"+t.getAttribute("id")])),a("fill","fill"),a("fill-opacity","fillOpacity",o),a("fill-rule","fillRule"),a("opacity","opacity",o),a("stroke","stroke"),a("stroke-opacity","strokeOpacity",o),a("stroke-width","strokeWidth",s),a("stroke-linejoin","strokeLineJoin"),a("stroke-linecap","strokeLineCap"),a("stroke-miterlimit","strokeMiterLimit",s),a("visibility","visibility"),e}function s(t,e){return t-(e-t)}function l(t,r,i){if("string"!=typeof t)throw new TypeError("Invalid input: "+e(t));var n,a={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},o=0,s=!0,l="",c="",u=[];function d(t,e,r){var i=new SyntaxError('Unexpected character "'+t+'" at index '+e+".");throw i.partial=r,i}function p(){""!==l&&(""===c?u.push(Number(l)):u.push(Number(l)*Math.pow(10,Number(c)))),l="",c=""}for(var m=t.length,h=0;h<m;h++)if(n=t[h],Array.isArray(r)&&r.includes(u.length%i)&&a.FLAGS.test(n))o=1,l=n,p();else{if(0===o){if(a.WHITESPACE.test(n))continue;if(a.DIGIT.test(n)||a.SIGN.test(n)){o=1,l=n;continue}if(a.POINT.test(n)){o=2,l=n;continue}a.COMMA.test(n)&&(s&&d(n,h,u),s=!0)}if(1===o){if(a.DIGIT.test(n)){l+=n;continue}if(a.POINT.test(n)){l+=n,o=2;continue}if(a.EXP.test(n)){o=3;continue}a.SIGN.test(n)&&1===l.length&&a.SIGN.test(l[0])&&d(n,h,u)}if(2===o){if(a.DIGIT.test(n)){l+=n;continue}if(a.EXP.test(n)){o=3;continue}a.POINT.test(n)&&"."===l[l.length-1]&&d(n,h,u)}if(3===o){if(a.DIGIT.test(n)){c+=n;continue}if(a.SIGN.test(n)){if(""===c){c+=n;continue}1===c.length&&a.SIGN.test(c)&&d(n,h,u)}}a.WHITESPACE.test(n)?(p(),o=0,s=!1):a.COMMA.test(n)?(p(),o=0,s=!0):a.SIGN.test(n)?(p(),o=1,l=n):a.POINT.test(n)?(p(),o=2,l=n):d(n,h,u)}return p(),u}var c=["mm","cm","in","pt","pc","px"],u={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function d(t){var e="px";if("string"==typeof t||t instanceof String)for(var r=0,n=c.length;r<n;r++){var a=c[r];if(t.endsWith(a)){e=a,t=t.substring(0,t.length-a.length);break}}var o=void 0;return"px"===e&&"px"!==i.defaultUnit?o=u.in[i.defaultUnit]/i.defaultDPI:(o=u[e][i.defaultUnit])<0&&(o=u[e].in*i.defaultDPI),o*parseFloat(t)}function p(t){var e=t.elements;return e[0]*e[4]-e[1]*e[3]<0}function m(t){var e=t.elements,r=e[0]*e[3]+e[1]*e[4];if(0===r)return!1;var i=h(t),n=f(t);return Math.abs(r/(i*n))>Number.EPSILON}function h(t){var e=t.elements;return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function f(t){var e=t.elements;return Math.sqrt(e[3]*e[3]+e[4]*e[4])}var b=[],x={},w=[],k=new g,T=new g,M=new g,_=new g,C=new A,R=new E,O=new g,N=(new DOMParser).parseFromString(t,"image/svg+xml");return function t(e,i){if(1===e.nodeType){var a=function(t){if(!(t.hasAttribute("transform")||"use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))))return null;var e=function(t){var e=new g,r=k;if("use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))){var i=d(t.getAttribute("x")),n=d(t.getAttribute("y"));e.translate(i,n)}if(t.hasAttribute("transform"))for(var a=t.getAttribute("transform").split(")"),o=a.length-1;o>=0;o--){var s=a[o].trim();if(""!==s){var c=s.indexOf("("),u=s.length;if(c>0&&c<u){var p=s.slice(0,c),m=l(s.slice(c+1));switch(r.identity(),p){case"translate":if(m.length>=1){var h=m[0],f=0;m.length>=2&&(f=m[1]),r.translate(h,f)}break;case"rotate":if(m.length>=1){var y,b=0,v=0;y=m[0]*Math.PI/180,m.length>=3&&(b=m[1],v=m[2]),T.makeTranslation(-b,-v),M.makeRotation(y),_.multiplyMatrices(M,T),T.makeTranslation(b,v),r.multiplyMatrices(T,_)}break;case"scale":if(m.length>=1){var x=m[0],w=x;m.length>=2&&(w=m[1]),r.scale(x,w)}break;case"skewX":1===m.length&&r.set(1,Math.tan(m[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===m.length&&r.set(1,0,0,Math.tan(m[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===m.length&&r.set(m[0],m[2],m[4],m[1],m[3],m[5],0,0,1)}}e.premultiply(r)}}return e}(t);return w.length>0&&e.premultiply(w[w.length-1]),O.copy(e),w.push(e),e}(e),c=!1,u=null;switch(e.nodeName){case"svg":case"g":i=o(e,i);break;case"style":!function(t){if(t.sheet&&t.sheet.cssRules&&t.sheet.cssRules.length)for(var e=0;e<t.sheet.cssRules.length;e++){var i=t.sheet.cssRules[e];if(1===i.type)for(var n=i.selectorText.split(/,/gm).filter(Boolean).map((function(t){return t.trim()})),a=0;a<n.length;a++){var o=Object.fromEntries(Object.entries(i.style).filter((function(t){return""!==r(t,2)[1]})));x[n[a]]=Object.assign(x[n[a]]||{},o)}}}(e);break;case"path":i=o(e,i),e.hasAttribute("d")&&(u=function(t){var e=new v,r=new A,i=new A,a=new A,o=!0,c=!1,u=t.getAttribute("d");if(""===u||"none"===u)return null;for(var d=u.match(/[a-df-z][^a-df-z]*/gi),p=0,m=d.length;p<m;p++){var h=d[p],f=h.charAt(0),g=h.slice(1).trim();!0===o&&(c=!0,o=!1);var y=void 0;switch(f){case"M":for(var b=0,x=(y=l(g)).length;b<x;b+=2)r.x=y[b+0],r.y=y[b+1],i.x=r.x,i.y=r.y,0===b?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y),0===b&&a.copy(r);break;case"H":for(var w=0,E=(y=l(g)).length;w<E;w++)r.x=y[w],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===w&&!0===c&&a.copy(r);break;case"V":for(var S=0,k=(y=l(g)).length;S<k;S++)r.y=y[S],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===S&&!0===c&&a.copy(r);break;case"L":for(var T=0,M=(y=l(g)).length;T<M;T+=2)r.x=y[T+0],r.y=y[T+1],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===T&&!0===c&&a.copy(r);break;case"C":for(var _=0,C=(y=l(g)).length;_<C;_+=6)e.bezierCurveTo(y[_+0],y[_+1],y[_+2],y[_+3],y[_+4],y[_+5]),i.x=y[_+2],i.y=y[_+3],r.x=y[_+4],r.y=y[_+5],0===_&&!0===c&&a.copy(r);break;case"S":for(var R=0,O=(y=l(g)).length;R<O;R+=4)e.bezierCurveTo(s(r.x,i.x),s(r.y,i.y),y[R+0],y[R+1],y[R+2],y[R+3]),i.x=y[R+0],i.y=y[R+1],r.x=y[R+2],r.y=y[R+3],0===R&&!0===c&&a.copy(r);break;case"Q":for(var N=0,P=(y=l(g)).length;N<P;N+=4)e.quadraticCurveTo(y[N+0],y[N+1],y[N+2],y[N+3]),i.x=y[N+0],i.y=y[N+1],r.x=y[N+2],r.y=y[N+3],0===N&&!0===c&&a.copy(r);break;case"T":for(var j=0,I=(y=l(g)).length;j<I;j+=2){var L=s(r.x,i.x),B=s(r.y,i.y);e.quadraticCurveTo(L,B,y[j+0],y[j+1]),i.x=L,i.y=B,r.x=y[j+0],r.y=y[j+1],0===j&&!0===c&&a.copy(r)}break;case"A":for(var F=0,D=(y=l(g,[3,4],7)).length;F<D;F+=7)if(y[F+5]!=r.x||y[F+6]!=r.y){var z=r.clone();r.x=y[F+5],r.y=y[F+6],i.x=r.x,i.y=r.y,n(e,y[F],y[F+1],y[F+2],y[F+3],y[F+4],z,r),0===F&&!0===c&&a.copy(r)}break;case"m":for(var H=0,V=(y=l(g)).length;H<V;H+=2)r.x+=y[H+0],r.y+=y[H+1],i.x=r.x,i.y=r.y,0===H?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y),0===H&&a.copy(r);break;case"h":for(var G=0,U=(y=l(g)).length;G<U;G++)r.x+=y[G],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===G&&!0===c&&a.copy(r);break;case"v":for(var Y=0,q=(y=l(g)).length;Y<q;Y++)r.y+=y[Y],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===Y&&!0===c&&a.copy(r);break;case"l":for(var W=0,J=(y=l(g)).length;W<J;W+=2)r.x+=y[W+0],r.y+=y[W+1],i.x=r.x,i.y=r.y,e.lineTo(r.x,r.y),0===W&&!0===c&&a.copy(r);break;case"c":for(var X=0,Q=(y=l(g)).length;X<Q;X+=6)e.bezierCurveTo(r.x+y[X+0],r.y+y[X+1],r.x+y[X+2],r.y+y[X+3],r.x+y[X+4],r.y+y[X+5]),i.x=r.x+y[X+2],i.y=r.y+y[X+3],r.x+=y[X+4],r.y+=y[X+5],0===X&&!0===c&&a.copy(r);break;case"s":for(var Z=0,K=(y=l(g)).length;Z<K;Z+=4)e.bezierCurveTo(s(r.x,i.x),s(r.y,i.y),r.x+y[Z+0],r.y+y[Z+1],r.x+y[Z+2],r.y+y[Z+3]),i.x=r.x+y[Z+0],i.y=r.y+y[Z+1],r.x+=y[Z+2],r.y+=y[Z+3],0===Z&&!0===c&&a.copy(r);break;case"q":for(var $=0,tt=(y=l(g)).length;$<tt;$+=4)e.quadraticCurveTo(r.x+y[$+0],r.y+y[$+1],r.x+y[$+2],r.y+y[$+3]),i.x=r.x+y[$+0],i.y=r.y+y[$+1],r.x+=y[$+2],r.y+=y[$+3],0===$&&!0===c&&a.copy(r);break;case"t":for(var et=0,rt=(y=l(g)).length;et<rt;et+=2){var it=s(r.x,i.x),nt=s(r.y,i.y);e.quadraticCurveTo(it,nt,r.x+y[et+0],r.y+y[et+1]),i.x=it,i.y=nt,r.x=r.x+y[et+0],r.y=r.y+y[et+1],0===et&&!0===c&&a.copy(r)}break;case"a":for(var at=0,ot=(y=l(g,[3,4],7)).length;at<ot;at+=7)if(0!=y[at+5]||0!=y[at+6]){var st=r.clone();r.x+=y[at+5],r.y+=y[at+6],i.x=r.x,i.y=r.y,n(e,y[at],y[at+1],y[at+2],y[at+3],y[at+4],st,r),0===at&&!0===c&&a.copy(r)}break;case"Z":case"z":e.currentPath.autoClose=!0,e.currentPath.curves.length>0&&(r.copy(a),e.currentPath.currentPoint.copy(r),o=!0);break;default:console.warn(h)}c=!1}return e}(e));break;case"rect":i=o(e,i),u=function(t){var e=d(t.getAttribute("x")||0),r=d(t.getAttribute("y")||0),i=d(t.getAttribute("rx")||t.getAttribute("ry")||0),n=d(t.getAttribute("ry")||t.getAttribute("rx")||0),a=d(t.getAttribute("width")),o=d(t.getAttribute("height")),s=.448084975506,l=new v;return l.moveTo(e+i,r),l.lineTo(e+a-i,r),(0!==i||0!==n)&&l.bezierCurveTo(e+a-i*s,r,e+a,r+n*s,e+a,r+n),l.lineTo(e+a,r+o-n),(0!==i||0!==n)&&l.bezierCurveTo(e+a,r+o-n*s,e+a-i*s,r+o,e+a-i,r+o),l.lineTo(e+i,r+o),(0!==i||0!==n)&&l.bezierCurveTo(e+i*s,r+o,e,r+o-n*s,e,r+o-n),l.lineTo(e,r+n),(0!==i||0!==n)&&l.bezierCurveTo(e,r+n*s,e+i*s,r,e+i,r),l}(e);break;case"polygon":i=o(e,i),u=function(t){var e=new v,r=0;return t.getAttribute("points").replace(/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,(function(t,i,n){var a=d(i),o=d(n);0===r?e.moveTo(a,o):e.lineTo(a,o),r++})),e.currentPath.autoClose=!0,e}(e);break;case"polyline":i=o(e,i),u=function(t){var e=new v,r=0;return t.getAttribute("points").replace(/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,(function(t,i,n){var a=d(i),o=d(n);0===r?e.moveTo(a,o):e.lineTo(a,o),r++})),e.currentPath.autoClose=!1,e}(e);break;case"circle":i=o(e,i),u=function(t){var e=d(t.getAttribute("cx")||0),r=d(t.getAttribute("cy")||0),i=d(t.getAttribute("r")||0),n=new y;n.absarc(e,r,i,0,2*Math.PI);var a=new v;return a.subPaths.push(n),a}(e);break;case"ellipse":i=o(e,i),u=function(t){var e=d(t.getAttribute("cx")||0),r=d(t.getAttribute("cy")||0),i=d(t.getAttribute("rx")||0),n=d(t.getAttribute("ry")||0),a=new y;a.absellipse(e,r,i,n,0,2*Math.PI);var o=new v;return o.subPaths.push(a),o}(e);break;case"line":i=o(e,i),u=function(t){var e=d(t.getAttribute("x1")||0),r=d(t.getAttribute("y1")||0),i=d(t.getAttribute("x2")||0),n=d(t.getAttribute("y2")||0),a=new v;return a.moveTo(e,r),a.lineTo(i,n),a.currentPath.autoClose=!1,a}(e);break;case"defs":c=!0;break;case"use":i=o(e,i);var N=(e.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),P=e.viewportElement.getElementById(N);P?t(P,i):console.warn("SVGLoader: 'use node' references non-existent node id: "+N)}u&&(void 0!==i.fill&&"none"!==i.fill&&u.color.setStyle(i.fill,S),function(t,e){function r(t){R.set(t.x,t.y,1).applyMatrix3(e),t.set(R.x,R.y)}function i(t){var r,i,n,a,o,s,l,c,u,d,m,h=t.xRadius,f=t.yRadius,g=Math.cos(t.aRotation),y=Math.sin(t.aRotation),b=new E(h*g,h*y,0),v=new E(-f*y,f*g,0),x=b.applyMatrix3(e),w=v.applyMatrix3(e),A=k.set(x.x,w.x,0,x.y,w.y,0,0,0,1),S=T.copy(A).invert(),_=M.copy(S).transpose().multiply(S).elements,C=(r=_[0],i=_[1],u=r+(n=_[4]),d=r-n,m=Math.sqrt(d*d+4*i*i),u>0?o=r*(c=1/(a=.5*(u+m)))*n-i*c*i:u<0?o=.5*(u-m):(a=.5*m,o=-.5*m),s=d>0?d+m:d-m,Math.abs(s)>2*Math.abs(i)?s=(c=-2*i/s)*(l=1/Math.sqrt(1+c*c)):0===Math.abs(i)?(s=1,l=0):l=(c=-.5*s/i)*(s=1/Math.sqrt(1+c*c)),d>0&&(c=s,s=-l,l=c),{rt1:a,rt2:o,cs:s,sn:l}),R=Math.sqrt(C.rt1),O=Math.sqrt(C.rt2);if(t.xRadius=1/R,t.yRadius=1/O,t.aRotation=Math.atan2(C.sn,C.cs),!((t.aEndAngle-t.aStartAngle)%(2*Math.PI)<Number.EPSILON)){var N=T.set(R,0,0,0,O,0,0,0,1),P=M.set(C.cs,C.sn,0,-C.sn,C.cs,0,0,0,1),j=N.multiply(P).multiply(A),I=function(t){var e=new E(Math.cos(t),Math.sin(t),0).applyMatrix3(j),r=e.x,i=e.y;return Math.atan2(i,r)};t.aStartAngle=I(t.aStartAngle),t.aEndAngle=I(t.aEndAngle),p(e)&&(t.aClockwise=!t.aClockwise)}}function n(t){var r=h(e),i=f(e);t.xRadius*=r,t.yRadius*=i;var n=r>Number.EPSILON?Math.atan2(e.elements[1],e.elements[0]):Math.atan2(-e.elements[3],e.elements[4]);t.aRotation+=n,p(e)&&(t.aStartAngle*=-1,t.aEndAngle*=-1,t.aClockwise=!t.aClockwise)}for(var a=t.subPaths,o=0,s=a.length;o<s;o++)for(var l=a[o].curves,c=0;c<l.length;c++){var u=l[c];u.isLineCurve?(r(u.v1),r(u.v2)):u.isCubicBezierCurve?(r(u.v0),r(u.v1),r(u.v2),r(u.v3)):u.isQuadraticBezierCurve?(r(u.v0),r(u.v1),r(u.v2)):u.isEllipseCurve&&(C.set(u.aX,u.aY),r(C),u.aX=C.x,u.aY=C.y,m(e)?i(u):n(u))}}(u,O),b.push(u),u.userData={node:e,style:i});for(var j=e.childNodes,I=0;I<j.length;I++){var L=j[I];c&&"style"!==L.nodeName&&"defs"!==L.nodeName||t(L,i)}a&&(w.pop(),w.length>0?O.copy(w[w.length-1]):O.identity())}}(N.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:b,xml:N.documentElement}}}])&&n(a.prototype,s),l&&n(a,l),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,s,l}(f);t.exports={SVGLoader:k}},7866:function(t,e,r){var i,n,a,o;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}t=r.nmd(t),o=function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==s(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("cursor-teleport",{schema:{cameraHead:{type:"selector",default:""},cameraRig:{type:"selector",default:""},collisionEntities:{type:"string",default:""},ignoreEntities:{type:"string",default:""},landingMaxAngle:{default:45,min:0,max:360},landingNormal:{type:"vec3",default:{x:0,y:1,z:0}},transitionSpeed:{type:"number",default:6e-4}},init:function(){var t=this;this.mobile=AFRAME.utils.device.isMobile();var e=this.el.sceneEl;this.canvas=e.renderer.domElement,this.data.cameraHead.object3D.traverse((function(e){e instanceof THREE.Camera&&(t.cam=e)})),this.camRig=this.data.cameraRig.object3D,this.rayCaster=new THREE.Raycaster,this.referenceNormal=new THREE.Vector3,this.rayCastObjects=[],this.referenceNormal.copy(this.data.landingNormal);var r=new THREE.RingGeometry(.25,.3,32,1);r.rotateX(-Math.PI/2),r.translate(0,.02,0);var i=new THREE.MeshBasicMaterial({color:7818734}),n=new THREE.Mesh(r,i),a=new THREE.CylinderGeometry(.3,.3,.5,32,1,!0);a.translate(0,.25,0);var o=(new THREE.TextureLoader).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAQCAYAAADXnxW3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAADJJREFUeNpEx7ENgDAAAzArK0JA6f8X9oewlcWStU1wBGdwB08wgjeYm79jc2nbYH0DAC/+CORJxO5fAAAAAElFTkSuQmCC"),s=new THREE.MeshBasicMaterial({color:7818734,side:"double",map:o,transparent:!0,depthTest:!1}),l=new THREE.Mesh(a,s),c=new THREE.Group;c.add(n),c.add(l),this.teleportIndicator=c,e.object3D.add(this.teleportIndicator),this.transitioning=!1,this.transitionProgress=0,this.transitionCamPosStart=new THREE.Vector3,this.transitionCamPosEnd=new THREE.Vector3,this.updateRaycastObjects=this.updateRaycastObjects.bind(this),this.getMouseState=this.getMouseState.bind(this),this.getTeleportPosition=this.getTeleportPosition.bind(this),this.isValidNormalsAngle=this.isValidNormalsAngle.bind(this),this.transition=this.transition.bind(this),this.mouseMove=this.mouseMove.bind(this),this.mouseDown=this.mouseDown.bind(this),this.mouseUp=this.mouseUp.bind(this),this.easeInOutQuad=this.easeInOutQuad.bind(this),this.updateRaycastObjects()},remove:function(){this.cam=null,this.canvas=null,this.rayCastObjects.length=0,this.el.sceneEl.object3D.remove(this.teleportIndicator),this.teleportIndicator.children[0].material.dispose(),this.teleportIndicator.children[0].geometry.dispose(),this.teleportIndicator.children[1].material.dispose(),this.teleportIndicator.children[1].geometry.dispose(),this.teleportIndicator=null,this.collisionMesh&&(this.collisionMesh.geometry.dispose(),this.collisionMesh.material.dispose(),this.collisionMesh=null)},play:function(){var t=this.canvas;t.addEventListener("mousedown",this.mouseDown,!1),t.addEventListener("mousemove",this.mouseMove,!1),t.addEventListener("mouseup",this.mouseUp,!1),t.addEventListener("touchstart",this.mouseDown,!1),t.addEventListener("touchmove",this.mouseMove,!1),t.addEventListener("touchend",this.mouseUp,!1)},pause:function(){var t=this.canvas;t.removeEventListener("mousedown",this.mouseDown),t.removeEventListener("mousemove",this.mouseMove),t.removeEventListener("mouseup",this.mouseUp),t.removeEventListener("touchstart",this.mouseDown),t.removeEventListener("touchmove",this.mouseMove),t.removeEventListener("touchend",this.mouseUp)},updateRaycastObjects:function(){var t=this;if(this.rayCastObjects.length=0,""!==this.data.collisionEntities)this.el.sceneEl.querySelectorAll(this.data.collisionEntities).forEach((function(e){e.object3D.traverse((function(e){e.isMesh&&(e.userData.collision=!0,t.rayCastObjects.push(e))}))}));else{if(!this.collisionMesh){var e=new THREE.PlaneGeometry(500,500,1);e.rotateX(-Math.PI/2);var r=new THREE.MeshNormalMaterial,i=new THREE.Mesh(e,r);i.userData.collision=!0,this.collisionMesh=i}this.rayCastObjects.push(this.collisionMesh)}""!==this.data.ignoreEntities&&this.el.sceneEl.querySelectorAll(this.data.ignoreEntities).forEach((function(e){e.object3D.traverse((function(e){e.isMesh&&t.rayCastObjects.push(e)}))}))},getMouseState:function(){var t=new THREE.Vector2;return function(e){var r=this.canvas.getBoundingClientRect();return null!=e.clientX?(t.x=e.clientX-r.left,t.y=e.clientY-r.top,t):null!=e.touches[0]?(t.x=e.touches[0].clientX-r.left,t.y=e.touches[0].clientY-r.top,t):void 0}}(),getTeleportPosition:function(){var t=new THREE.Vector2;return function(e,r){if(0!==this.rayCastObjects.length){if(this.cam&&this.canvas){var i=this.cam,n=this.canvas.getBoundingClientRect();t.x=e/(n.right-n.left)*2-1,t.y=-r/(n.bottom-n.top)*2+1,this.rayCaster.setFromCamera(t,i);var a=this.rayCaster.intersectObjects(this.rayCastObjects);return!(0===a.length||!this.isValidNormalsAngle(a[0].face.normal))&&!0===a[0].object.userData.collision&&a[0].point}return!1}return!1}}(),isValidNormalsAngle:function(t){var e=this.referenceNormal.angleTo(t);return THREE.MathUtils.RAD2DEG*e<=this.data.landingMaxAngle},transition:function(t){this.transitionProgress=0,this.transitionCamPosEnd.copy(t),this.transitionCamPosStart.copy(this.camRig.position),this.transitioning=!0},mouseMove:function(t){var e=this.getMouseState(t);this.mouseX=e.x,this.mouseY=e.y},mouseDown:function(t){this.updateRaycastObjects();var e=this.getMouseState(t);this.mouseX=e.x,this.mouseY=e.y,this.mouseXOrig=e.x,this.mouseYOrig=e.y},mouseUp:function(t){if(this.mouseX===this.mouseXOrig&&this.mouseY===this.mouseYOrig){var e=this.getTeleportPosition(this.mouseX,this.mouseY);e&&(this.teleportIndicator.position.copy(e),this.transition(e))}},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},tick:function(t,e){if(!this.transitioning&&!this.mobile){var r=this.getTeleportPosition(this.mouseX,this.mouseY);r&&this.teleportIndicator.position.copy(r)}if(this.transitioning){this.transitionProgress+=e*this.data.transitionSpeed;var i=this.easeInOutQuad(this.transitionProgress),n=i<.5?i:1.5-1*(i+.5);this.teleportIndicator.scale.set(1+n,1,1+n);var a=this.camRig.position;a.x=this.transitionCamPosStart.x+(this.transitionCamPosEnd.x-this.transitionCamPosStart.x)*i,a.y=this.transitionCamPosStart.y+(this.transitionCamPosEnd.y-this.transitionCamPosStart.y)*i,a.z=this.transitionCamPosStart.z+(this.transitionCamPosEnd.z-this.transitionCamPosStart.z)*i,this.transitionProgress>=1&&(this.transitioning=!1,a.copy(this.transitionCamPosEnd))}}})}])},"object"==s(e)&&"object"==s(t)?t.exports=o():(n=[],void 0===(a="function"==typeof(i=o)?i.apply(e,n):i)||(t.exports=a))},3987:t=>{var e={once:THREE.LoopOnce,repeat:THREE.LoopRepeat,pingpong:THREE.LoopPingPong};function r(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}t.exports=AFRAME.registerComponent("animation-mixer",{schema:{clip:{default:"*"},duration:{default:0},clampWhenFinished:{default:!1,type:"boolean"},crossFadeDuration:{default:0},loop:{default:"repeat",oneOf:Object.keys(e)},repetitions:{default:1/0,min:0},timeScale:{default:1},startAt:{default:0}},init:function(){var t=this;this.model=null,this.mixer=null,this.activeActions=[];var e=this.el.getObject3D("mesh");e?this.load(e):this.el.addEventListener("model-loaded",(function(e){t.load(e.detail.model)}))},load:function(t){var e=this.el;this.model=t,this.mixer=new THREE.AnimationMixer(t),this.mixer.addEventListener("loop",(function(t){e.emit("animation-loop",{action:t.action,loopDelta:t.loopDelta})})),this.mixer.addEventListener("finished",(function(t){e.emit("animation-finished",{action:t.action,direction:t.direction})})),this.data.clip&&this.update({})},remove:function(){this.mixer&&this.mixer.stopAllAction()},update:function(t){if(t){var r=this.data,i=AFRAME.utils.diff(r,t);if("clip"in i)return this.stopAction(),void(r.clip&&this.playAction());this.activeActions.forEach((function(t){"duration"in i&&r.duration&&t.setDuration(r.duration),"clampWhenFinished"in i&&(t.clampWhenFinished=r.clampWhenFinished),("loop"in i||"repetitions"in i)&&t.setLoop(e[r.loop],r.repetitions),"timeScale"in i&&t.setEffectiveTimeScale(r.timeScale)}))}},stopAction:function(){for(var t=this.data,e=0;e<this.activeActions.length;e++)t.crossFadeDuration?this.activeActions[e].fadeOut(t.crossFadeDuration):this.activeActions[e].stop();this.activeActions.length=0},playAction:function(){if(this.mixer){var t=this.model,i=this.data,n=t.animations||(t.geometry||{}).animations||[];if(n.length)for(var a,o,s=(a=i.clip,new RegExp("^"+a.split(/\*+/).map(r).join(".*")+"$")),l=0;o=n[l];l++)if(o.name.match(s)){var c=this.mixer.clipAction(o,t);c.enabled=!0,c.clampWhenFinished=i.clampWhenFinished,i.duration&&c.setDuration(i.duration),1!==i.timeScale&&c.setEffectiveTimeScale(i.timeScale),c.startAt(this.mixer.time-i.startAt/1e3),c.setLoop(e[i.loop],i.repetitions).fadeIn(i.crossFadeDuration).play(),this.activeActions.push(c)}}},tick:function(t,e){this.mixer&&!isNaN(e)&&this.mixer.update(e/1e3)}})},5165:(t,e)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){return n=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},n.apply(this,arguments)},a=function(){function t(t){this.options=t,this.listeners={}}return t.prototype.on=function(t,e){var r=this.listeners[t]||[];this.listeners[t]=r.concat([e])},t.prototype.triggerEvent=function(t,e){var r=this;(this.listeners[t]||[]).forEach((function(t){return t({target:r,event:e})}))},t}();(i=e.NotyfArrayEvent||(e.NotyfArrayEvent={}))[i.Add=0]="Add",i[i.Remove=1]="Remove";var o=function(){function t(){this.notifications=[]}return t.prototype.push=function(t){this.notifications.push(t),this.updateFn(t,e.NotyfArrayEvent.Add,this.notifications)},t.prototype.splice=function(t,r){var i=this.notifications.splice(t,r)[0];return this.updateFn(i,e.NotyfArrayEvent.Remove,this.notifications),i},t.prototype.indexOf=function(t){return this.notifications.indexOf(t)},t.prototype.onUpdate=function(t){this.updateFn=t},t}();!function(t){t.Dismiss="dismiss",t.Click="click"}(e.NotyfEvent||(e.NotyfEvent={}));var s={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!1},l=function(){function t(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var t=document.createDocumentFragment(),e=this._createHTMLElement({tagName:"div",className:"notyf"});t.appendChild(e),document.body.appendChild(t),this.container=e,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}return t.prototype.on=function(t,e){var r;this.events=n(n({},this.events),((r={})[t]=e,r))},t.prototype.update=function(t,r){r===e.NotyfArrayEvent.Add?this.addNotification(t):r===e.NotyfArrayEvent.Remove&&this.removeNotification(t)},t.prototype.removeNotification=function(t){var e,r,i=this,n=this._popRenderedNotification(t);n&&((e=n.node).classList.add("notyf__toast--disappear"),e.addEventListener(this.animationEndEventName,r=function(t){t.target===e&&(e.removeEventListener(i.animationEndEventName,r),i.container.removeChild(e))}))},t.prototype.addNotification=function(t){var e=this._renderNotification(t);this.notifications.push({notification:t,node:e}),this._announce(t.options.message||"Notification")},t.prototype._renderNotification=function(t){var e,r=this._buildNotificationCard(t),i=t.options.className;return i&&(e=r.classList).add.apply(e,i.split(" ")),this.container.appendChild(r),r},t.prototype._popRenderedNotification=function(t){for(var e=-1,r=0;r<this.notifications.length&&e<0;r++)this.notifications[r].notification===t&&(e=r);if(-1!==e)return this.notifications.splice(e,1)[0]},t.prototype.getXPosition=function(t){var e;return(null===(e=null==t?void 0:t.position)||void 0===e?void 0:e.x)||"right"},t.prototype.getYPosition=function(t){var e;return(null===(e=null==t?void 0:t.position)||void 0===e?void 0:e.y)||"bottom"},t.prototype.adjustContainerAlignment=function(t){var e=this.X_POSITION_FLEX_MAP[this.getXPosition(t)],r=this.Y_POSITION_FLEX_MAP[this.getYPosition(t)],i=this.container.style;i.setProperty("justify-content",r),i.setProperty("align-items",e)},t.prototype._buildNotificationCard=function(t){var i=this,n=t.options,a=n.icon;this.adjustContainerAlignment(n);var o=this._createHTMLElement({tagName:"div",className:"notyf__toast"}),s=this._createHTMLElement({tagName:"div",className:"notyf__ripple"}),l=this._createHTMLElement({tagName:"div",className:"notyf__wrapper"}),c=this._createHTMLElement({tagName:"div",className:"notyf__message"});c.innerHTML=n.message||"";var u=n.background||n.backgroundColor;if(a){var d=this._createHTMLElement({tagName:"div",className:"notyf__icon"});if(("string"==typeof a||a instanceof String)&&(d.innerHTML=new String(a).valueOf()),"object"==r(a)){var p=a.tagName,m=void 0===p?"i":p,h=a.className,f=a.text,g=a.color,y=void 0===g?u:g,b=this._createHTMLElement({tagName:m,className:h,text:f});y&&(b.style.color=y),d.appendChild(b)}l.appendChild(d)}if(l.appendChild(c),o.appendChild(l),u&&(n.ripple?(s.style.background=u,o.appendChild(s)):o.style.background=u),n.dismissible){var v=this._createHTMLElement({tagName:"div",className:"notyf__dismiss"}),x=this._createHTMLElement({tagName:"button",className:"notyf__dismiss-btn"});v.appendChild(x),l.appendChild(v),o.classList.add("notyf__toast--dismissible"),x.addEventListener("click",(function(r){var n,a;null===(a=(n=i.events)[e.NotyfEvent.Dismiss])||void 0===a||a.call(n,{target:t,event:r}),r.stopPropagation()}))}o.addEventListener("click",(function(r){var n,a;return null===(a=(n=i.events)[e.NotyfEvent.Click])||void 0===a?void 0:a.call(n,{target:t,event:r})}));var w="top"===this.getYPosition(n)?"upper":"lower";return o.classList.add("notyf__toast--"+w),o},t.prototype._createHTMLElement=function(t){var e=t.tagName,r=t.className,i=t.text,n=document.createElement(e);return r&&(n.className=r),n.textContent=i||null,n},t.prototype._createA11yContainer=function(){var t=this._createHTMLElement({tagName:"div",className:"notyf-announcer"});t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),t.style.border="0",t.style.clip="rect(0 0 0 0)",t.style.height="1px",t.style.margin="-1px",t.style.overflow="hidden",t.style.padding="0",t.style.position="absolute",t.style.width="1px",t.style.outline="0",document.body.appendChild(t),this.a11yContainer=t},t.prototype._announce=function(t){var e=this;this.a11yContainer.textContent="",setTimeout((function(){e.a11yContainer.textContent=t}),100)},t.prototype._getAnimationEndEventName=function(){var t,e=document.createElement("_fake"),r={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"};for(t in r)if(void 0!==e.style[t])return r[t];return"animationend"},t}(),c=function(){function t(t){var r=this;this.dismiss=this._removeNotification,this.notifications=new o,this.view=new l;var i=this.registerTypes(t);this.options=n(n({},s),t),this.options.types=i,this.notifications.onUpdate((function(t,e){return r.view.update(t,e)})),this.view.on(e.NotyfEvent.Dismiss,(function(t){var i=t.target,n=t.event;r._removeNotification(i),i.triggerEvent(e.NotyfEvent.Dismiss,n)})),this.view.on(e.NotyfEvent.Click,(function(t){var r=t.target,i=t.event;return r.triggerEvent(e.NotyfEvent.Click,i)}))}return t.prototype.error=function(t){var e=this.normalizeOptions("error",t);return this.open(e)},t.prototype.success=function(t){var e=this.normalizeOptions("success",t);return this.open(e)},t.prototype.open=function(t){var e=this.options.types.find((function(e){return e.type===t.type}))||{},r=n(n({},e),t);this.assignProps(["ripple","position","dismissible"],r);var i=new a(r);return this._pushNotification(i),i},t.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},t.prototype.assignProps=function(t,e){var r=this;t.forEach((function(t){e[t]=null==e[t]?r.options[t]:e[t]}))},t.prototype._pushNotification=function(t){var e=this;this.notifications.push(t);var r=void 0!==t.options.duration?t.options.duration:this.options.duration;r&&setTimeout((function(){return e._removeNotification(t)}),r)},t.prototype._removeNotification=function(t){var e=this.notifications.indexOf(t);-1!==e&&this.notifications.splice(e,1)},t.prototype.normalizeOptions=function(t,e){var i={type:t};return"string"==typeof e?i.message=e:"object"==r(e)&&(i=n(n({},i),e)),i},t.prototype.registerTypes=function(t){var e=(t&&t.types||[]).slice();return s.types.map((function(t){var r=-1;e.forEach((function(e,i){e.type===t.type&&(r=i)}));var i=-1!==r?e.splice(r,1)[0]:{};return n(n({},t),i)})).concat(e)},t}();e.DEFAULT_OPTIONS=s,e.Notyf=c,e.NotyfArray=o,e.NotyfNotification=a,e.NotyfView=l},4594:t=>{t.exports.segmentVariants={sidewalk:["empty","sparse","normal","dense"],"sidewalk-wayfinding":["large"],"sidewalk-bench":["left","right","center"],"sidewalk-bike-rack":["left|sidewalk-parallel","right|sidewalk-parallel","left|sidewalk","right|sidewalk"],"sidewalk-tree":["big","palm-tree"],utilities:["left","right"],"sidewalk-lamp":["right|modern","both|modern","left|modern","right|traditional","both|traditional","left|traditional","right|pride","both|pride","left|pride"],parklet:["left","right"],"outdoor-dining":["empty|sidewalk","empty|road"],bikeshare:["left|road","right|road","left|sidewalk","right|sidewalk"],"bike-lane":["inbound|green|sidewalk","inbound|green|road","outbound|green|sidewalk","outbound|green|road","inbound|regular|sidewalk","inbound|regular|road","outbound|regular|sidewalk","outbound|regular|road","inbound|red|sidewalk","inbound|red|road","outbound|red|sidewalk","outbound|red|road"],scooter:["inbound|regular","inbound|green","inbound|red","outbound|regular","outbound|green","outbound|red"],"bus-lane":["inbound|colored|typical","outbound|colored|typical","inbound|regular|typical","outbound|regular|typical","inbound|red|typical","outbound|red|typical"],"drive-lane":["inbound|car","outbound|car","inbound|truck","outbound|truck","outbound|av","inbound|av","outbound|pedestrian","inbound|pedestrian","inbound|sharrow","outbound|sharrow"],"turn-lane":["inbound|left","inbound|right","inbound|left-right-straight","inbound|shared","inbound|both","inbound|left-straight","inbound|right-straight","inbound|straight","outbound|left","outbound|right","outbound|left-right-straight","outbound|shared","outbound|both","outbound|left-straight","outbound|right-straight","outbound|straight"],"parking-lane":["sideways|right","sideways|left","inbound|right","inbound|left","outbound|left","outbound|right","angled-front-left|left","angled-front-right|left","angled-rear-left|left","angled-rear-right|left","angled-front-left|right","angled-front-right|right","angled-rear-left|right","angled-rear-right|right"],"food-truck":["left","right"],"flex-zone":["taxi|inbound|right","taxi|inbound|left","taxi|outbound|right","taxi|outbound|left","rideshare|outbound|right","rideshare|outbound|right","rideshare|inbound|right","rideshare|inbound|left"],streetcar:["inbound|regular","inbound|colored","inbound|grass","outbound|regular","outbound|colored","outbound|grass"],"light-rail":["inbound|regular","inbound|colored","inbound|grass","outbound|regular","outbound|colored","outbound|grass"],"brt-station":["center"],"transit-shelter":["left|street-level","right|street-level","right|light-rail","left|light-rail"],divider:["buffer","flowers","planting-strip","planter-box","palm-tree","big-tree","bush","dome","bollard","striped-buffer"],temporary:["barricade","traffic-cone","jersey-barrier-plastic","jersey-barrier-concrete"],"magic-carpet":["aladdin"]}},1339:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}var r={Setback:{"":{type:"sidewalk",variantString:"empty"},Trees:{type:"sidewalk-tree",variantString:"big"},tree:{type:"divider",variantString:"palm-tree"},Benchs:{type:"sidewalk-bench",variantStringAdd:"side"}},Walkways:{"":{type:"sidewalk",variantString:"empty"},Trees:{type:"sidewalk-tree",variantString:"big"},pedestrian:{type:"sidewalk",variantString:"dense"},Benchs:{type:"sidewalk-bench",variantStringAdd:"side"},Tables:{type:"outdoor-dining",variantString:"occupied|sidewalk"}},Furniture:{"":{type:"sidewalk",variantString:"empty"},Trees:{type:"sidewalk-tree",variantString:"big"},season_tree:{type:"sidewalk-tree",variantString:"big"},Shelters:{type:"transit-shelter",variantString:"street-level",variantStringAdd:"side|variantString"},Pedestrian:{type:"sidewalk",variantString:"dense"}},Curbside:{"":{type:"sidewalk",variantString:"empty"},Lights:{type:"sidewalk-lamp",tagToVariantMap:{"Historic Lights":"traditional","Regular Lights":"modern"},variantStringAdd:"side|variantString"},Poles:{type:"utilities",variantStringAdd:"side"},BikeRacks:{type:"sidewalk-bike-rack",nameToVariantMap:{"Sideview Modern":"sidewalk-parallel",Sideview:"sidewalk-parallel","NYC Bike Rack":"sidewalk"},variantStringAdd:"side|variantString"}},BikesPaths:{"":{type:"bike-lane",variantString:"sidewalk"},Bikes:{type:"bike-lane",variantString:"sidewalk",variantStringAdd:"direction|material|variantString"}},Gutter:{"":{type:"divider",variantString:"median"},Gutter:{type:"divider",variantString:"median"}},Transit:{"":{tag:"Bus Vehicles",type:"bus-lane",variantString:"typical",variantStringAdd:"direction|material|variantString"},Transit:[{tag:"Rail Vehicles",type:"streetcar",names:["StreetCar Yellow","StreetCar Blue","StreetCar Red 1","StreetCar Red 2"],variantStringAdd:"direction|material"},{tag:"Rail Vehicles",type:"light-rail",names:["UTA LightRail"],variantStringAdd:"direction|material"},{tag:"Rail Vehicles Reversed",type:"light-rail",variantStringAdd:"direction|material"},{tag:"Bus Vehicles",type:"bus-lane",variantString:"typical",variantStringAdd:"direction|material|variantString"}]},Cars:{"":{type:"drive-lane",variantString:"car",variantStringAdd:"direction|variantString"},Autos:{type:"drive-lane",variantString:"car",variantStringAdd:"direction|variantString"},Truck:{type:"drive-lane",variantString:"truck",variantStringAdd:"direction|variantString"}},Parking:{"":{tag:"Parking - Parallel",type:"parking-lane",variantStringAdd:"direction|side"},Parallel:{tag:"Parking - Parallel",type:"parking-lane",variantStringAdd:"direction|side"},AngleNormal:{tag:"Parking - Angle",type:"parking-lane",nameToVariantMap:{"Away, L. Park, Head In":"angled-rear-left","Toward, R. Park, Head In":"angled-front-right","Toward, L. Park, Head In":"angled-front-left","Away, R. Park, Head In":"angled-rear-right"},variantStringAdd:"side"},Perpendicular:{type:"parking-lane",variantString:"sideways",variantStringAdd:"variantString|side"}},Buffers:{"":{type:"divider",variantString:"median"},Trees:{type:"divider",variantString:"big-tree"},tree:{type:"divider",variantString:"palm-tree"},season_tree:{type:"divider",variantString:"big-tree"},median:{type:"divider",variantString:"planting-strip"},planter:{type:"divider",variantString:"planting-strip"}}};r.Buffers.AngleNormal=r.Parking.AngleNormal,r.Buffers.Autos=r.Cars.Autos,r.Buffers.Purpendicular=r.Parking.Perpendicular,r["Median/Buffer"]=r.Buffers,r.Setback.tree=r.Buffers.tree,r.Setback.Trees=r.Buffers.Trees,r.Setback.season_tree=r.Buffers.season_tree,r.Parking.Purpendicular=r.Parking.Perpendicular,r.Setback.Purpendicular=r.Parking.Perpendicular,r.Setback.AngleNormal=r.Parking.AngleNormal,r.Setback.planter=r.Buffers.planter,r.Setback.BikeRacks=r.Curbside.BikeRacks,r.Setback.Tables=r.Walkways.Tables,r.Setback.Poles=r.Curbside.Poles,r.Curbside.Shelters=r.Furniture.Shelters,r.Curbside.Benchs=r.Walkways.Benchs,r.Furniture.planter=r.Buffers.planter,r.Furniture.Benchs=r.Walkways.Benchs,r.Furniture.BikeRacks=r.Curbside.BikeRacks,r.Furniture.Tables=r.Walkways.Tables;var i={Coming:"inbound",Going:"outbound",Both:"both",NA:""},n={"Asphalt Black":"regular","Asphalt Blue":"blue","Asphalt Red 1":"red","Asphalt Red 2":"red","Asphalt Green":"green","Asphalt Old":"regular",Grass:"grass","Grass Dead":"grass"};function a(t,e){return t.split("|").map((function(t){return e[t]})).join("|")}t.exports.convertSegment=function(t){var o={},s=t.Type,l=t.Subtype,c=r[s];if(o.elevation=t.MaterialH/.5,o.width=t.width,o.direction=i[t.Direction],t.side&&(o.side=t.side),t.Material&&(o.material=n[t.Material]),c){var u=c[l];u?o=function(t,r,i){if("string"==typeof t)r.type=t;else if(Array.isArray(t)){var n=t.find((function(t){var e=t.tag===i["O1-Tags"];return e&&t.names?t.names.includes(i["O1-Name"]):e}));r.variantString="";var o=n.variantString;o&&"string"==typeof o&&(r.variantString=o),r.type=n.type;var s=n.variantStringAdd;s&&(r.variantString=a(s,r))}else if("object"===e(t)){r.type=t.type,r.variantString="";var l=t.variantString;l&&"string"==typeof l&&(r.variantString=l);var c=t.nameToVariantMap;c&&c[i["O1-Name"]]&&(r.variantString=c[i["O1-Name"]]);var u=t.tagToVariantMap;u&&u[i["O1-Tags"]]&&(r.variantString=u[i["O1-Tags"]]);var d=t.variantStringAdd;d&&(r.variantString=a(d,r))}return r}(u,o,t):(o.type=s,console.log("The '".concat(l,"' subtype of StreetPlan segment '").concat(s,"' is not yet supported in 3DStreet")))}else o.type=s,console.log("The '".concat(s,"' StreetPlan segment type is not yet supported in 3DStreet"));return o}},2480:(t,e,r)=>{var i=r(1339);t.exports.convertStreetStruct=function(t){var e,r={},n=Object.keys(t)[0],a=Object.keys(t[n])[0];return r.name=n,r.altName=a,r.segments=Object.values(t[n][a].segments),r.segments.forEach((function(t){t.width*=.3048})),r.segments=(e=r.segments,e.map(i.convertSegment)).filter((function(t){return!["Buildings","setback"].includes(t.type)})),console.log("TEST. Converted JSON structure: ",r),r}},5384:t=>{t.exports.isSidewalk=function(t){return t.startsWith("sidewalk")||["utilities","scooter-drop-zone","bikeshare","flex-zone-curb","transit-shelter","brt-station","street-vendor"].includes(t)},t.exports.createBuildingsArray=function(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:150,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"narrow";if("narrow"===i||"wide"===i)t=[{id:"SM3D_Bld_Mixed_4fl",width:5.251},{id:"SM3D_Bld_Mixed_Double_5fl",width:10.9041},{id:"SM3D_Bld_Mixed_4fl_2",width:5.309},{id:"SM3D_Bld_Mixed_5fl",width:5.903},{id:"SM3D_Bld_Mixed_Corner_4fl",width:5.644}],e="41431323432402434130303230234102402341";else if("residential"===i)t=[{id:"SM_Bld_House_Preset_03_1800",width:20},{id:"SM_Bld_House_Preset_08_1809",width:20},{id:"SM_Bld_House_Preset_09_1845",width:20}],e="12021201210101212021201012012021201210";else{if("arcade"!==i)return[];t=[{id:"arched-building-01",width:9.191},{id:"arched-building-02",width:11.19},{id:"arched-building-03",width:13.191},{id:"arched-building-04",width:15.191}],e="03120223130210321203123023103201232013"}for(var n=0,a=0,o=[];a<r;){var s=t[parseInt(e[n])],l={tag:"a-entity",mixin:s.id,position:a+s.width/2+" 0 0"};"SM_Bld_House_Preset_08_1809"===l.mixin&&(l.child={tag:"a-plane",class:"driveway",material:"roughness:0.8",position:"-6.25 0.6 -8.75",rotation:"-90 0 0",src:"#asphalt-texture",width:4,height:4.6}),"SM_Bld_House_Preset_09_1845"===l.mixin&&(l.child={tag:"a-plane",class:"driveway",material:"roughness:0.8",position:"-2.5 0.6 -7",rotation:"-90 0 0",src:"#asphalt-texture",width:4,height:8}),s.width+a<=r&&o.push(l),a+=s.width,n++}return o},t.exports.filterBuildingsArrayByMixin=function(t,e){var r=[];return t.forEach((function(t,i){t.mixin===e&&r.push(t)})),r},t.exports.removePropertyFromArray=function(t,e){return t.forEach((function(t,r){delete t[e]})),t},t.exports.createClonedEntitiesArray=function(t){for(var e=t.mixin,r=void 0===e?"":e,i=t.step,n=void 0===i?15:i,a=t.radius,o=void 0===a?60:a,s=t.rotation,l=void 0===s?"0 0 0":s,c=t.positionXYString,u=void 0===c?"0 0":c,d=t.randomY,p=void 0!==d&&d,m=[],h=-1*o;h<=o;h+=n){var f={tag:"a-entity",position:u+" "+h};r&&(f.class=r,f.mixin=r),f.rotation=p?"0 "+Math.floor(361*randomTestable())+" 0":l,m.push(f)}return m},t.exports.getAmbientSoundJSON=function(t){var e={fence:"#suburbs-mp3",grass:"#suburbs-mp3","parking-lot":"#parking-lot-mp3",waterfront:"#waterfront",residential:"#suburbs2-mp3",narrow:"#ambientmp3",wide:"#ambientmp3"},r=[],i=null;return t.forEach((function(t,n){if(!i||i!==e[t]){var a={tag:"a-entity",class:"playme",sound:"src: "+e[t]+"; positional: false; loop: true"};r.push(a),i=e[t]}})),r}},4001:t=>{function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,n,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=a.call(r)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){c=!0,n=t}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw n}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=document.createElement(t.tag);delete t.tag;for(var i=0,n=Object.entries(t);i<n.length;i++){var a=e(n[i],2),o=a[0],s=a[1];if("child"===o){for(var l=document.createElement(s.tag),c=0,u=Object.entries(s);c<u.length;c++){var d=e(u[c],2),p=d[0],m=d[1];l.setAttribute(p,m)}r.appendChild(l)}r.setAttribute(o,s)}return r}t.exports.createElementFromObject=i,t.exports.appendChildElementsFromArray=function(){var t=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(e,r){t.appendChild(i(e))})),t}},5676:t=>{t.exports.streetmixUserToAPI=function(t){var e=new URL(t).pathname.split("/"),r=e[1],i=e[2];return"-"===r?"https://streetmix.net/api/v1/streets?namespacedId="+i:"https://streetmix.net/api/v1/streets?namespacedId="+i+"&creatorId="+r},t.exports.pathStartsWithAPI=function(t){var e=document.createElement("a");return e.href=t,"api"===e.pathname.split("/")[1]},t.exports.streetmixAPIToUser=function(t){function e(t,e){for(var r=t.split("&"),i=0;i<r.length;i++){var n=r[i].split("=");if(decodeURIComponent(n[0])===e)return decodeURIComponent(n[1])}console.log("Query variable %s not found",e)}var r=new URL(t).search.substring(1),i=e(r,"namespacedId"),n=e(r,"creatorId");return void 0===n&&(n="-"),"https://streetmix.net/"+n+"/"+i},t.exports.convertStreetValues=function(t){return t.schemaVersion<30&&(t.segments.forEach((function(t){t.width*=.3048})),t.width&&(t.width*=.3048)),t}}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var a=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}return r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}console.log("3DStreet Version: ".concat("0.4.15"));var e=r(3786),i=r(5676);r(7554),r(6023),r(2052),r(608),r(7866),r(3987),r(4956),r(4857),r(6948),r(5927),r(68),r(1394),r(2411),AFRAME.registerComponent("street",{schema:{JSON:{type:"string"},type:{default:"streetmixSegmentsMetric"},left:{default:""},right:{default:""},showGround:{default:!0},showStriping:{default:!0},showVehicles:{default:!0},globalAnimated:{default:!1},length:{default:60}},update:function(t){var r=this.data;if(0!==r.JSON.length){var i=JSON.parse(r.JSON),n=this.el.querySelector(".street-parent");n&&n.remove();var a=this.el.querySelector(".buildings-parent");a&&a.remove();var o=e.processSegments(i.streetmixSegmentsMetric,r.showStriping,r.length,r.globalAnimated,r.showVehicles);if(this.el.append(o),r.left||r.right){var s=i.streetmixSegmentsMetric.reduce((function(t,e){return t+e.width}),0),l=e.processBuildings(r.left,r.right,s,r.showGround,r.length);this.el.append(l)}}else{if(void 0!==t.JSON&&0===t.JSON.length)return;console.log("[street]","No JSON provided yet, but it might be set at runtime")}}}),AFRAME.registerComponent("streetmix-loader",{dependencies:["street"],schema:{streetmixStreetURL:{type:"string"},streetmixAPIURL:{type:"string"},showBuildings:{default:!0},name:{default:""}},update:function(t){var e=this.data,r=this.el;if(t.streetmixStreetURL!==e.streetmixStreetURL||t.streetmixAPIURL!==e.streetmixAPIURL)if(0!==e.streetmixAPIURL.length){var n=new XMLHttpRequest;console.log("[streetmix-loader]","GET "+e.streetmixAPIURL),n.open("GET",e.streetmixAPIURL,!0),n.onload=function(){if(this.status>=200&&this.status<400){var t,n=JSON.parse(this.response),a=i.convertStreetValues(n.data.street),o=a.segments,s=n.name;console.log("streetmixName",s),r.setAttribute("streetmix-loader","name",s),AFRAME.scenes[0]&&AFRAME.scenes[0].getAttribute("metadata")&&(t=AFRAME.scenes[0].getAttribute("metadata").sceneTitle),t||(AFRAME.scenes[0].setAttribute("metadata","sceneTitle",s),console.log("therefore setting metadata sceneTitle as streetmixName",s)),r.setAttribute("data-layer-name","Streetmix • "+s),e.showBuildings&&(r.setAttribute("street","right",a.rightBuildingVariant),r.setAttribute("street","left",a.leftBuildingVariant)),r.setAttribute("street","type","streetmixSegmentsMetric"),r.setAttribute("street","JSON",JSON.stringify({streetmixSegmentsMetric:o})),r.emit("streetmix-loader-street-loaded")}else console.log("[streetmix-loader]","Loading Error: We reached the target server, but it returned an error")},n.onerror=function(){console.log("[streetmix-loader]","Loading Error: There was a connection error of some sort")},n.send()}else{if(e.streetmixStreetURL.length>0){var a=i.streetmixUserToAPI(e.streetmixStreetURL);return console.log("[streetmix-loader]","setting `streetmixAPIURL` to",a),void r.setAttribute("streetmix-loader","streetmixAPIURL",a)}console.log("[streetmix-loader]","Neither `streetmixAPIURL` nor `streetmixStreetURL` properties provided, please provide at least one.")}}}),AFRAME.registerComponent("intersection",{schema:{dimensions:{type:"string",default:"20 20"},sidewalk:{type:"string",default:"0 0 0 0"},northeastcurb:{type:"string",default:"0 0"},southwestcurb:{type:"string",default:"0 0"},southeastcurb:{type:"string",default:"0 0"},northwestcurb:{type:"string",default:"0 0"},stopsign:{type:"string",default:"0 0 0 0"},trafficsignal:{type:"string",default:"0 0 0 0"},crosswalk:{type:"string",default:"0 0 0 0"}},init:function(){for(var e=this.data,r=this.el;r.firstChild;)r.removeChild(r.lastChild);var i=e.dimensions.split(" ").map((function(t){return Number(t)})),n=[this.el.getAttribute("position").x,this.el.getAttribute("position").y,this.el.getAttribute("position").z],a=e.sidewalk.split(" ").map((function(t){return Number(t)})),o=e.northeastcurb.split(" ").map((function(t){return Number(t)})),s=e.southwestcurb.split(" ").map((function(t){return Number(t)})),l=e.southeastcurb.split(" ").map((function(t){return Number(t)})),c=e.northwestcurb.split(" ").map((function(t){return Number(t)})),u=e.stopsign.split(" ").map((function(t){return Number(t)})),d=e.trafficsignal.split(" ").map((function(t){return Number(t)})),p=e.crosswalk.split(" ").map((function(t){return Number(t)})),m=i[0],h=i[1];function f(t){var e=t.length,i=t.width,n=t.positionVec,a=t.scaleVec,o=void 0===a?{x:1,y:1,z:1}:a,s=t.rotationVec,l=document.createElement("a-entity"),c=[];c[0]=i/2,c[1]=parseInt(e/2),l.setAttribute("geometry","primitive","box"),l.setAttribute("geometry","height: 0.4"),l.setAttribute("position",n),l.setAttribute("scale",o),l.setAttribute("geometry","depth",e),l.setAttribute("geometry","width",i),l.setAttribute("rotation",s),l.setAttribute("mixin","sidewalk"),l.setAttribute("material","repeat: ".concat(c[0]," ").concat(c[1])),r.appendChild(l)}this.el.setAttribute("geometry","primitive:box; width: ".concat(m,"; height: ").concat(h,"; depth:0.2")),this.el.setAttribute("position",{x:n[0],y:-.1,z:n[2]}),this.el.setAttribute("rotation","-90 0 0"),this.el.setAttribute("material","src: #asphalt-texture; repeat:5 5; roughness:1");var g,y,b={west:{positionVec:{x:m/2-a[0]/2,z:.1},rotationVec:{x:90,y:0,z:0},length:h,width:a[0]},east:{positionVec:{x:-m/2+a[1]/2,z:.1},rotationVec:{x:90,y:0,z:0},length:h,width:a[1]},north:{positionVec:{y:-h/2+a[2]/2,x:a[1]/2-a[0]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:m-a[1]-a[0],width:a[2]},south:{positionVec:{y:h/2-a[3]/2,x:a[1]/2-a[0]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:m-a[1]-a[0],width:a[3]}};Object.keys(b).filter((function(t,e){return a[e]})).forEach((function(t,e){f(b[t])}));for(var v={northeast:{positionVec:{x:m/2-o[0]/2,y:h/2-o[1]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:o[0],width:o[1]},southwest:{positionVec:{x:-m/2+s[0]/2,y:-h/2+s[1]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:s[0],width:s[1]},southeast:{positionVec:{x:m/2-l[0]/2,y:-h/2+l[1]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:l[0],width:l[1]},northwest:{positionVec:{x:-m/2+c[0]/2,y:h/2-c[1]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:c[0],width:c[1]}},x=0,w=Object.entries(v);x<w.length;x++){var A=(g=w[x],y=2,function(t){if(Array.isArray(t))return t}(g)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,n,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=a.call(r)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){c=!0,n=t}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw n}}return s}}(g,y)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,r):void 0}}(g,y)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=A[0],S=A[1];"0 0"!==e["".concat(E,"curb")]&&f(S)}if(u[0]){var k=document.createElement("a-entity");k.setAttribute("position",{x:m/2,y:h/3,z:.1}),k.setAttribute("rotation",{x:0,y:90,z:90}),k.setAttribute("mixin","stop_sign"),r.appendChild(k)}if(u[1]){var T=document.createElement("a-entity");T.setAttribute("position",{x:-m/2,y:-h/3,z:.1}),T.setAttribute("rotation",{x:0,y:-90,z:-90}),T.setAttribute("mixin","stop_sign"),r.appendChild(T)}if(u[2]){var M=document.createElement("a-entity");M.setAttribute("position",{x:-m/3,y:h/2,z:.1}),M.setAttribute("rotation",{x:-90,y:90,z:90}),M.setAttribute("mixin","stop_sign"),r.appendChild(M)}if(u[3]){var _=document.createElement("a-entity");_.setAttribute("position",{x:m/3,y:-h/2,z:.1}),_.setAttribute("rotation",{x:90,y:-90,z:-90}),_.setAttribute("mixin","stop_sign"),r.appendChild(_)}if(d[0]){var C=document.createElement("a-entity");C.setAttribute("position",{x:m/2,y:h/3,z:.3}),C.setAttribute("rotation",{x:210,y:90,z:90}),C.setAttribute("mixin","signal_left"),r.appendChild(C);var R=document.createElement("a-entity");R.setAttribute("position",{x:m/2,y:-h/3,z:.3}),R.setAttribute("rotation",{x:180,y:90,z:90}),R.setAttribute("mixin","signal_right"),r.appendChild(R)}if(d[1]){var O=document.createElement("a-entity");O.setAttribute("position",{x:-m/2,y:-h/3,z:.3}),O.setAttribute("rotation",{x:30,y:90,z:90}),O.setAttribute("mixin","signal_left"),r.appendChild(O);var N=document.createElement("a-entity");N.setAttribute("position",{x:-m/2,y:h/3,z:.3}),N.setAttribute("rotation",{x:0,y:90,z:90}),N.setAttribute("mixin","signal_right"),r.appendChild(N)}if(d[2]){var P=document.createElement("a-entity");P.setAttribute("position",{x:-m/3,y:h/2,z:.1}),P.setAttribute("rotation",{x:120,y:90,z:90}),P.setAttribute("mixin","signal_left"),r.appendChild(P);var j=document.createElement("a-entity");j.setAttribute("position",{x:m/3,y:h/2,z:.1}),j.setAttribute("rotation",{x:90,y:90,z:90}),j.setAttribute("mixin","signal_right"),r.appendChild(j)}if(d[3]){var I=document.createElement("a-entity");I.setAttribute("position",{x:m/3,y:-h/2,z:.1}),I.setAttribute("rotation",{x:-60,y:90,z:90}),I.setAttribute("mixin","signal_left"),r.appendChild(I);var L=document.createElement("a-entity");L.setAttribute("position",{x:-m/3,y:-h/2,z:.1}),L.setAttribute("rotation",{x:-90,y:90,z:90}),L.setAttribute("mixin","signal_right"),r.appendChild(L)}if(p[0]){var B=document.createElement("a-entity");B.setAttribute("position",{x:m/2-2,z:.11}),B.setAttribute("rotation",{x:0,y:0,z:180}),B.setAttribute("scale",{y:h/12}),B.setAttribute("mixin","markings crosswalk-zebra"),r.appendChild(B)}if(p[1]){var F=document.createElement("a-entity");F.setAttribute("position",{x:-m/2+2,z:.11}),F.setAttribute("rotation",{x:0,y:0,z:180}),F.setAttribute("scale",{y:h/12}),F.setAttribute("mixin","markings crosswalk-zebra"),r.appendChild(F)}if(p[2]){var D=document.createElement("a-entity");D.setAttribute("position",{y:-h/2+2,z:.11}),D.setAttribute("rotation",{x:0,y:0,z:90}),D.setAttribute("scale",{y:m/12}),D.setAttribute("mixin","markings crosswalk-zebra"),r.appendChild(D)}if(p[3]){var z=document.createElement("a-entity");z.setAttribute("position",{y:h/2-2,z:.11}),z.setAttribute("rotation",{x:0,y:0,z:90}),z.setAttribute("scale",{y:m/12}),z.setAttribute("mixin","markings crosswalk-zebra"),r.appendChild(z)}}}),AFRAME.registerComponent("street-environment",{schema:{preset:{type:"string",default:"day",oneOf:["day","night","color","sunny-morning","cloudy-afternoon","sunny-afternoon","sunny-noon","foggy","cloudy"]},backgroundColor:{type:"color",default:"#FFF"}},setEnvOption:function(){var t=this.sky,e=this.light1,r=this.light2,i="//assets.3dstreet.app/";"night"===this.data.preset?(e.setAttribute("light","intensity",.5),r.setAttribute("light","intensity",.15),t.setAttribute("visible",!0),t.setAttribute("color","#444"),t.setAttribute("src","#sky-night"),t.setAttribute("rotation","0 0 0")):"day"===this.data.preset?(e.setAttribute("light","intensity",.8),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","#sky"),t.setAttribute("rotation","0 20 0"),r.setAttribute("light","intensity: 2.2; castShadow: true; shadowCameraBottom: -20; shadowCameraLeft: -30; shadowCameraRight: 40; shadowCameraTop: 30; shadowMapHeight: 2048; shadowMapWidth: 2048"),r.setAttribute("position","-40 56 -16")):"sunny-morning"===this.data.preset?(e.setAttribute("light","intensity",.8),r.setAttribute("light","intensity: 2.2; castShadow: true; shadowCameraBottom: -20; shadowCameraLeft: -30; shadowCameraRight: 40; shadowCameraTop: 30; shadowMapHeight: 2048; shadowMapWidth: 2048"),r.setAttribute("position","-60 56 -16"),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(i,"images/skies/2048-polyhaven-qwantani_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):"cloudy-afternoon"===this.data.preset?(e.setAttribute("light","intensity",2),r.setAttribute("light","intensity",.6),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(i,"images/skies/2048-mud_road_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):"sunny-afternoon"===this.data.preset?(e.setAttribute("light","intensity",2),r.setAttribute("light","intensity: 2.2; castShadow: true; shadowCameraBottom: -20; shadowCameraLeft: -30; shadowCameraRight: 40; shadowCameraTop: 30; shadowMapHeight: 2048; shadowMapWidth: 2048"),r.setAttribute("position","60 56 -16"),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(i,"images/skies/2048-kloofendal_43d_clear_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):"sunny-noon"===this.data.preset?(e.setAttribute("light","intensity",2),r.setAttribute("light","intensity: 2.2; castShadow: true; shadowCameraBottom: -20; shadowCameraLeft: -30; shadowCameraRight: 40; shadowCameraTop: 30; shadowMapHeight: 2048; shadowMapWidth: 2048"),r.setAttribute("position","5 56 -16"),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(i,"images/skies/2048-kloppenheim_05_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):"foggy"===this.data.preset?(e.setAttribute("light","intensity",2),r.setAttribute("light","intensity: 0.6; castShadow: false;"),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(i,"images/skies/2048-kloofendal_misty_morning_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):"cloudy"===this.data.preset?(e.setAttribute("light","intensity",2),r.setAttribute("light","intensity",.6),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(i,"images/skies/2048-kloofendal_48d_partly_cloudy_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):(t.setAttribute("visible",!1),this.scene.setAttribute("background","color",this.data.backgroundColor))},init:function(){var t=this.el;this.scene=document.querySelector("a-scene"),this.light1=document.createElement("a-entity");var e=this.light1;e.setAttribute("id","env-light1"),e.setAttribute("light",{type:"ambient",color:"#FFF"}),t.appendChild(e),this.light2=document.createElement("a-entity");var r=this.light2;r.setAttribute("id","env-light2"),r.setAttribute("position","-60 56 -16"),r.setAttribute("light","intensity: 2.2; castShadow: true; shadowCameraBottom: -20; shadowCameraLeft: -30; shadowCameraRight: 40; shadowCameraTop: 30; shadowMapHeight: 2048; shadowMapWidth: 2048"),t.appendChild(r),this.sky=document.createElement("a-sky");var i=this.sky;i.setAttribute("id","env-sky"),i.setAttribute("data-ignore-raycaster",""),t.appendChild(i)},update:function(t){this.setEnvOption()}}),AFRAME.registerComponent("wheel",{schema:{speed:{type:"number",default:1},wheelDiameter:{type:"number",default:1}},init:function(){var t=this.el,e=this;t.addEventListener("model-loaded",(function(r){var i=t.getObject3D("mesh");i&&(e.wheel_F_L=i.getObjectByName("wheel_F_L"),e.wheel_F_R=i.getObjectByName("wheel_F_R"),e.wheel_B_L=i.getObjectByName("wheel_B_L"),e.wheel_B_R=i.getObjectByName("wheel_B_R"),e.wheel_B_L_2=i.getObjectByName("wheel_B_L_2"),e.wheel_B_R_2=i.getObjectByName("wheel_B_R_2"))}))},tick:function(t,e){var r=this.data.speed/1e3/this.data.wheelDiameter*2*e;this.wheel_F_L&&this.wheel_F_L.rotateY(r),this.wheel_F_R&&this.wheel_F_R.rotateY(r),this.wheel_B_L&&this.wheel_B_L.rotateY(r),this.wheel_B_L_2&&this.wheel_B_L_2.rotateY(r),this.wheel_B_R_2&&this.wheel_B_R_2.rotateY(r),this.wheel_B_R&&this.wheel_B_R.rotateY(r)}})})(),{}})()));
//# sourceMappingURL=aframe-street-component.js.map