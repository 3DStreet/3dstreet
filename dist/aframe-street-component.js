/*! For license information please see aframe-street-component.js.LICENSE.txt */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var r in i)("object"==typeof exports?exports:t)[r]=i[r]}}(self,(()=>(()=>{var t={68:t=>{var e=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2,new THREE.Vector2];function i(t,i,r,a){const n=1/a,o=1/r;return e[0].set(n*i,o*t+o),e[1].set(n*i,o*t),e[2].set(n*i+n,o*t),e[3].set(n*i+n,o*t+o),e}AFRAME.registerComponent("atlas-uvs",{dependencies:["geometry"],schema:{totalColumns:{type:"int",default:1},totalRows:{type:"int",default:1},column:{type:"int",default:1},row:{type:"int",default:1}},update:function(){const t=this.data,e=i(t.row-1,t.column-1,t.totalRows,t.totalColumns),r=this.el.getObject3D("mesh").geometry;var a=new Float32Array([e[0].x,e[0].y,e[3].x,e[3].y,e[1].x,e[1].y,e[2].x,e[2].y]);r.setAttribute("uv",new THREE.BufferAttribute(a,2)),r.uvsNeedUpdate=!0}}),AFRAME.registerComponent("dynamic-texture-atlas",{schema:{canvasId:{default:"dynamicAtlas"},canvasHeight:{default:1024},canvasWidth:{default:1024},debug:{default:!1},numColumns:{default:8},numRows:{default:8}},multiple:!0,init:function(){const t=this.canvas=document.createElement("canvas");t.id=this.data.canvasId,t.height=this.data.canvasHeight,t.width=this.data.canvasWidth,this.ctx=t.getContext("2d"),document.body.appendChild(t),this.data.debug&&(t.style.left=0,t.style.top=0,t.style.position="fixed",t.style.zIndex=9999999999)},drawTexture:function(t,e,r,a,n){const o=this.canvas,s=this.data;t.complete||(t.onload=()=>{this.drawTexture(t,e,r)});const l=n||o.height/s.numRows,c=a||o.width/s.numColumns;return this.ctx.drawImage(t,c*e,c*r,c,l),i(e,r,s.numRows,s.numColumns)}}),t.exports.getGridUvs=i},3786:(t,e,i)=>{function r(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var n=i(5384),o=(i(5676),i(4594).segmentVariants);function s(t){for(var e=t.objectMixinId,i=void 0===e?"":e,r=t.parentEl,a=void 0===r?null:r,n=t.step,o=void 0===n?15:n,s=t.radius,l=void 0===s?60:s,c=t.rotation,d=void 0===c?"0 0 0":c,u=t.positionXYString,p=void 0===u?"0 0":u,m=t.length,h=void 0===m?void 0:m,f=t.randomY,g=void 0!==f&&f,y=-1*l;y<=l;y+=o){var b=document.createElement("a-entity");b.setAttribute("mixin",i),b.setAttribute("class",i),b.setAttribute("position",p+" "+y),h&&b.addEventListener("loaded",(function(t){t.target.setAttribute("geometry","height",h),t.target.setAttribute("atlas-uvs","c",1)})),g?b.setAttribute("rotation","0 "+Math.floor(361*Math.random())+" 0"):b.setAttribute("rotation",d),a.append(b)}}function l(t){var e=document.createElement("a-entity");return e.setAttribute("class","stencils-parent"),e.setAttribute("position",t),e}function c(t,e){var i=document.createElement("a-entity"),r={primitive:"box",depth:t,width:.1,height:.2};return i.setAttribute("geometry",r),i.setAttribute("material",{color:"#8f8f8f",metalness:1,emissive:"#828282",emissiveIntensity:.5,roughness:.1}),i.setAttribute("class","rails"),i.setAttribute("shadow","receive:true; cast: true"),i.setAttribute("position",e+" 0.2 0"),i}function d(t,e){var i=document.createElement("a-entity");i.setAttribute("class","track-parent"),i.setAttribute("position","0 -0.2 0");var r={tram:.7175,trolley:.5335}[e];return i.append(c(t,r)),i.append(c(t,-r)),i}function u(t){var e=document.createElement("a-entity");return e.setAttribute("class",t),e}function p(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2.25,r=u("dividers-".concat(t,"-parent"));return s({objectMixinId:"dividers-".concat(t),parentEl:r,step:i,radius:e}),r}function m(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2.25,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0 0 0",a=u("".concat(t,"-parent"));return s({objectMixinId:t,parentEl:a,step:i,radius:e,rotation:r}),a}function h(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)}function f(t,e){return Math.random()*(e-t)+t}function g(t,e,i){var r=Math.floor((e-t)/i)+1;return Array(r).fill().map((function(e,r){return t+r*i})).sort((function(){return.5-Math.random()}))}function y(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"random",n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=[-.37*t,.37*t],s=g(-.5*r,.5*r,1.5),l=parseInt({empty:0,sparse:.03,normal:.125,dense:.25}[e]*r,10),c=u("pedestrians-parent");c.setAttribute("position",{y:i});for(var d=0;d<l;d++){var p=!0===n?"a_char"+String(h(1,8)):"char"+String(h(1,16)),m=f(o[0],o[1]),y=s.pop(),b=document.createElement("a-entity"),v="inbound";b.setAttribute("position",{x:m,y:0,z:y}),b.setAttribute("mixin",p),Math.random()<.5&&"random"===a&&(b.setAttribute("rotation","0 180 0"),v="outbound"),n&&A(b,1.4,r,m,0,y,v),c.append(b)}return c}function b(t){return"colored"===t|"red"===t?"surface-red bus-lane":"blue"===t?"surface-blue bus-lane":"grass"===t?"surface-green bus-lane":"bus-lane"}function v(t,e,i){var r,a,n,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,l=t.object3D,c={start:-.5*(n=i)+.5*(o=s||(r=l,a=(new THREE.Box3).setFromObject(r),{x:a.max.x-a.min.x,y:a.max.y-a.min.y,z:a.max.z-a.min.z})[e]),end:.5*n-.5*o},d=c.start,u=c.end,p="set".concat(e.toUpperCase()),m=f(d,u);return l.position[p](m),m}function x(t,e,i,r){if(r){var a="inbound"===t[0]?0:180,n=document.createElement("a-entity");n.setAttribute("rotation","0 "+a+" 0"),n.setAttribute("mixin",e),n.setAttribute("class",e);var o=v(n,"z",i,23);return n.setAttribute("position","0 0 "+o),n}}function w(t,e,i){if(i){var r="inbound"===t[0]?0:180,a=document.createElement("a-entity"),n=document.createElement("a-entity");n.setAttribute("rotation","0 "+r+" 0"),n.setAttribute("mixin","bus");var o=v(n,"z",e,12);return n.setAttribute("position","0 0 "+o),a.append(n),a}}function A(t,e,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5?arguments[5]:void 0,o=i/e*1e3,s="outbound"===(arguments.length>6?arguments[6]:void 0)?-i/2:i/2,l=Math.abs(s-n)/e*1e3,c={property:"position",easing:"linear",loop:"false",from:{x:r,y:a,z:n},to:{z:s},dur:l},d={property:"position",easing:"linear",loop:"true",from:{x:r,y:a,z:-s},to:{x:r,y:a,z:s},delay:l,dur:o};return t.setAttribute("animation__1",c),t.setAttribute("animation__2",d),t}function E(t,e,i){var a,n,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;if(!(arguments.length>4&&void 0!==arguments[4])||arguments[4]){var c=0,d=(n=3,function(t){if(Array.isArray(t))return t}(a=t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,a,n,o,s=[],l=!0,c=!1;try{if(n=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(r=n.call(i)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,a=t}finally{try{if(!l&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(a,n)||r(a,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=d[0],p=d[1],m=d[2];2===t.length&&(m=p,p=u);var h,f={inbound:0,outbound:180,sideways:{left:-90,right:90},"angled-front-left":-60,"angled-front-right":60,"angled-rear-left":-120,"angled-rear-right":120};if(h="sideways"==u?f.sideways[p]:f[u],"pedestrian"===m)return y(e,"normal",0,i,p,o);var b=document.createElement("a-entity");if(1==t.length)return b;var x={car:{mixin:"sedan-rig",wheelDiameter:.76,length:5.17,width:2},microvan:{mixin:"suv-rig",wheelDiameter:.84,length:5,width:2},truck:{mixin:"box-truck-rig",wheelDiameter:1.05,length:6.95,width:2.5},av:{mixin:"self-driving-cruise-car-rig",wheelDiameter:.76,length:5.17,width:2}};if(x[m]||(m="car"),s>1){var w=i/2,E=l/2+l,S=g(-w+E,w-E,l).slice(0,s),k="sideways"==u||u.includes("angled")?"width":"length",T=x[m][k];S.forEach((function(t){var e=l-T-.2,i=-e/2+e*Math.random();e>0&&M(t+i,m)}))}else M(void 0,m);return b}function M(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=x[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"car"],r=document.createElement("a-entity");return t||(t=v(r,"z",i,e.length)),r.setAttribute("position","0 0 ".concat(t)),r.setAttribute("mixin",e.mixin),r.setAttribute("rotation","0 ".concat(h," 0")),o&&(c=5,r.setAttribute("wheel",{speed:c,wheelDiameter:e.wheelDiameter}),A(r,c,i,0,0,t,p)),b.append(r),r}}function S(t,e){var i=document.createElement("a-entity"),r=document.createElement("a-entity"),a="left"===t[0]?0:180;r.setAttribute("rotation","0 "+a+" 0"),r.setAttribute("mixin","food-trailer-rig");var n=v(r,"z",e,7);return r.setAttribute("positon","0 0 "+n),i.append(r),i}function k(t){if(t){var e=document.createElement("a-entity"),i=document.createElement("a-entity");i.setAttribute("position","0 1.75 0"),i.setAttribute("rotation","0 0 0"),i.setAttribute("mixin","magic-carpet"),e.append(i);var r=document.createElement("a-entity");return r.setAttribute("position","0 1.75 0"),r.setAttribute("rotation","0 0 0"),r.setAttribute("mixin","Character_1_M"),e.append(r),e}}function T(t,e,i){var r=e/2+e;return g(-t/2+r/2,t/2-r/2,r).slice(0,i)}function M(t,e){var i=document.createElement("a-entity");return T(t,2.27,5).forEach((function(t){var r=document.createElement("a-entity");r.setAttribute("mixin","outdoor_dining"),r.setAttribute("position",{y:e,z:t}),i.append(r)})),i}function O(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(arguments.length>4?arguments[4]:void 0){var n=document.createElement("a-entity"),o=h(2,5),s=["cyclist-cargo","cyclist1","cyclist2","cyclist3","cyclist-dutch","cyclist-kid"],l=s.length,c="Bicycle_1";return T(r,2.03,o).forEach((function(o){var d=document.createElement("a-entity"),u="inbound"===t[0]?0:180;d.setAttribute("rotation","0 "+u+" 0"),d.setAttribute("position",{y:i,z:o}),a&&(d.setAttribute("animation-mixer",""),A(d,5,r,0,i,o,t[0])),c="bike-lane"===e?s[h(0,l)]:"ElectricScooter_1",d.setAttribute("mixin",c),n.append(d)})),n}}function C(t,e){if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){var i=document.createElement("a-entity");return T(e,5,h(2,4)).forEach((function(e){var r=document.createElement("a-entity"),a="inbound"===t[1]?0:180;r.setAttribute("rotation","0 "+a+" 0"),"taxi"===t[0]?r.setAttribute("mixin","sedan-taxi-rig"):"rideshare"===t[0]&&r.setAttribute("mixin","sedan-rig"),r.setAttribute("position",{z:e}),i.append(r)})),i}}function _(){var t=document.createElement("a-entity");return t.setAttribute("class","bench-parent"),t.setAttribute("position","0 0.2 3.5"),t}function N(t){var e=document.createElement("a-entity");return e.setAttribute("class","bikerack-parent"),e.setAttribute("position",{y:t,z:-3.5}),e}function R(t,e){var i=document.createElement("a-entity");i.setAttribute("class","bikeshare"),i.setAttribute("mixin","bikeshare");var r="left"===t[0]?90:270;return i.setAttribute("rotation","0 "+r+" 0"),i.setAttribute("position",{y:e}),i}function P(t,e){var i=document.createElement("a-entity");return T(t,4.03,3).forEach((function(t){var r=document.createElement("a-entity");r.setAttribute("class","parklet"),r.setAttribute("position",{x:0,y:.02,z:t}),r.setAttribute("mixin","parklet");var a="left"===e[0]?90:270;r.setAttribute("rotation",{y:a}),i.append(r)})),i}function L(){var t=document.createElement("a-entity");return t.setAttribute("class","tree-parent"),t.setAttribute("position","0 0.2 7"),t}function j(){var t=document.createElement("a-entity");return t.setAttribute("class","lamp-parent"),t.setAttribute("position","0 0.2 0"),t}function I(t,e){var i=document.createElement("a-entity");return i.setAttribute("class","bus-stop"),i.setAttribute("rotation","0 "+t+" 0"),i.setAttribute("mixin","bus-stop"),i.setAttribute("position",{y:e}),i}function B(){var t=document.createElement("a-entity");return t.setAttribute("class","brt-station"),t.setAttribute("mixin","brt-station"),t}function F(t,e,i,r,a){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=document.createElement("a-entity"),s=[.2,.4,.6][n];return 0===n?e=-.1:2===n&&(e=.1),o.setAttribute("geometry","primitive: box; \n    height: ".concat(s,"; \n    depth: ").concat(r,";\n    width: ").concat(t,";")),o.setAttribute("position",{y:e}),o.setAttribute("mixin",i),0!==a.length&&o.setAttribute("material","repeat: ".concat(a[0]," ").concat(a[1])),o}function D(t,e,i,r,a){var n=document.createElement("a-entity"),o="1 "+r/150+" 1";return n.setAttribute("rotation","270 "+e+" 0"),n.setAttribute("scale",o),n.setAttribute("position","0 "+t+" 0"),n.setAttribute("mixin",i),0!==a.length&&n.setAttribute("material","repeat: ".concat(a[0]," ").concat(a[1])),n}function H(t,e){if("separator"!=t){var i=o[t];i?i.includes(e)||(STREET.notify.warningMessage("The '".concat(e,"' variant of segment '").concat(t,"' is not yet supported in 3DStreet")),console.log("The '".concat(e,"' variant of segment '").concat(t,"' is not yet supported in 3DStreet"))):(STREET.notify.warningMessage("The '".concat(t,"' segment type is not yet supported in 3DStreet")),console.log("The '".concat(t,"' segment type is not yet supported in 3DStreet")))}}t.exports.processSegments=function(t,e,i,o,c){var u=i/2;i>12&&(u=(i-12)/2),e&&(t=function(t){function e(t){return"lane"===t.slice(t.length-4)||"light-rail"===t||"streetcar"===t||"flex-zone"===t}return t.reduce((function(t,i,r,a){if(0===r)return t.concat(i);var n=a[r-1];if(e(i.type)&&e(n.type)){var o="solid";i.type===n.type&&(o="dashed"),("drive-lane"===i.type&&"turn-lane"===n.type||"drive-lane"===n.type&&"turn-lane"===i.type)&&(o="dashed"),i.variantString.split("|")[0]!==n.variantString.split("|")[0]&&(o="doubleyellow","bike-lane"===i.type&&"bike-lane"===n.type&&(o="shortdashedyellow"),"flex-zone"!==i.type&&"flex-zone"!==n.type||(o="solid")),"turn-lane"===i.type&&"shared"===i.variantString.split("|")[1]?o="soliddashedyellow":"turn-lane"===n.type&&"shared"===n.variantString.split("|")[1]&&(o="soliddashedyellowinverted"),"parking-lane"!==i.type&&"parking-lane"!==n.type||(o="invisible"),t.push({type:"separator",variantString:o,width:0,elevation:i.elevation})}return(e(i.type)&&"divider"===n.type||e(n.type)&&"divider"===i.type)&&t.push({type:"separator",variantString:"solid",width:0,elevation:i.elevation}),t.push(i),t}),[])}(t));var f,g=function(t){var e=document.createElement("a-entity"),i=0-t.reduce((function(t,e){return t+e.width}),0)/2;return e.setAttribute("position",i+" 0 0"),e}(t);g.classList.add("street-parent"),g.setAttribute("data-layer-name","Street Segments Container");for(var v,A,T,z,V=0,G=0;G<t.length;G++){var U=document.createElement("a-entity");U.classList.add("segment-parent-"+G);var Y=t[G].width,q=(V+=Y)-.5*Y,W=0,X=t[G].variantString?t[G].variantString.split("|"):"";H(t[G].type,t[G].variantString);var J=t[G].elevation;elevationLevels=[0,.2,.4];var Q=elevationLevels[J];U.setAttribute("data-elevation-posY",Q);var Z="inbound"===X[0]||"inbound"===X[1]?180:0,K="outbound"===X[0]||"outbound"===X[1]?1:-1,$=t[G].type,tt=[];if("drive-lane"===t[G].type&&"sharrow"===X[1]){var et=l({y:Q+.015});s({objectMixinId:"stencils sharrow",parentEl:et,rotation:"-90 "+Z+" 0",step:10,radius:u}),U.append(et)}else if("bike-lane"===t[G].type||"scooter"===t[G].type){var it=l({y:Q+.015});$="red"===(z=X[1])?"surface-red bike-lane":"blue"===z?"surface-blue bike-lane":"green"===z?"surface-green bike-lane":"bike-lane",s({objectMixinId:"stencils bike-arrow",parentEl:it,rotation:"-90 "+Z+" 0",step:20,radius:u}),U.append(it),U.append(O(X,t[G].type,Q,i,c,o))}else if("light-rail"===t[G].type||"streetcar"===t[G].type){$=b(X[1]);var rt="streetcar"===t[G].type?"trolley":"tram";U.append(x(X,rt,i,c));var at=d(i,rt);U.append(at)}else if("turn-lane"===t[G].type){$="drive-lane";var nt=X[1];"inbound"===X[0]&&(nt=nt.replace(/left|right/g,(function(t){return"left"===t?"right":"left"}))),"shared"===X[1]&&(nt="left"),"left-right-straight"===X[1]&&(nt="all");var ot="stencils "+nt,st=l({y:Q+.015});if(s({objectMixinId:ot,parentEl:st,rotation:"-90 "+Z+" 0",step:15,radius:u}),U.append(st),"shared"===X[1]){var lt=l({y:Q+.015,z:-3*K});s({objectMixinId:ot,parentEl:lt,rotation:"-90 "+(Z+180)+" 0",step:15,radius:u}),U.append(lt)}}else if("divider"===t[G].type&&"bollard"===X[0]){$="divider";var ct=(T=void 0,(T=document.createElement("a-entity")).setAttribute("class","safehit-parent"),T);s({objectMixinId:"safehit",parentEl:ct,step:4,radius:u}),U.append(ct),tt[0]=1,tt[1]=parseInt(i)/4}else if("divider"===t[G].type&&"flowers"===X[0])$="grass",U.append(p("flowers",u,2.25));else if("divider"===t[G].type&&"planting-strip"===X[0])$="grass",U.append(p("planting-strip",u,2.25));else if("divider"===t[G].type&&"planter-box"===X[0])$="grass",U.append(p("planter-box",u,2.45));else if("divider"===t[G].type&&"palm-tree"===X[0]){$="grass";var dt=L();s({objectMixinId:"palm-tree",parentEl:dt,randomY:!0,radius:u}),U.append(dt)}else if("divider"===t[G].type&&"big-tree"===X[0]){$="grass";var ut=L();s({objectMixinId:"tree3",parentEl:ut,randomY:!0,radius:u}),U.append(ut)}else if("divider"===t[G].type&&"bush"===X[0])$="grass",U.append(p("bush",u,2.25));else if("divider"===t[G].type&&"dome"===X[0])$="divider",U.append(p("dome",u,2.25)),tt[0]=1,tt[1]=parseInt(i)/4;else if("divider"===t[G].type)$="divider",tt[0]=1,tt[1]=parseInt(i)/4;else if("temporary"===t[G].type&&"barricade"===X[0])$="drive-lane",U.append(m("temporary-barricade",u,2.25));else if("temporary"===t[G].type&&"traffic-cone"===X[0])$="drive-lane",U.append(m("temporary-traffic-cone",u,2.25));else if("temporary"===t[G].type&&"jersey-barrier-plastic"===X[0])$="drive-lane",U.append(m("temporary-jersey-barrier-plastic",u,2.25));else if("temporary"===t[G].type&&"jersey-barrier-concrete"===X[0])$="drive-lane",U.append(m("temporary-jersey-barrier-concrete",u,2.93));else if("bus-lane"===t[G].type||"brt-lane"===t[G].type){$=b(X[1]),U.append(w(X,i,c));var pt=void 0;s({objectMixinId:"stencils word-bus",parentEl:pt=l({y:Q+.015}),rotation:"-90 "+Z+" 0",step:50,radius:u}),U.append(pt),s({objectMixinId:"stencils word-taxi",parentEl:pt=l({y:Q+.015,z:10}),rotation:"-90 "+Z+" 0",step:50,radius:u}),U.append(pt),s({objectMixinId:"stencils word-only",parentEl:pt=l({y:Q+.015,z:20}),rotation:"-90 "+Z+" 0",step:50,radius:u}),U.append(pt)}else if("drive-lane"===t[G].type){var mt="animated"===X[2]||o,ht=h(2,3);U.append(E(X,Y,i,mt,c,ht,7.3))}else if("food-truck"===t[G].type)$="drive-lane",U.append(S(X,i));else if("flex-zone"===t[G].type){$="bright-lane",U.append(C(X,i,c));var ft=void 0;s({objectMixinId:"stencils word-loading-small",parentEl:ft=l({y:Q+.015,z:5}),rotation:"-90 "+Z+" 0",step:50,radius:u}),U.append(ft),s({objectMixinId:"stencils word-only-small",parentEl:ft=l({y:Q+.015,z:-5}),rotation:"-90 "+Z+" 0",step:50,radius:u}),U.append(ft)}else if("sidewalk"===t[G].type&&"empty"!==X[0]){var gt="animated"===X[1]||o;U.append(y(Y,X[0],Q,i,"random",gt))}else if("sidewalk-wayfinding"===t[G].type)U.append((v=void 0,A=void 0,A=document.createElement("a-entity"),(v=document.createElement("a-entity")).setAttribute("position","0 1 0"),v.setAttribute("mixin","wayfinding-box"),A.append(v),(v=document.createElement("a-entity")).setAttribute("position","0 1.2 0.06"),v.setAttribute("geometry","primitive: plane; width: 0.8; height: 1.6"),v.setAttribute("material","src:#wayfinding-map"),A.append(v),(v=document.createElement("a-entity")).setAttribute("position","0 1.2 -0.06"),v.setAttribute("rotation","0 180 0"),v.setAttribute("geometry","primitive: plane; width: 0.8; height: 1.6"),v.setAttribute("material","src:#wayfinding-map"),A.append(v),A));else if("sidewalk-bench"===t[G].type){var yt=_(),bt="right"===X[0]?-90:90;"center"===X[0]?(s({objectMixinId:"bench_orientation_center",parentEl:yt,rotation:"0 "+bt+" 0",radius:u}),U.append(yt)):(s({objectMixinId:"bench",parentEl:yt,rotation:"0 "+bt+" 0",radius:u}),U.append(yt))}else if("sidewalk-bike-rack"===t[G].type){var vt=N(Q);s({objectMixinId:"bikerack",parentEl:vt,rotation:"0 "+("sidewalk-parallel"===X[1]?90:0)+" 0",radius:u}),U.append(vt)}else if("magic-carpet"===t[G].type)$="drive-lane",U.append(k(c));else if("outdoor-dining"===t[G].type)$="road"===X[1]?"drive-lane":"sidewalk",U.append(M(i,Q));else if("parklet"===t[G].type)$="drive-lane",U.append(P(i,X));else if("bikeshare"===t[G].type)U.append(R(X,Q));else if("utilities"===t[G].type){var xt=m("utility_pole",u,15,"right"===X[0]?"0 180 0":"0 0 0");U.append(xt)}else if("sidewalk-tree"===t[G].type){var wt=L();s({objectMixinId:rt="palm-tree"===X[0]?"palm-tree":"tree3",parentEl:wt,randomY:!0,radius:u}),U.append(wt)}else if("sidewalk-lamp"!==t[G].type||"modern"!==X[1]&&"pride"!==X[1]){if("sidewalk-lamp"===t[G].type&&"traditional"===X[1]){var At=j();s({objectMixinId:"lamp-traditional",parentEl:At,radius:u}),U.append(At)}else if("transit-shelter"===t[G].type){var Et="left"===X[0]?90:270;U.append(I(Et,Q))}else if("brt-station"===t[G].type)U.append(B());else if("separator"===t[G].type&&"dashed"===X[0])$="markings dashed-stripe",W=Q+.01,tt[0]=1,tt[1]=parseInt(i/6);else if("separator"===t[G].type&&"solid"===X[0])$="markings solid-stripe",W=Q+.01;else if("separator"===t[G].type&&"doubleyellow"===X[0])$="markings solid-doubleyellow",W=Q+.01;else if("separator"===t[G].type&&"shortdashedyellow"===X[0])$="markings yellow short-dashed-stripe",W=Q+.01,tt[0]=1,tt[1]=parseInt(i/3);else if("separator"===t[G].type&&"soliddashedyellow"===X[0])$="markings yellow solid-dashed",W=Q+.01;else if("separator"===t[G].type&&"soliddashedyellowinverted"===X[0])$="markings yellow solid-dashed",W=Q+.01,Z="180",tt[0]=1,tt[1]=parseInt(i/6);else if("parking-lane"===t[G].type){var St;$="bright-lane";var kt="stencils parking-t",Tt=6,Mt={outbound:90,inbound:90,sideways:0,"angled-front-left":30,"angled-front-right":-30,"angled-rear-left":-30,"angled-rear-right":30}[X[0]],Ot=void 0,Ct=Y/2;90==Mt&&"right"==X[1]?(Mt=-90,Ct=.75-Ct):Ct-=.75,("sideways"==X[0]||X[0].includes("angled"))&&(Tt=3,Ot=Y,Ct=0,kt="markings solid-stripe"),markingPosXY=Ct+" 0";var _t=i/2-Tt;U.append(E([].concat(function(t){if(Array.isArray(t))return a(t)}(f=X)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(f)||r(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),["car"]),Y,i,!1,c,5,Tt)),X[1],s({objectMixinId:kt,parentEl:St=l({y:Q+.015}),positionXYString:markingPosXY,rotation:"-90 90 "+Mt,length:Ot,step:Tt,radius:_t}),U.append(St)}}else{var Nt=j();"both"===X[0]?(s({objectMixinId:"lamp-modern-double",parentEl:Nt,rotation:"0 0 0",radius:u}),U.append(Nt)):(s({objectMixinId:"lamp-modern",parentEl:Nt,rotation:"0 "+("right"===X[0]?0:180)+" 0",radius:u}),U.append(Nt)),"pride"!==X[1]||"right"!==X[0]&&"both"!==X[0]||s({objectMixinId:"pride-flag",parentEl:Nt,positionXYString:"0.409 5",radius:u}),"pride"!==X[1]||"left"!==X[0]&&"both"!==X[0]||s({objectMixinId:"pride-flag",parentEl:Nt,rotation:"0 -180 0",positionXYString:"-0.409 5",radius:u})}n.isSidewalk(t[G].type)&&($="sidewalk",tt[0]=Y/1.5,tt[1]=parseInt(i/2)),"separator"!==t[G].type?U.append(F(Y,W,$,i,tt,J)):U.append(D(W,Z,$,i,tt)),g.append(U),U.setAttribute("position",q+" 0 0"),U.setAttribute("data-layer-name","Segment • "+t[G].type+", "+X[0])}var Rt=document.createElement("a-box"),Pt=V/2;return console.log("xPos",Pt),console.log("`${xPos} -1.1 0`","".concat(Pt," -1.1 0")),Rt.setAttribute("position","".concat(Pt," -1.1 0")),Rt.setAttribute("height",2),Rt.setAttribute("width",V),Rt.setAttribute("depth",i-.2),Rt.setAttribute("material","color: #664B00;"),Rt.setAttribute("data-layer-name","Underground"),g.append(Rt),g},t.exports.processBuildings=function(t,e,i,r,a){var o=document.createElement("a-entity"),l=.45*a;return o.classList.add("buildings-parent"),o.setAttribute("data-layer-name","Buildings & Blocks Container"),o.setAttribute("position","0 0.2 0"),[t,e].forEach((function(t,e){if(0!==t.length){var c,d=0===e?"left":"right",u="left"===d?-1:1,p=(a/4+i/2)*u,m=(75+i/2)*u;if(r)"waterfront"===t?((c=document.createElement("a-ocean-box")).setAttribute("geometry",{primitive:"box",depth:a,width:a/2,height:2,segmentsHeight:1,segmentsDepth:10,segmentsWidth:10}),c.setAttribute("position",{y:-3})):((c=document.createElement("a-box")).setAttribute("depth",a),c.setAttribute("height",2),c.setAttribute("width",a/2),c.setAttribute("shadow",""),c.setAttribute("mixin",{grass:"ground-grass-material",fence:"ground-grass-material","parking-lot":"ground-parking-lot-material",residential:"ground-grass-material",narrow:"ground-asphalt-material",wide:"ground-asphalt-material",arcade:"ground-tiled-concrete-material","compound-wall":"ground-asphalt-material"}[t]),c.setAttribute("position",{y:-1})),c.setAttribute("position",{x:p}),c.classList.add("ground-"+d),c.setAttribute("data-layer-name","Ground "+d+" • "+t),o.appendChild(c);var h={x:m,y:0,z:1===e?a/2:-a/2};switch(t){case"narrow":case"wide":h.x+=-72*u;break;case"residential":h.x+=-64*u,h.y=-.58,o.setAttribute("position","0 0.17 0");break;case"arcade":h.x+=-70.5*u}var f=function(t,e){var i=n.createBuildingsArray(a,t),r=JSON.stringify(i),o=document.createElement("a-entity");return o.setAttribute("rotation","0 "+90*e+" 0"),o.setAttribute("create-from-json","jsonString",r),o}(t,u);if(f.setAttribute("data-layer-name","Buildings "+d+" • "+t),f.setAttribute("position",h),o.append(f),"waterfront"===t||"compound-wall"===t){var g,y=m-150*u/2,b=document.createElement("a-entity");b.setAttribute("class","seawall-parent"),b.setAttribute("position",{x:y,z:4.5}),"compound-wall"===t?(b.setAttribute("position",{y:3}),b.setAttribute("position",{x:y+1.5*u}),g="left"===d?90:-90):g="left"===d?-90:90,b.classList.add("seawall-parent-"+d),o.appendChild(b),s({objectMixinId:"seawall",parentEl:b,rotation:"0 "+g+" 0",step:15,radius:l})}if("fence"===t||"parking-lot"===t){var v=m-150*u/2,x=document.createElement("a-entity");x.setAttribute("class","fence-parent"),x.setAttribute("position",v+" 0 4.625"),x.classList.add("fence-parent-"+m),s({objectMixinId:"fence",parentEl:x,rotation:"0 "+("right"===d?-90:90)+" 0",step:9.25,radius:l}),o.appendChild(x)}}})),o}},4956:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,i(a.key),a)}}function i(e){var i=function(e,i){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(i)?i:i+""}function r(e,i,r){return i=n(i),function(e,i){if(i&&("object"===t(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,a()?Reflect.construct(i,r||[],n(e).constructor):i.apply(e,r))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function n(t){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}var s=function(t){function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r(this,i)).isAssetItem=!0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(i,AFRAME.ANode),a=i,(n=[{key:"connectedCallback",value:function(){var t=this.getAttribute("categories"),e=this.getAttribute("url");e||(e="https://assets.3dstreet.app/",this.setAttribute("url",e));var i=function(t,e){console.log("[street]","Using street assets from",t);var i=.8,r={"sidewalk-props":'\n        \x3c!-- sidewalk props --\x3e\n        <img id="wayfinding-map" src="'.concat(t,'objects/wayfinding.jpg" crossorigin="anonymous" />\n        <a-asset-item id="streetProps" src="').concat(t,'sets/street-props/gltf-exports/draco/street-props.glb"></a-asset-item>\n        <a-asset-item id="brt-station-model" src="').concat(t,'sets/brt-station/gltf-exports/draco/brt-station.glb"></a-asset-item>\n        <a-mixin shadow id="brt-station" gltf-model="#brt-station-model" ></a-mixin>\n        <a-mixin shadow id="outdoor_dining" gltf-part="src: #streetProps; part: outdoor_dining"></a-mixin>\n        <a-mixin shadow id="bench_orientation_center" gltf-part="src: #streetProps; part: bench_orientation_center"></a-mixin>\n        <a-mixin shadow id="parklet" gltf-part="src: #streetProps; part: parklet"></a-mixin>\n        <a-mixin shadow id="utility_pole" gltf-part="src: #streetProps; part: utility_pole"></a-mixin>\n        <a-mixin shadow id="lamp-modern" gltf-part="src: #streetProps; part: street-light"></a-mixin>\n        <a-mixin shadow id="lamp-modern-double" gltf-part="src: #streetProps; part: street-light-double"></a-mixin>\n        <a-mixin shadow id="bikerack" gltf-part="src: #streetProps; part: bike_rack"></a-mixin>\n        <a-mixin shadow id="bikeshare" gltf-part="src: #streetProps; part: bike_share"></a-mixin>\n        <a-mixin shadow id="lamp-traditional" gltf-part="src: #streetProps; part: lamp_post_traditional" scale="2 2 2"></a-mixin>\n        <a-mixin shadow id="palm-tree" gltf-part="src: #streetProps; part: palmtree" scale="1 1.5 1"></a-mixin>\n        <a-mixin shadow id="bench" gltf-part="src: #streetProps; part: park_bench"></a-mixin>\n        <a-mixin shadow id="seawall" gltf-part="src: #streetProps; part: sea_wall"></a-mixin>\n        <a-mixin shadow id="track" gltf-part="src: #streetProps; part: track"></a-mixin>\n        <a-mixin shadow id="tree3" gltf-part="src: #streetProps; part: tree-01" scale="1.25 1.25 1.25"></a-mixin>\n        <a-mixin shadow id="bus-stop" gltf-part="src: #streetProps; part: transit-shelter-1"></a-mixin>\n        <a-mixin shadow id="pride-flag" position="0.409 3.345 0" rotation="0 0 0" scale="0.5 0.75 0" geometry="width:2;height:2;primitive:plane" material="side:double; src:').concat(t,'materials/rainbow-flag-poles_512.png;transparent: true;"></a-mixin>\n        <a-mixin shadow id="wayfinding-box" geometry="primitive: box; height: 2; width: 0.84; depth: 0.1" material="color: gray"></a-mixin>\n      '),people:'\n        \x3c!-- human characters --\x3e\n        <a-asset-item id="humans" src="'.concat(t,'sets/human-characters-poses-1/gltf-exports/draco/human-characters-poses-1.glb"></a-asset-item>\n        <a-mixin shadow id="char1" gltf-part="src: #humans; part: Character_1"></a-mixin>\n        <a-mixin shadow id="char2" gltf-part="src: #humans; part: Character_2"></a-mixin>\n        <a-mixin shadow id="char3" gltf-part="src: #humans; part: Character_3"></a-mixin>\n        <a-mixin shadow id="char4" gltf-part="src: #humans; part: Character_4"></a-mixin>\n        <a-mixin shadow id="char5" gltf-part="src: #humans; part: Character_5"></a-mixin>\n        <a-mixin shadow id="char6" gltf-part="src: #humans; part: Character_6"></a-mixin>\n        <a-mixin shadow id="char7" gltf-part="src: #humans; part: Character_7"></a-mixin>\n        <a-mixin shadow id="char8" gltf-part="src: #humans; part: Character_8"></a-mixin>\n        <a-asset-item id="humans2" src="').concat(t,'sets/human-characters-poses-2/gltf-exports/draco/human-characters-poses-2.glb"></a-asset-item>\n        <a-mixin shadow id="char9" gltf-part="src: #humans2; part: Character_9"></a-mixin>\n        <a-mixin shadow id="char10" gltf-part="src: #humans2; part: Character_10"></a-mixin>\n        <a-mixin shadow id="char11" gltf-part="src: #humans2; part: Character_11"></a-mixin>\n        <a-mixin shadow id="char12" gltf-part="src: #humans2; part: Character_12"></a-mixin>\n        <a-mixin shadow id="char13" gltf-part="src: #humans2; part: Character_13"></a-mixin>\n        <a-mixin shadow id="char14" gltf-part="src: #humans2; part: Character_14"></a-mixin>\n        <a-mixin shadow id="char15" gltf-part="src: #humans2; part: Character_15"></a-mixin>\n        <a-mixin shadow id="char16" gltf-part="src: #humans2; part: Character_16"></a-mixin>\n      '),"people-rigged":'          \n        <a-asset-item id="character1walk" src="'.concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-1-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char1" gltf-model="#character1walk" animation-mixer></a-mixin>\n        \n        <a-asset-item id="character2walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-2-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char2" gltf-model="#character2walk" animation-mixer></a-mixin>\n        <a-asset-item id="character3walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-3-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char3" gltf-model="#character3walk" animation-mixer></a-mixin>\n        <a-asset-item id="character4walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-4-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char4" gltf-model="#character4walk" animation-mixer></a-mixin>\n        <a-asset-item id="character5walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-5-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char5" gltf-model="#character5walk" animation-mixer></a-mixin>\n        <a-asset-item id="character6walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-6-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char6" gltf-model="#character6walk" animation-mixer></a-mixin>\n        <a-asset-item id="character7walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-7-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char7" gltf-model="#character7walk" animation-mixer></a-mixin>\n        <a-asset-item id="character8walk" src="').concat(t,'sets/human-characters-animation-seperated/gltf-exports/draco/character-8-walk.glb"></a-asset-item>\n        <a-mixin shadow id="a_char8" gltf-model="#character8walk" animation-mixer></a-mixin>\n      '),vehicles:'\n        \x3c!-- vehicles --\x3e\n        <a-asset-item id="magic-carpet-glb" src="'.concat(t,'sets/magic-carpet/gltf-exports/draco/magic-carpet.glb"></a-asset-item>\n        <a-mixin shadow id="Character_1_M" gltf-part="src: #magic-carpet-glb; part: Character_1_M"></a-mixin>\n        <a-mixin shadow id="magic-carpet" gltf-part="src: #magic-carpet-glb; part: magic-carpet"></a-mixin>\n        \x3c!-- micro mobility vehicles --\x3e\n        <a-asset-item id="microMobilityDevices" src="').concat(t,'sets/micro-mobility-devices/gltf-exports/draco/micro-mobility-devices_v01.glb"></a-asset-item>\n        <a-mixin shadow id="Bicycle_1" gltf-part="src: #microMobilityDevices; part: Bicycle_1"></a-mixin>\n        <a-mixin shadow id="ElectricScooter_1" gltf-part="src: #microMobilityDevices; part: ElectricScooter_1"></a-mixin>\n      '),"vehicles-rigged":'\n        \x3c!-- vehicles rigged --\x3e\n        <a-mixin shadow id="sedan-rig" gltf-model="url('.concat(t,'sets/vehicles-rig/gltf-exports/draco/toyota-prius-rig.glb)" ></a-mixin>\n        <a-mixin shadow id="sedan-taxi-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/sedan-taxi-rig.glb)"></a-mixin>\n        <a-mixin shadow id="suv-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/suv-rig.glb)"></a-mixin>\n        <a-mixin shadow id="box-truck-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/isuzu-truck-rig.glb)"></a-mixin>\n        <a-mixin shadow id="food-trailer-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/food-trailer-rig.glb)"></a-mixin>\n        <a-mixin shadow id="fire-truck-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/fire-truck-pumper-rig.glb)"></a-mixin>\n        <a-mixin shadow id="fire-ladder-rig" gltf-model="url(').concat(t,'sets/vehicles/gltf-exports/draco/fire_truck_ladder.glb)"></a-mixin>\n        <a-mixin shadow id="self-driving-cruise-car-rig" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/self-driving-cruise-car-rig.glb)"></a-mixin>\n      '),buildings:'\n        \x3c!-- blocks --\x3e\n        <a-asset-item id="blockmodel" src="'.concat(t,'sets/buildings/gltf-exports/draco/buildings.glb"></a-asset-item>\n        <a-asset-item id="archedmodel" src="').concat(t,'sets/arcade-style-buildings/gltf-exports/draco/arched-buildings.glb"></a-asset-item>\n        <a-asset-item id="suburbiamodel" src="').concat(t,'sets/suburban-houses/gltf-exports/draco/suburban-houses.glb"></a-asset-item>\n\n        \x3c!-- buildings and blocks --\x3e\n        <a-mixin shadow id="SM3D_Bld_Mixed_Corner_4fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_Corner_4fl"></a-mixin>\n        <a-mixin shadow id="SM3D_Bld_Mixed_Double_5fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_Double_5fl"></a-mixin>\n        <a-mixin shadow id="SM3D_Bld_Mixed_4fl_2" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_4fl_2"></a-mixin>\n        <a-mixin shadow id="SM3D_Bld_Mixed_5fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_5fl"></a-mixin>\n        <a-mixin shadow id="SM3D_Bld_Mixed_4fl" scale="1 1 1" rotation="0 0 0" gltf-part="src: #blockmodel; part: SM3D_Bld_Mixed_4fl"></a-mixin>\n\n        \x3c!-- suburban buildings --\x3e\n        <a-mixin shadow id="SM_Bld_House_Preset_03_1800" scale="1 1 1" rotation="0 0 0" gltf-part="src: #suburbiamodel; part: suburban-house_1"></a-mixin>\n        <a-mixin shadow id="SM_Bld_House_Preset_08_1809" scale="1 1 1" rotation="0 0 0" gltf-part="src: #suburbiamodel; part: suburban-house_3"></a-mixin>\n        <a-mixin shadow id="SM_Bld_House_Preset_09_1845" scale="1 1 1" rotation="0 0 0" gltf-part="src: #suburbiamodel; part: suburban-house_2"></a-mixin>\n\n        \x3c!-- arched style buildings --\x3e\n        <a-mixin shadow id="arched-building-01" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-01"></a-mixin>\n        <a-mixin shadow id="arched-building-02" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-02"></a-mixin>\n        <a-mixin shadow id="arched-building-03" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-03"></a-mixin>\n        <a-mixin shadow id="arched-building-04" scale="1 1 1" rotation="0 0 0" gltf-part="src: #archedmodel; part: arched-building-04"></a-mixin>\n'),"intersection-props":'\n        <a-asset-item id="stopsign" src="'.concat(t,'sets/road-signs/gltf-exports/draco/stop-sign.glb"></a-asset-item>\n        <a-asset-item id="signal1" src="').concat(t,'sets/signals/gltf-exports/draco/signal1.glb"></a-asset-item>\n        <a-asset-item id="signal2" src="').concat(t,'sets/signals/gltf-exports/draco/signal2.glb"></a-asset-item>\n        <a-mixin id="signal_left" gltf-model="#signal1"></a-mixin>\n        <a-mixin id="signal_right" gltf-model="#signal2"></a-mixin>\n        <a-mixin id="stop_sign" gltf-model="#stopsign"></a-mixin>\n      '),"segment-textures":'  \n        \x3c!-- segment mixins with textures --\x3e\n        <img id="seamless-road" src="'.concat(t,'materials/TexturesCom_Roads0086_1_seamless_S_rotate.jpg" crossorigin="anonymous">\n        <img id="seamless-bright-road" src="').concat(t,'materials/asphalthd_Base_Color.jpg" crossorigin="anonymous">\n        <img id="seamless-sidewalk" src="').concat(t,'materials/TexturesCom_FloorsRegular0301_1_seamless_S.jpg" crossorigin="anonymous">\n        <img id="hatched-base" src="').concat(t,'materials/seamless-lane-with-hatch-half.jpg" crossorigin="anonymous">\n        <img id="hatched-normal" src="').concat(t,'materials/seamless-lane-with-hatch-half.jpg" crossorigin="anonymous">\n        <a-mixin shadow="cast: false" id="drive-lane" geometry="width:3;height:150;primitive:plane" material="roughness:').concat(i,';repeat:0.3 25;offset:0.55 0;src:#seamless-road;"></a-mixin>\n        <a-mixin shadow="cast: false" id="bright-lane" geometry="width:3;height:150;primitive:plane" material="roughness:').concat(i,';repeat:0.6 50;offset:0.55 0;src:#seamless-bright-road;color:#dddddd"></a-mixin>\n        <a-mixin shadow="cast: false" id="bike-lane" geometry="width:1.8;height:150;primitive:plane" material="roughness:').concat(i,';repeat:0.3 25;offset:0.55 0;metalness:0;src:#seamless-road;"></a-mixin>\n        <a-mixin shadow id="sidewalk" anisotropy geometry="width:3;height:150;primitive:plane" material="roughness:').concat(i,';repeat:1.5 75;src:#seamless-sidewalk;"></a-mixin>\n        <a-mixin shadow="cast: false" id="bus-lane" geometry="width:3;height:150;primitive:plane" material="roughness:').concat(i,';repeat:0.3 25;offset:0.55 0;src:#seamless-road;"></a-mixin>\n        <a-mixin shadow="cast: false" id="divider" geometry="width:0.3;height:150;primitive:plane" material="roughness:').concat(i,';src:#hatched-base;"></a-mixin>\n        <a-mixin shadow="cast: false" id="grass" geometry="width:0.3;height:150;primitive:plane" material="roughness:').concat(i,';repeat:1 150;offset:0.415 0;src:#grass-texture;"></a-mixin>\n      '),"segment-colors":'  \n        \x3c!-- segment color modifier mixins --\x3e\n        <a-mixin id="yellow" material="color:#f7d117"></a-mixin>\n        <a-mixin id="surface-green" material="color:#adff83"></a-mixin>\n        <a-mixin id="surface-red" material="color:#ff9393"></a-mixin>\n        <a-mixin id="surface-blue" material="color:#00b6b6"></a-mixin>\n      ',"lane-separator":'\n        \x3c!-- lane separator markings --\x3e\n        <img id="markings-atlas" src="'.concat(t,'materials/lane-markings-atlas_1024.png" crossorigin="anonymous" /> \n        <a-mixin shadow="cast: false" id="markings" anisotropy atlas-uvs="totalRows: 1; totalColumns: 8; row: 1" scale="1 1 1" material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 25;" geometry="primitive: plane; buffer: false; skipCache: true; width:0.2; height:150;"></a-mixin>\n        <a-mixin shadow="cast: false" id="solid-stripe" atlas-uvs="column: 3; row: 1" material="repeat:1 5;"></a-mixin>\n        <a-mixin shadow="cast: false" id="dashed-stripe" atlas-uvs="column: 4; row: 1"></a-mixin>\n        <a-mixin shadow="cast: false" id="short-dashed-stripe" atlas-uvs="column: 4" material="repeat:1 50;"></a-mixin>\n        <a-mixin shadow="cast: false" id="solid-doubleyellow" atlas-uvs="totalColumns: 4; column: 3" geometry="width: 0.5"></a-mixin>\n        <a-mixin shadow="cast: false" id="solid-dashed" atlas-uvs="totalColumns: 4; column: 2" geometry="width: 0.4"></a-mixin>\n        <a-mixin shadow="cast: false" id="crosswalk-zebra" atlas-uvs="totalColumns: 4; column: 4" geometry="width: 2; height: 12"  material="repeat: 1 2"></a-mixin>\n      '),stencils:'  \n        \x3c!-- stencil markings --\x3e\n        <img id="stencils-atlas" src="'.concat(t,'materials/stencils-atlas_2048.png" crossorigin="anonymous" />\n        <a-mixin shadow="cast: false" id="stencils" anisotropy atlas-uvs="totalRows: 4; totalColumns: 4" scale="2 2 2" material="src: #stencils-atlas;alphaTest: 0;transparent:true;" geometry="primitive: plane; buffer: false; skipCache: true;"></a-mixin>\n        <a-mixin id="right" atlas-uvs="column: 3; row: 2"></a-mixin>\n        <a-mixin id="left" atlas-uvs="column: 3; row: 3"></a-mixin>\n        <a-mixin id="both" atlas-uvs="column: 2; row: 1"></a-mixin>\n        <a-mixin id="all" atlas-uvs="column: 3; row: 1"></a-mixin>\n        <a-mixin id="left-straight" atlas-uvs="column: 2; row: 3"></a-mixin>\n        <a-mixin id="right-straight" atlas-uvs="column: 2; row: 2"></a-mixin>\n        <a-mixin id="straight" atlas-uvs="column: 2; row: 4"></a-mixin>\n        <a-mixin id="sharrow" atlas-uvs="totalRows: 4; totalColumns: 8; column: 2; row: 3" scale="1.5 3 1"></a-mixin>\n        <a-mixin id="bike-arrow" atlas-uvs="totalRows: 2; totalColumns: 8; column: 1; row: 2" scale="1 4 1"></a-mixin>\n        <a-mixin id="word-bus" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 4" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-lane" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 4" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-taxi" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 3" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-only" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 3" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-only-small" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 3" scale="2.5 2 2.5"></a-mixin>\n        <a-mixin id="word-yield" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 2" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-slow" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 2" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-xing" atlas-uvs="totalRows: 8; totalColumns: 8; column: 1; row: 1" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-stop" atlas-uvs="totalRows: 8; totalColumns: 8; column: 2; row: 1" scale="3 3 3"></a-mixin>\n        <a-mixin id="word-loading-small" atlas-uvs="totalRows: 8; totalColumns: 4; column: 4; row: 1" scale="2.75 1.75 2.75"></a-mixin>\n        <a-mixin id="perpendicular-stalls" atlas-uvs="totalRows: 4; totalColumns: 8; column: 5; row: 4" scale="5 10 5"></a-mixin>\n        <a-mixin id="parking-t" atlas-uvs="totalRows: 8; totalColumns: 16; column: 4; row: 7" scale="1.5 2 2"></a-mixin>\n        <a-mixin id="painted-safety-zone" atlas-uvs="totalRows: 4; totalColumns: 4; column: 4; row: 4" scale="8 8 8"></a-mixin>\n        <a-mixin id="hash-left" atlas-uvs="totalRows: 4; totalColumns: 8; column: 7; row: 2" scale="3 6 3"></a-mixin>\n        <a-mixin id="hash-right" atlas-uvs="totalRows: 4; totalColumns: 8; column: 8; row: 2" scale="3 6 3"></a-mixin>\n        <a-mixin id="hash-chevron" atlas-uvs="totalRows: 4; totalColumns: 4; column: 4; row: 2" scale="3 3 3"></a-mixin>\n      '),"vehicles-transit":'\n        \x3c!-- vehicles-transit --\x3e\n        <a-mixin shadow id="bus" anisotropy gltf-model="url('.concat(t,'sets/flyer-bus/gltf-exports/draco/new-flyer-bus.glb)"></a-mixin>\n        <a-mixin shadow id="tram" anisotropy gltf-model="url(').concat(t,'sets/light-rail-vehicle/gltf-exports/draco/light-rail-vehicle-v02.glb)"></a-mixin>\n        <a-mixin shadow id="trolley" gltf-model="url(').concat(t,'sets/sanfrancisco-cablecar/gltf-exports/draco/sanfrancisco-cablecar_v01.glb)"></a-mixin>\n        '),dividers:'\n        \x3c!-- dividers --\x3e\n        <a-asset-item id="dividers" src="'.concat(t,'sets/dividers/gltf-exports/draco/dividers.glb"></a-asset-item>        \n        <a-mixin shadow id="dividers-flowers" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: flowers"></a-mixin>\n        <a-mixin shadow id="dividers-planting-strip" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: planting-strip"></a-mixin>\n        <a-mixin shadow id="dividers-planter-box" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: planter-box"></a-mixin>\n        <a-mixin shadow id="dividers-bush" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: bush"></a-mixin>\n        <a-mixin shadow id="dividers-dome" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: dome"></a-mixin>\n        <a-mixin shadow id="safehit" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: bollard"></a-mixin>\n        <a-mixin shadow id="temporary-barricade" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: barricade"></a-mixin>\n        <a-mixin shadow id="temporary-traffic-cone" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: traffic-cone"></a-mixin>\n        <a-mixin shadow id="temporary-jersey-barrier-plastic" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: jersey-barrier-plastic"></a-mixin>\n        <a-mixin shadow id="temporary-jersey-barrier-concrete" scale="1 1 1" rotation="0 0 0" gltf-part="src: #dividers; part: jersey-barrier-concrete"></a-mixin>\n      '),sky:'\n        \x3c!-- sky --\x3e\n        <img id="sky" src="'.concat(t,'images/skies/2048-polyhaven-wasteland_clouds_puresky.jpeg" crossorigin="anonymous" />\n        <img id="sky-night" src="').concat(t,'images/AdobeStock_286725174-min.jpeg" crossorigin="anonymous" />\n      '),grounds:'\n        \x3c!-- grounds --\x3e\n        <img id="grass-texture" src="'.concat(t,'materials/TexturesCom_Grass0052_1_seamless_S.jpg" crossorigin="anonymous">\n        <img id="parking-lot-texture" src="').concat(t,'materials/TexturesCom_Roads0111_1_seamless_S.jpg" crossorigin="anonymous">\n        <img id="asphalt-texture" src="').concat(t,'materials/TexturesCom_AsphaltDamaged0057_1_seamless_S.jpg" crossorigin="anonymous">\n\n        \x3c!-- legacy plane-based grounds for compatibility with 0.4.2 and earlier scenes, not used for new streets --\x3e\n        <a-mixin shadow id="ground-grass" rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#grass-texture;repeat:5 5;roughness:1"></a-mixin>\n        <a-mixin shadow id="ground-parking-lot" rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#parking-lot-texture;repeat:2 4;roughness:1"></a-mixin>\n        <a-mixin shadow id="ground-asphalt" rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#asphalt-texture;repeat:5 5;roughness:1"></a-mixin>\n        <a-mixin shadow id="ground-tiled-concrete" anisotropy rotation="-90 0 0" geometry="primitive:plane;height:150;width:40" material="src:#seamless-sidewalk;repeat:5 5;roughness:1"></a-mixin>\n\n        \x3c!-- new grounds for 0.4.4 and later --\x3e \n        <a-mixin shadow id="ground-grass-material" material="src:#grass-texture;repeat:2.5 5;roughness:').concat(i,'"></a-mixin>\n        <a-mixin shadow id="ground-parking-lot-material" material="src:#parking-lot-texture;repeat:.5 2;roughness:').concat(i,'"></a-mixin>\n        <a-mixin shadow id="ground-asphalt-material" material="src:#asphalt-texture;repeat:5 5;roughness:').concat(i,'"></a-mixin>\n        <a-mixin shadow id="ground-tiled-concrete-material" material="src:#seamless-sidewalk;repeat:10 20;roughness:').concat(i,'"></a-mixin>\n\n        <a-asset-item id="fence-model" src="').concat(t,'sets/fences/gltf-exports/draco/fence4.glb"></a-asset-item>\n        <a-mixin shadow id="fence" gltf-model="#fence-model" scale="0.1 0.1 0.1"></a-mixin>\n      '),"loud-bicycle":'\n        \x3c!-- loud-bicycle-game --\x3e\n        <a-mixin shadow id="cyclist-cargo" gltf-model="url('.concat(t,'sets/cargo-bike-animation/gltf-exports/draco/cargo_bike_animation_v1.glb)"></a-mixin>\n        <a-mixin shadow id="cyclist1" gltf-model="url(').concat(t,'sets/cyclist-animation/gltf-exports/draco/cyclist-1-animation-v1.glb)"></a-mixin>\n        <a-mixin shadow id="cyclist2" gltf-model="url(').concat(t,'sets/cyclist-animation/gltf-exports/draco/cyclist-2-animation-v1.glb)"></a-mixin>\n        <a-mixin shadow id="cyclist3" gltf-model="url(').concat(t,'sets/cyclist-animation/gltf-exports/draco/cyclist-3-animation-v1.glb)"></a-mixin>\n        <a-mixin shadow id="cyclist-kid" gltf-model="url(').concat(t,'sets/cyclist-animation/gltf-exports/draco/Kid_cyclist_animation_v01.glb)"></a-mixin>\n        <a-mixin shadow id="cyclist-dutch" gltf-model="url(').concat(t,'sets/cyclist-animation/gltf-exports/draco/Dutch_cyclist_animation_v01.glb)"></a-mixin>\n        <a-mixin shadow id="loud-bicycle-mini" gltf-model="url(').concat(t,'sets/cycle-horn/gltf-exports/draco/loud-bicycle-mini-horn.glb)"></a-mixin>\n        <a-mixin shadow id="loud-bicycle-classic" gltf-model="url(').concat(t,'sets/cycle-horn/gltf-exports/draco/loud-bicycle-classic-horn.glb)"></a-mixin>\n        <a-mixin shadow id="building-school" gltf-model="url(').concat(t,'sets/school-building/gltf-exports/draco/school-building.glb)"></a-mixin>\n        <a-mixin shadow id="building-bar" gltf-model="url(').concat(t,'sets/irish-bar-building/gltf-exports/draco/irish-bar-building.glb)"></a-mixin>\n        <a-mixin shadow id="vehicle-bmw-m2" gltf-model="url(').concat(t,'sets/vehicles-rig/gltf-exports/draco/BWM_m2-rig.glb)"></a-mixin>\n        <a-mixin shadow id="prop-suburban-houses" gltf-model="url(').concat(t,'sets/suburban-houses/gltf-exports/draco/suburban-houses.glb)"></a-mixin>\n        <a-mixin shadow id="prop-banner-wfh" gltf-model="url(').concat(t,'sets/wfh-banner/gltf-exports/draco/wfh-banner.glb)"></a-mixin>\n        <a-mixin shadow id="prop-raygun" gltf-model="url(').concat(t,'sets/ray-gun/gltf-exports/draco/rayGun.glb)"></a-mixin>\n        <a-mixin shadow id="prop-co2-scrubber" gltf-model="url(').concat(t,'sets/c02-scrubber/gltf-exports/draco/co2-scrubber.glb)"></a-mixin>\n    ')};function a(t,e){var i=(new DOMParser).parseFromString(t,"text/html");return i.querySelectorAll("a-mixin").forEach((function(t){t.setAttribute("category",e)})),i.documentElement.innerHTML}var n=Object.keys(r);if(e){var o=e.split(" ");n=n.filter((function(t){return o.includes(t)}))}var s="";for(var l in r)n.includes(l)&&(s+=a(r[l],l));return s}(e,t);this.insertAdjacentHTML("afterend",i),AFRAME.ANode.prototype.load.call(this)}}])&&e(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,n}();customElements.define("street-assets",s),document.addEventListener("DOMSubtreeModified",(function t(e){if("A-SCENE"===e.target.nodeName){var i=e.target.querySelector("a-assets");if(i||(i=document.createElement("a-assets"),e.target.append(i)),i.querySelector("street-assets"))document.removeEventListener("DOMSubtreeModified",t);else{var r=document.createElement("street-assets");i.append(r),document.removeEventListener("DOMSubtreeModified",t)}}}),!1)},6948:(t,e,i)=>{var r=i(4001);AFRAME.registerComponent("create-from-json",{schema:{jsonString:{type:"string",default:""}},update:function(t){var e=this.data,i=this.el;if(t.string&&e.string!==t.string)for(;i.firstChild;)i.removeChild(i.lastChild);r.appendChildElementsFromArray(JSON.parse(e.jsonString),i)}})},6023:()=>{var t={},e={};AFRAME.registerComponent("gltf-part",{schema:{buffer:{default:!0},part:{type:"string"},src:{type:"asset"}},init:function(){this.dracoLoader=document.querySelector("a-scene").systems["gltf-model"].getDRACOLoader()},update:function(){var t=this.el;!this.data.part&&this.data.src||this.getModel((function(e){e&&t.setObject3D("mesh",e)}))},getModel:function(i){var r=this;if(!e[this.data.src])return t[this.data.src]?t[this.data.src].then((function(t){i(r.selectFromModel(t))})):void(t[this.data.src]=new Promise((function(a){var n=new THREE.GLTFLoader;r.dracoLoader&&n.setDRACOLoader(r.dracoLoader),n.load(r.data.src,(function(n){var o=n.scene||n.scenes[0];e[r.data.src]=o,delete t[r.data.src],i(r.selectFromModel(o)),a(o)}),(function(){}),console.error)})));i(this.selectFromModel(e[this.data.src]))},selectFromModel:function(t){var e,i;if(i=t.getObjectByName(this.data.part))return e=i.getObjectByProperty("type","Mesh").clone(!0),this.data.buffer?(e.geometry=e.geometry.toNonIndexed(),e):(e.geometry=(new THREE.Geometry).fromBufferGeometry(e.geometry),e);console.error("[gltf-part] `"+this.data.part+"` not found in model.")}})},4857:(t,e,i)=>{var r=i(5165).Notyf;AFRAME.registerComponent("notify",{schema:{duration:{type:"number",default:6e3},ripple:{type:"boolean",default:!1},position:{type:"string",default:{x:"center",y:"bottom"}},dismissible:{type:"boolean",default:!1},type:{type:"string",default:"info"},message:{type:"string",default:""}},init:function(){var t=this;this.notify=new r({types:[{type:"info",background:"blue",icon:!1},{type:"warning",background:"orange",icon:!1}],duration:this.data.duration,ripple:this.data.ripple,position:this.data.position,dismissible:this.data.dismissible}),this.types=this.notify.options.types.map((function(t){return t.type})),STREET&&(STREET.notify={},STREET.notify.successMessage=function(e){t.message(e,"success")},STREET.notify.errorMessage=function(e){t.message(e,"error")},STREET.notify.warningMessage=function(e){t.message(e,"warning")})},message:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";t&&this.types.includes(e)&&this.notify.open({type:e,message:t})},update:function(t){if(0!==Object.keys(t).length){var e=this.data.message,i=this.data.type;e&&this.types.includes(i)&&(this.message(e,i),this.data.message="")}}})},2052:()=>{AFRAME.registerComponent("wobble-normal",{schema:{},tick:function(t){this.el.components.material.material.normalMap&&(this.el.components.material.material.normalMap.offset.x+=1e-4*Math.sin(t/1e4),this.el.components.material.material.normalMap.offset.y+=1e-4*Math.cos(t/8e3),this.el.components.material.material.normalScale.x=.5+.5*Math.cos(t/1e3),this.el.components.material.material.normalScale.x=.5+.5*Math.sin(t/1200))}}),AFRAME.registerComponent("wobble-geometry",{schema:{amplitude:{default:.1},amplitudeVariance:{default:.3},speed:{default:.25},speedVariance:{default:2}},play:function(){var t=this.data,e=this.geometry=this.el.object3D.children[0].geometry;console.log(this.el.object3D.children[0].geometry),this.waves=[];var i=e.getAttribute("position");console.log(i);for(var r=0;r<i.count;r++)this.waves.push({z:i.getZ(r),ang:Math.random()*Math.PI*2,amp:t.amplitude+Math.random()*t.amplitudeVariance,speed:(t.speed+Math.random()*t.speedVariance)/1e3})},tick:function(t,e){if(e){for(var i=this.geometry.getAttribute("position"),r=0;r<i.count;r++){var a=this.waves[r],n=a.z+Math.sin(a.ang)*a.amp;i.setZ(r,n),a.ang+=a.speed*e}i.needsUpdate=!0}}}),AFRAME.registerPrimitive("a-ocean-plane",{defaultComponents:{geometry:{primitive:"plane",height:1e3,width:1e3,segmentsHeight:100,segmentsWidth:100},rotation:"-90 0 0",material:{shader:"standard",color:"#8ab39f",metalness:1,roughness:.2,normalMap:"url(assets/materials/waternormals.jpg)",normalTextureRepeat:"50 50",normalTextureOffset:"0 0",normalScale:"0.5 0.5",opacity:.8},"wobble-normal":{},"wobble-geometry":{}}}),AFRAME.registerComponent("wobble-geometry-box",{schema:{amplitude:{default:.1},amplitudeVariance:{default:.3},speed:{default:.25},speedVariance:{default:2}},play:function(){var t=this.data,e=this.geometry=this.el.object3D.children[0].geometry;this.waves=[];for(var i=e.getAttribute("position"),r=0;r<i.count;r++)this.waves.push({y:i.getY(r),ang:Math.random()*Math.PI*2,amp:t.amplitude+Math.random()*t.amplitudeVariance,speed:(t.speed+Math.random()*t.speedVariance)/1e3})},tick:function(t,e){if(e){for(var i=this.geometry.getAttribute("position"),r=0;r<i.count;r++){var a=this.waves[r],n=a.y+Math.sin(a.ang)*a.amp;i.setY(r,n),a.ang+=a.speed*e}i.needsUpdate=!0}}}),AFRAME.registerPrimitive("a-ocean-box",{defaultComponents:{geometry:{primitive:"box",depth:100,width:100,height:4,segmentsHeight:10,segmentsDepth:100,segmentsWidth:100},rotation:"0 0 0",material:{shader:"standard",color:"#8ab39f",metalness:1,roughness:.2,normalMap:"url(https://assets.3dstreet.app/materials/waternormals.jpg)",normalTextureRepeat:"10 10",normalTextureOffset:"0 0",normalScale:"0.5 0.5",opacity:.8},"wobble-normal":{},"wobble-geometry-box":{}}})},5927:()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";e=function(){return r};var i,r={},a=Object.prototype,n=a.hasOwnProperty,o=Object.defineProperty||function(t,e,i){t[e]=i.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",d=s.toStringTag||"@@toStringTag";function u(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(i){u=function(t,e,i){return t[e]=i}}function p(t,e,i,r){var a=e&&e.prototype instanceof v?e:v,n=Object.create(a.prototype),s=new R(r||[]);return o(n,"_invoke",{value:O(t,i,s)}),n}function m(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}r.wrap=p;var h="suspendedStart",f="suspendedYield",g="executing",y="completed",b={};function v(){}function x(){}function w(){}var A={};u(A,l,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(P([])));S&&S!==a&&n.call(S,l)&&(A=S);var k=w.prototype=v.prototype=Object.create(A);function T(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function M(e,i){function r(a,o,s,l){var c=m(e[a],e,o);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==t(u)&&n.call(u,"__await")?i.resolve(u.__await).then((function(t){r("next",t,s,l)}),(function(t){r("throw",t,s,l)})):i.resolve(u).then((function(t){d.value=t,s(d)}),(function(t){return r("throw",t,s,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(t,e){function n(){return new i((function(i,a){r(t,e,i,a)}))}return a=a?a.then(n,n):n()}})}function O(t,e,r){var a=h;return function(n,o){if(a===g)throw Error("Generator is already running");if(a===y){if("throw"===n)throw o;return{value:i,done:!0}}for(r.method=n,r.arg=o;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=g;var c=m(t,e,r);if("normal"===c.type){if(a=r.done?y:f,c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=y,r.method="throw",r.arg=c.arg)}}}function C(t,e){var r=e.method,a=t.iterator[r];if(a===i)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=i,C(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var n=m(a,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,b;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=i),e.delegate=null,b):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,b)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[l];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=i,t.done=!0,t};return o.next=o}}throw new TypeError(t(e)+" is not iterable")}return x.prototype=w,o(k,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:x,configurable:!0}),x.displayName=u(w,d,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,d,"GeneratorFunction")),t.prototype=Object.create(k),t},r.awrap=function(t){return{__await:t}},T(M.prototype),u(M.prototype,c,(function(){return this})),r.AsyncIterator=M,r.async=function(t,e,i,a,n){void 0===n&&(n=Promise);var o=new M(p(t,e,i,a),n);return r.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},T(k),u(k,d,"Generator"),u(k,l,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),i=[];for(var r in e)i.push(r);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},r.values=P,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(N),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=i)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,a){return s.type="throw",s.arg=t,e.next=r,a&&(e.method="next",e.arg=i),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),N(i),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var a=r.arg;N(i)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=i),b}},r}function i(t,e,i,r,a,n,o){try{var s=t[n](o),l=s.value}catch(t){return void i(t)}s.done?e(l):Promise.resolve(l).then(r,a)}function r(t){return function(){var e=this,r=arguments;return new Promise((function(a,n){var o=t.apply(e,r);function s(t){i(o,a,n,s,l,"next",t)}function l(t){i(o,a,n,s,l,"throw",t)}s(void 0)}))}}var a;AFRAME.registerComponent("screentock",{schema:{takeScreenshot:{type:"boolean",default:!1},filename:{type:"string",default:"screenshot"},type:{type:"string",default:"jpg"},imgElementSelector:{type:"selector"}},takeScreenshotNow:(a=r(e().mark((function t(i,a,n){var o,s,l,c,d,u,p,m,h;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p=function(t,e,i){var r=document.createElement("a"),a=e.replace(/^data:image\/[^;]/,"data:application/octet-stream");r.setAttribute("href",a),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)},d=function(t,e,i){t.font="25px Lato",t.textAlign="center",t.fillStyle="#FFF",t.fillText(STREET.utils.getCurrentSceneTitle(),e-e/2,i-43)},l=function(t){o&&o.opened&&(o.sceneHelpers.visible=t),t?document.querySelector("#cameraRig").setAttribute("cursor-teleport","cameraRig: #cameraRig; cameraHead: #camera;"):document.querySelector("#cameraRig").removeAttribute("cursor-teleport")},o=AFRAME.INSPECTOR,s=AFRAME.scenes[0].renderer,l(!1),c=function(){var t=r(e().mark((function t(i){var r,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=document.querySelector("#screenshotCanvas"))||((r=document.createElement("canvas")).id="screenshotCanvas",r.hidden=!0,document.body.appendChild(r)),r.width=i.width,r.height=i.height,(a=r.getContext("2d")).drawImage(i,0,0),d(a,r.width,r.height),t.next=9,u(a);case 9:return t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=r(e().mark((function t(i){var r,a,n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=document.querySelector("img.viewer-logo-img"),a=document.querySelector("#aframeInspector #logoImg svg"),!r){t.next=6;break}i.drawImage(r,0,0,135,43,40,30,270,86),t.next=12;break;case 6:if(!a){t.next=12;break}return(n=new Image).src="data:image/svg+xml;base64,".concat(window.btoa(a.outerHTML)),t.next=11,new Promise((function(t){n.onload=t}));case 11:i.drawImage(n,0,0,135,23,40,40,270,46);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=i+"."+a,s.render(AFRAME.scenes[0].object3D,AFRAME.scenes[0].camera),t.next=12,c(s.domElement);case 12:h=t.sent,"img"==a&&(n.src=h.toDataURL()),"png"==a?p(m,h.toDataURL("image/png")):"jpg"==a&&p(m,h.toDataURL("image/jpeg",.95)),l(!0);case 16:case"end":return t.stop()}}),t)}))),function(t,e,i){return a.apply(this,arguments)}),update:function(t){0!==Object.keys(t).length&&this.data.takeScreenshot&&(this.data.takeScreenshot=!1,this.takeScreenshotNow(this.data.filename,this.data.type,this.data.imgElementSelector))}})},1394:(t,e,i)=>{var r=i(2480);i(4154),AFRAME.registerComponent("streetplan-loader",{dependencies:["street"],schema:{streetplanStreetURL:{type:"string"},streetplanAPIURL:{type:"string"},streetplanEncJSON:{type:"string"},showBuildings:{default:!0},name:{default:""}},streetplanResponseParse:function(t){var e,i=this.el,a=this.data,n=t.project,o=r.convertStreetStruct(n),s=o.segments,l=o.name;o.altName,console.log("streetplanName",l);var c=this.el.sceneEl;c&&c.getAttribute("metadata")&&(e=c.getAttribute("metadata").sceneTitle),e||(c.setAttribute("metadata","sceneTitle",l),console.log("therefore setting metadata sceneTitle as streetplanName",l)),i.setAttribute("data-layer-name","StreetPlan • "+l),a.showBuildings&&(i.setAttribute("street","right",o.rightBuildingVariant),i.setAttribute("street","left",o.leftBuildingVariant)),i.setAttribute("street","type","streetmixSegmentsMetric"),i.setAttribute("street","JSON",JSON.stringify({streetmixSegmentsMetric:s})),i.emit("streetplan-loader-street-loaded")},update:function(t){var e=this,i=this.data;if(this.el,i.streetplanEncJSON){var r=decodeURIComponent(encodedString);this.streetplanResponseParse(JSON.parse(r))}else if(t.streetplanStreetURL!==i.streetplanStreetURL||t.streetplanAPIURL!==i.streetplanAPIURL){var a=new XMLHttpRequest;console.log("[streetplan-loader]","GET "+i.streetplanAPIURL),a.open("GET",i.streetplanAPIURL,!0),a.onload=function(){if(this.status>=200&&this.status<400){var t=JSON.parse(this.response);e.streetplanResponseParse(t)}else console.log("[streetplan-loader]","Loading Error: We reached the target server, but it returned an error")},a.onerror=function(){console.log("[streetplan-loader]","Loading Error: There was a connection error of some sort")},a.send()}}})},608:(t,e,i)=>{var r=i(2072).SVGLoader;AFRAME.registerComponent("svg-extruder",{schema:{svgString:{type:"string"},depth:{type:"number",default:4},bevelEnabled:{type:"boolean",default:!1},bevelThickness:{type:"number",default:1},bevelSize:{type:"number",default:1},bevelOffset:{type:"number",default:1},bevelSegments:{type:"number",default:1},topElement:{type:"boolean",default:!1},topColor:{type:"color",default:"white"},topSrc:{type:"string",default:"#grass-texture"},color:{type:"color",default:"grey"},src:{type:"string",default:""},lineColor:{type:"color",default:"black"}},init:function(){var t=this.data,e=this.el;t.svgString,t.lineColor,this.loader=new r,e.removeAttribute("material"),e.setAttribute("shadow","cast: true; receive: true")},createTopEntity:function(t){var e=this.data,i=this.el.children[0];i||((i=document.createElement("a-entity")).classList.add("topElement"),this.el.appendChild(i));var r=this.mergedGeometryFromArray(t);r.translate(0,.15,0);var a=new THREE.Mesh(r,this.materialFromSrc(e.topSrc,e.topColor));i.getObject3D("mesh")&&i.removeObject3D("mesh"),i.setObject3D("mesh",a)},materialFromSrc:function(t,e){var i=null,r=""!==t?document.querySelector(t):null;r&&((i=new THREE.Texture(r)).encoding=THREE.sRGBEncoding,i.wrapS=THREE.RepeatWrapping,i.wrapT=THREE.RepeatWrapping,i.repeat.set(.01,.01));var a=new THREE.MeshStandardMaterial({color:e,map:i,roughness:1});return a.map&&(a.map.needsUpdate=!0),a},mergedGeometryFromArray:function(t){var e=THREE.BufferGeometryUtils.mergeGeometries(t);return e.computeBoundingBox(),e.computeVertexNormals(),e.center(),e.rotateX(Math.PI/2),e.scale(.05,.05,.05),e},extrudeFromSVG:function(t){var e=this.data,i=this.el,a=this.loader.parse(t),n={depth:e.depth,bevelEnabled:e.bevelEnabled,bevelThickness:e.bevelThickness,bevelSize:e.bevelSize,bevelOffset:e.bevelOffset,bevelSegments:e.bevelSegments},o=[],s=[];a.paths.forEach((function(t){r.createShapes(t).forEach((function(t){var e=new THREE.ExtrudeGeometry(t,{depth:1,bevelEnabled:!1}),i=new THREE.ExtrudeGeometry(t,n);s.push(e),o.push(i)}))}));var l=this.mergedGeometryFromArray(o),c=new THREE.LineBasicMaterial({color:e.lineColor}),d=new THREE.EdgesGeometry(l),u=new THREE.LineSegments(d,c);i.setObject3D("lines",u);var p=new THREE.Mesh(l,this.materialFromSrc(e.src,e.color));i.getObject3D("mesh")&&i.removeObject3D("mesh"),i.setObject3D("mesh",p);var m=this.el.children[0];e.topElement?this.createTopEntity(s):m&&i.removeChild(m)},update:function(t){this.el;var e=this.data.svgString;e&&this.extrudeFromSVG(e)}})},7554:()=>{function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,a,n,o,s=[],l=!0,c=!1;try{if(n=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(r=n.call(i)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,a=t}finally{try{if(!l&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function i(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=r(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var a=0,n=function(){};return{s:n,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){l=!0,o=t},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw o}}}}function r(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var n;function o(t){if(t.isEntity){var e=function(t){var e={};e.element=t.tagName.toLowerCase(),t.id&&(e.id=t.id),t.className&&(e.class=Array.from(t.classList)),t.getAttribute("mixin")&&(e.mixin=t.getAttribute("mixin")),t.getAttribute("data-layer-name")&&(e["data-layer-name"]=t.getAttribute("data-layer-name"));var i=t.components;if(i){var r=t.getAttribute("geometry");for(var a in r&&r.primitive&&(e.primitive=r.primitive),e.components={},i){var n=p(t,a);n&&(l(n)?e.components[a]="":e.components[a]=s(n))}}return e}(t),r=t.childNodes;if(r.length&&!["environment"].includes(e.id)){e.children=[];var a,n=i(r);try{for(n.s();!(a=n.n()).done;){var c=a.value;c.nodeType===Node.ELEMENT_NODE&&e.children.push(o(c))}}catch(t){n.e(t)}finally{n.f()}}return e}}function s(i){return"string"==typeof i||"number"==typeof i||"boolean"==typeof i||Array.isArray(i)?i.toString():i.isVector3||i.isVector2||i.isVector4||i.hasOwnProperty("x")&&i.hasOwnProperty("y")?AFRAME.utils.coordinates.stringify(i):"object"===e(i)?Object.entries(i).map((function(e){var i=t(e,2),r=i[0],a=i[1];return"src"==r?a.src&&!a.src.includes(n)?"".concat(r,": ").concat(a.src):a.id?"".concat(r,": #").concat(a.id):"".concat(r,": ").concat(a):"".concat(r,": ").concat(s(a))})).join("; "):void 0}function l(t){return 0===Object.keys(t).length}window.STREET={},STREET.utils={},STREET.utils.getCurrentSceneId=function(){var t,e=AFRAME.scenes[0].getAttribute("metadata").sceneId,i=(t=window.location.hash.match(/#\/scenes\/([a-zA-Z0-9-]+)\.json/))&&t[1]?t[1]:null;return e||i&&(e=i),e},getCurrentSceneTitle=function(){var t=AFRAME.scenes[0].getAttribute("metadata").sceneTitle;return console.log("currentSceneTitle",t),t},STREET.utils.getCurrentSceneTitle=getCurrentSceneTitle,STREET.utils.convertDOMElToObject=function(t){var e=[],i=[t,document.querySelector("#environment"),document.querySelector("#reference-layers")];n=document.querySelector("street-assets").getAttribute("url");for(var r=0,a=i;r<a.length;r++){var s=o(a[r]);s&&e.push(s)}return{title:"scene",version:"1.0",data:e}};var c={src:{},normalMap:{},"set-loader-from-hash":"*","create-from-json":"*",street:{JSON:"*"}},d={"streetmix-loader":"not-streetmix-loader",street:"not-street",intersection:"not-intersection"};function u(t,e){if("string"==typeof t&&"string"==typeof e||"number"==typeof t&&"number"==typeof e)return t===e;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var a=0,n=i;a<n.length;a++){var o=n[a];if(t[o]!==e[o])return!1}return!0}function p(e,i){var r=AFRAME.utils.entity.getComponentProperty(e,i);if(!e.components[i])return["id","class","tag","mixin"].includes(i)?null:r;var a,n=e.components[i].schema,o=t(function(t,e,i){for(var r,a=i.mixinEls.reverse(),n=0;void 0===r&&n<a.length;n++){var o=a[n];o.attributes.hasOwnProperty(t.name)&&(r=o.getAttribute(t.name))}return[t.name,r]}(e.components[i],0,e),2),s=o[0],l=o[1];if(l&&["src","atlas-uvs","gltf-model","gltf-part","shadow"].includes(s))return null;if(a=n,AFRAME.schema.isSingleProperty(a)){var c=n.default,d=r;if(l&&u(l,d))return null;if((d||c)&&d!==c)return r}var p={};for(var m in r){var h=n[m]?n[m].default:"",f=r[m];l&&l[m]&&u(l[m],r[m])||!f&&!h||AFRAME.utils.deepEqual(f,h)||(p[m]=r[m])}return p}function m(t,e){var r,a=document.querySelector("a-scene"),n=["environment","reference-layers"],o=i(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;"street-container"===s.id&&s.children&&"default-street"===s.children[0].id&&s.children[0].components.hasOwnProperty("set-loader-from-hash")&&delete s.children[0].components["set-loader-from-hash"];var l=document.getElementById(s.id);l&&(n.includes(s.id)?l.remove():s.entityElement=l),h(s,a)}}catch(t){o.e(t)}finally{o.f()}}function h(t,e){var n,o,s=t.entityElement||document.createElement(t.element);!s.parentEl&&e&&e.appendChild(s),t.primitive&&s.setAttribute("geometry","primitive",t.primitive);for(var l=0,c=["geometry","material"];l<c.length;l++){var d=c[l];t.components[d]&&(s.setAttribute(d,t.components[d]),delete t.components[d])}if(t.id&&s.setAttribute("id",t.id),t.class&&(n=s.classList).add.apply(n,function(t){if(Array.isArray(t))return a(t)}(o=t.class)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||r(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),t["data-layer-name"]&&s.setAttribute("data-layer-name",t["data-layer-name"]),s.addEventListener("loaded",(function(){for(var e in t.components)s.setAttribute(e,t.components[e]);t.mixin&&s.setAttribute("mixin",t.mixin),s.emit("entitycreated",{},!1)})),t.children){var u,p=i(t.children);try{for(p.s();!(u=p.n()).done;)h(u.value,s)}catch(t){p.e(t)}finally{p.f()}}}function f(t){var i={};if("string"==typeof t){var r=t.replace(/\'/g,"").replace(/\n/g,"").replace(/[\u0000-\u0019]+/g,"");i=JSON.parse(r)}else"object"===e(t)&&(i=t);var a=i.title;for(a&&(console.log("sceneTitle from createElementsFromJSON",a),AFRAME.scenes[0].setAttribute("metadata","sceneTitle",a)),streetContainerEl=document.getElementById("street-container");streetContainerEl.firstChild;)streetContainerEl.removeChild(streetContainerEl.lastChild);m(i.data,streetContainerEl),STREET.notify.successMessage("Scene loaded from JSON")}STREET.utils.filterJSONstreet=function(t){function i(t,e){if(AFRAME.utils.deepEqual(t,e)||"*"===t)return!0}var r=JSON.stringify(t,(function(t,r){var a;for(var n in c)if(t===n){a=AFRAME.utils.styleParser.parse(r);var o=c[n];if("object"===e(o)&&!l(o))for(var s=0,d=Object.keys(o);s<d.length;s++){var u=d[s],p=o[u];Object.prototype.hasOwnProperty.call(a,u)&&i(p,a[u])&&delete a[u]}if(i(o,r))return}return a||r}));for(var a in d){var n=new RegExp('"'.concat(a,'":'),"g");r=r.replaceAll(n,'"'.concat(d[a],'":'))}return r},STREET.utils.createEntities=m,AFRAME.registerComponent("metadata",{schema:{sceneTitle:{default:""},sceneId:{default:""}},init:function(){},update:function(t){var e=this.data.sceneTitle;e!==t.sceneTitle&&this.el.emit("newTitle",{sceneTitle:e})}}),AFRAME.registerComponent("scene-title",{schema:{titleText:{default:""}},init:function(){var t=this;this.titleElement=void 0,this.el.addEventListener("newTitle",(function(e){t.el.setAttribute("scene-title","titleText",e.detail.sceneTitle)}))},createTitleElement:function(t){var e=this.titleElement=document.createElement("div"),i=document.createTextNode(t);e.setAttribute("id","sceneTitle"),e.appendChild(i),document.body.append(e)},updateTitleText:function(t){this.titleElement.textContent=t},update:function(t){if(0!==Object.keys(t).length){var e=this.data.titleText,i=this.titleElement;e!==t.titleText&&(i?this.updateTitleText(e):this.createTitleElement(e))}}}),AFRAME.registerComponent("set-loader-from-hash",{schema:{defaultURL:{type:"string"}},init:function(){this.runOnce=!1},play:function(){if(!this.runOnce){this.runOnce=!0;var t=window.location.hash.substring(1);if(!t)return;t.includes("//streetmix.net")?(console.log("[set-loader-from-hash]","Set streetmix-loader streetmixStreetURL to",t),this.el.setAttribute("streetmix-loader","streetmixStreetURL",t)):t.includes("streetplan.net/")?(console.log("[set-loader-from-hash]","Set streetplan-loader streetplanAPIURL to",t),this.el.setAttribute("streetplan-loader","streetplanAPIURL",t)):(console.log("[set-loader-from-hash]","Load 3DStreet scene with fetchJSON from",t),this.fetchJSON(t))}},fetchJSON:function(t){var e=new XMLHttpRequest;e.open("GET",t,!0),e.onload=function(){if(this.status>=200&&this.status<400){var e=JSON.parse(this.response,(function(t,e){return"set-loader-from-hash"===t?void 0:e}));console.log("[set-loader-from-hash]","200 response received and JSON parsed, now createElementsFromJSON"),STREET.utils.createElementsFromJSON(e);var i=(r=t.match(/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/))?r[0]:null;i&&(console.log("sceneId from fetchJSON from url hash loader",i),AFRAME.scenes[0].setAttribute("metadata","sceneId",i))}else 404===this.status&&(console.error("[set-loader-from-hash] Error trying to load scene: Resource not found."),STREET.notify.errorMessage("Error trying to load scene: Resource not found."));var r},e.onerror=function(){console.error("Loading Error: There was a connection error during JSON loading"),STREET.notify.errorMessage("Could not fetch scene.")},e.send()}}),STREET.utils.inputStreetmix=function(){for(streetmixURL=prompt("Please enter a Streetmix URL","https://streetmix.net/kfarr/3/example-street"),setTimeout((function(){window.location.hash=streetmixURL})),streetContainerEl=document.getElementById("street-container");streetContainerEl.firstChild;)streetContainerEl.removeChild(streetContainerEl.lastChild);AFRAME.scenes[0].setAttribute("metadata","sceneId",""),AFRAME.scenes[0].setAttribute("metadata","sceneTitle",""),streetContainerEl.innerHTML='<a-entity street streetmix-loader="streetmixStreetURL: '+streetmixURL+'""></a-entity>'},STREET.utils.createElementsFromJSON=f,STREET.utils.fileJSON=function(){var t=new FileReader;t.onload=function(){AFRAME.scenes[0].setAttribute("metadata","sceneId",""),AFRAME.scenes[0].setAttribute("metadata","sceneTitle",""),f(t.result)},t.readAsText(this.files[0])}},2072:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,a,n,o,s=[],l=!0,c=!1;try{if(n=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(r=n.call(i)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,a=t}finally{try{if(!l&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function a(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n(r.key),r)}}function n(t){var i=function(t,i){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,"string");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(i)?i:i+""}function o(t,i,r){return i=l(i),function(t,i){if(i&&("object"===e(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(i,r||[],l(t).constructor):i.apply(t,r))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}var d=THREE,u=d.Box2,p=d.BufferGeometry,m=d.FileLoader,h=d.Float32BufferAttribute,f=d.Loader,g=d.Matrix3,y=d.Path,b=d.Shape,v=d.ShapePath,x=d.ShapeUtils,w=d.SRGBColorSpace,A=d.Vector2,E=d.Vector3,S=w,k=function(t){function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=o(this,r,[t])).defaultDPI=90,e.defaultUnit="px",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(r,t),n=r,l=[{key:"createShapes",value:function(t){var e=999999999,i={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},r={loc:i.ORIGIN,t:0};function a(t,e,a,o){var s=t.x,l=e.x,c=a.x,d=o.x,u=t.y,p=e.y,m=a.y,h=o.y,f=(d-c)*(u-m)-(h-m)*(s-c),g=(h-m)*(l-s)-(d-c)*(p-u),y=f/g,b=((l-s)*(u-m)-(p-u)*(s-c))/g;if(0===g&&0!==f||y<=0||y>=1||b<0||b>1)return null;if(0===f&&0===g){for(var v=0;v<2;v++){if(n(0===v?a:o,t,e),r.loc==i.ORIGIN){var x=0===v?a:o;return{x:x.x,y:x.y,t:r.t}}if(r.loc==i.BETWEEN)return{x:+(s+r.t*(l-s)).toPrecision(10),y:+(u+r.t*(p-u)).toPrecision(10),t:r.t}}return null}for(var w=0;w<2;w++)if(n(0===w?a:o,t,e),r.loc==i.ORIGIN){var A=0===w?a:o;return{x:A.x,y:A.y,t:r.t}}return{x:+(s+y*(l-s)).toPrecision(10),y:+(u+y*(p-u)).toPrecision(10),t:y}}function n(t,e,a){var n,o=a.x-e.x,s=a.y-e.y,l=t.x-e.x,c=t.y-e.y,d=o*c-l*s;return t.x===e.x&&t.y===e.y?(r.loc=i.ORIGIN,void(r.t=0)):t.x===a.x&&t.y===a.y?(r.loc=i.DESTINATION,void(r.t=1)):void(d<-Number.EPSILON?r.loc=i.LEFT:d>Number.EPSILON?r.loc=i.RIGHT:o*l<0||s*c<0?r.loc=i.BEHIND:Math.sqrt(o*o+s*s)<Math.sqrt(l*l+c*c)?r.loc=i.BEYOND:(n=0!==o?l/o:c/s,r.loc=i.BETWEEN,r.t=n))}var o=e,s=-999999999,l=t.subPaths.map((function(t){for(var i=t.getPoints(),r=-999999999,a=e,n=-999999999,l=e,c=0;c<i.length;c++){var d=i[c];d.y>r&&(r=d.y),d.y<a&&(a=d.y),d.x>n&&(n=d.x),d.x<l&&(l=d.x)}return s<=n&&(s=n+1),o>=l&&(o=l-1),{curves:t.curves,points:i,isCW:x.isClockWise(i),identifier:-1,boundingBox:new u(new A(l,a),new A(n,r))}}));l=l.filter((function(t){return t.points.length>1}));for(var c=0;c<l.length;c++)l[c].identifier=c;var d=l.map((function(e){return function(t,e,i,r,n){null!=n&&""!==n||(n="nonzero");var o=new A;t.boundingBox.getCenter(o);var s=function(t,e,i){var r=new A;e.getCenter(r);var n=[];return i.forEach((function(e){e.boundingBox.containsPoint(r)&&function(t,e){for(var i=[],r=[],n=1;n<t.length;n++)for(var o=t[n-1],s=t[n],l=function(){var t=e[c-1],n=e[c],l=a(o,s,t,n);null!==l&&void 0===i.find((function(t){return t.t<=l.t+Number.EPSILON&&t.t>=l.t-Number.EPSILON}))&&(i.push(l),r.push(new A(l.x,l.y)))},c=1;c<e.length;c++)l();return r}(t,e.points).forEach((function(t){n.push({identifier:e.identifier,isCW:e.isCW,point:t})}))})),n.sort((function(t,e){return t.point.x-e.point.x})),n}([new A(i,o.y),new A(r,o.y)],t.boundingBox,e);s.sort((function(t,e){return t.point.x-e.point.x}));var l=[],c=[];s.forEach((function(e){e.identifier===t.identifier?l.push(e):c.push(e)}));for(var d=l[0].point.x,u=[],p=0;p<c.length&&c[p].point.x<d;)u.length>0&&u[u.length-1]===c[p].identifier?u.pop():u.push(c[p].identifier),p++;if(u.push(t.identifier),"evenodd"===n){var m=u.length%2==0,h=u[u.length-2];return{identifier:t.identifier,isHole:m,for:h}}if("nonzero"===n){for(var f=!0,g=null,y=null,b=0;b<u.length;b++){var v=u[b];f?(y=e[v].isCW,f=!1,g=v):y!==e[v].isCW&&(y=e[v].isCW,f=!0)}return{identifier:t.identifier,isHole:f,for:g}}console.warn('fill-rule: "'+n+'" is currently not implemented.')}(e,l,o,s,t.userData?t.userData.style.fillRule:void 0)})),p=[];return l.forEach((function(t){if(!d[t.identifier].isHole){var e=new b;e.curves=t.curves,d.filter((function(e){return e.isHole&&e.for===t.identifier})).forEach((function(t){var i=l[t.identifier],r=new y;r.curves=i.curves,e.holes.push(r)})),p.push(e)}})),p}},{key:"getStrokeStyle",value:function(t,e,i,r,a){return{strokeColor:e=void 0!==e?e:"#000",strokeWidth:t=void 0!==t?t:1,strokeLineJoin:i=void 0!==i?i:"miter",strokeLineCap:r=void 0!==r?r:"butt",strokeMiterLimit:a=void 0!==a?a:4}}},{key:"pointsToStroke",value:function(t,e,i,a){var n=[],o=[],s=[];if(0===r.pointsToStrokeWithBuffers(t,e,i,a,n,o,s))return null;var l=new p;return l.setAttribute("position",new h(n,3)),l.setAttribute("normal",new h(o,3)),l.setAttribute("uv",new h(s,2)),l}},{key:"pointsToStrokeWithBuffers",value:function(t,e,i,r,a,n,o,s){var l=new A,c=new A,d=new A,u=new A,p=new A,m=new A,h=new A,f=new A,g=new A,y=new A,b=new A,v=new A,x=new A,w=new A,E=new A,S=new A,k=new A;i=void 0!==i?i:12,r=void 0!==r?r:.001,s=void 0!==s?s:0;var T=(t=function(t){for(var e=!1,i=1,a=t.length-1;i<a;i++)if(t[i].distanceTo(t[i+1])<r){e=!0;break}if(!e)return t;var n=[];n.push(t[0]);for(var o=1,s=t.length-1;o<s;o++)t[o].distanceTo(t[o+1])>=r&&n.push(t[o]);return n.push(t[t.length-1]),n}(t)).length;if(T<2)return 0;var M,O,C,_,N,R,P=t[0].equals(t[T-1]),L=t[0],j=e.strokeWidth/2,I=1/(T-1),B=0,F=!1,D=0,H=3*s,z=2*s;K(t[0],t[1],l).multiplyScalar(j),f.copy(t[0]).sub(l),g.copy(t[0]).add(l),y.copy(f),b.copy(g);for(var V=1;V<T;V++){M=t[V],O=V===T-1?P?t[1]:void 0:t[V+1];var G=l;if(K(L,M,G),d.copy(G).multiplyScalar(j),v.copy(M).sub(d),x.copy(M).add(d),C=B+I,_=!1,void 0!==O){K(M,O,c),d.copy(c).multiplyScalar(j),w.copy(M).sub(d),E.copy(M).add(d),N=!0,d.subVectors(O,L),G.dot(d)<0&&(N=!1),1===V&&(F=N),d.subVectors(O,M),d.normalize();var U=Math.abs(G.dot(d));if(U>Number.EPSILON){var Y=j/U;d.multiplyScalar(-Y),u.subVectors(M,L),p.copy(u).setLength(Y).add(d),S.copy(p).negate();var q=p.length(),W=u.length();u.divideScalar(W),m.subVectors(O,M);var X=m.length();switch(m.divideScalar(X),u.dot(S)<W&&m.dot(S)<X&&(_=!0),k.copy(p).add(M),S.add(M),R=!1,_?N?(E.copy(S),x.copy(S)):(w.copy(S),v.copy(S)):et(),e.strokeLineJoin){case"bevel":it(N,_,C);break;case"round":rt(N,_),N?tt(M,v,w,C,0):tt(M,E,x,C,1);break;default:var J=j*e.strokeMiterLimit/q;if(J<1){if("miter-clip"!==e.strokeLineJoin){it(N,_,C);break}rt(N,_),N?(m.subVectors(k,v).multiplyScalar(J).add(v),h.subVectors(k,w).multiplyScalar(J).add(w),$(v,C,0),$(m,C,0),$(M,C,.5),$(M,C,.5),$(m,C,0),$(h,C,0),$(M,C,.5),$(h,C,0),$(w,C,0)):(m.subVectors(k,x).multiplyScalar(J).add(x),h.subVectors(k,E).multiplyScalar(J).add(E),$(x,C,1),$(m,C,1),$(M,C,.5),$(M,C,.5),$(m,C,1),$(h,C,1),$(M,C,.5),$(h,C,1),$(E,C,1))}else _?(N?($(g,B,1),$(f,B,0),$(k,C,0),$(g,B,1),$(k,C,0),$(S,C,1)):($(g,B,1),$(f,B,0),$(k,C,1),$(f,B,0),$(S,C,0),$(k,C,1)),N?w.copy(k):E.copy(k)):N?($(v,C,0),$(k,C,0),$(M,C,.5),$(M,C,.5),$(k,C,0),$(w,C,0)):($(x,C,1),$(k,C,1),$(M,C,.5),$(M,C,.5),$(k,C,1),$(E,C,1)),R=!0}}else et()}else et();P||V!==T-1||at(t[0],y,b,N,!0,B),B=C,L=M,f.copy(w),g.copy(E)}if(P){if(_&&a){var Q=k,Z=S;F!==N&&(Q=S,Z=k),N?(R||F)&&(Z.toArray(a,0),Z.toArray(a,9),R&&Q.toArray(a,3)):!R&&F||(Z.toArray(a,3),Z.toArray(a,9),R&&Q.toArray(a,0))}}else at(M,v,x,N,!1,C);return D;function K(t,e,i){return i.subVectors(e,t),i.set(-i.y,i.x).normalize()}function $(t,e,i){a&&(a[H]=t.x,a[H+1]=t.y,a[H+2]=0,n&&(n[H]=0,n[H+1]=0,n[H+2]=1),H+=3,o&&(o[z]=e,o[z+1]=i,z+=2)),D+=3}function tt(t,e,r,a,n){l.copy(e).sub(t).normalize(),c.copy(r).sub(t).normalize();var o=Math.PI,s=l.dot(c);Math.abs(s)<1&&(o=Math.abs(Math.acos(s))),o/=i,d.copy(e);for(var p=0,m=i-1;p<m;p++)u.copy(d).rotateAround(t,o),$(d,a,n),$(u,a,n),$(t,a,.5),d.copy(u);$(u,a,n),$(r,a,n),$(t,a,.5)}function et(){$(g,B,1),$(f,B,0),$(v,C,0),$(g,B,1),$(v,C,0),$(x,C,1)}function it(t,e,i){e?t?($(g,B,1),$(f,B,0),$(v,C,0),$(g,B,1),$(v,C,0),$(S,C,1),$(v,i,0),$(w,i,0),$(S,i,.5)):($(g,B,1),$(f,B,0),$(x,C,1),$(f,B,0),$(S,C,0),$(x,C,1),$(x,i,1),$(S,i,0),$(E,i,1)):t?($(v,i,0),$(w,i,0),$(M,i,.5)):($(x,i,1),$(E,i,0),$(M,i,.5))}function rt(t,e){e&&(t?($(g,B,1),$(f,B,0),$(v,C,0),$(g,B,1),$(v,C,0),$(S,C,1),$(v,B,0),$(M,C,.5),$(S,C,1),$(M,C,.5),$(w,B,0),$(S,C,1)):($(g,B,1),$(f,B,0),$(x,C,1),$(f,B,0),$(S,C,0),$(x,C,1),$(x,B,1),$(S,C,0),$(M,C,.5),$(M,C,.5),$(S,C,0),$(E,B,1)))}function at(t,i,r,n,s,p){switch(e.strokeLineCap){case"round":s?tt(t,r,i,p,.5):tt(t,i,r,p,.5);break;case"square":if(s)l.subVectors(i,t),c.set(l.y,-l.x),d.addVectors(l,c).add(t),u.subVectors(c,l).add(t),n?(d.toArray(a,3),u.toArray(a,0),u.toArray(a,9)):(d.toArray(a,3),1===o[7]?u.toArray(a,9):d.toArray(a,9),u.toArray(a,0));else{l.subVectors(r,t),c.set(l.y,-l.x),d.addVectors(l,c).add(t),u.subVectors(c,l).add(t);var m=a.length;n?(d.toArray(a,m-3),u.toArray(a,m-6),u.toArray(a,m-12)):(u.toArray(a,m-6),d.toArray(a,m-3),u.toArray(a,m-12))}}}}}],(s=[{key:"load",value:function(t,e,i,r){var a=this,n=new m(a.manager);n.setPath(a.path),n.setRequestHeader(a.requestHeader),n.setWithCredentials(a.withCredentials),n.load(t,(function(i){try{e(a.parse(i))}catch(e){r?r(e):console.error(e),a.manager.itemError(t)}}),i,r)}},{key:"parse",value:function(t){var r=this;function a(t,e,i,r,a,o,s,l){if(0!=e&&0!=i){r=r*Math.PI/180,e=Math.abs(e),i=Math.abs(i);var c=(s.x-l.x)/2,d=(s.y-l.y)/2,u=Math.cos(r)*c+Math.sin(r)*d,p=-Math.sin(r)*c+Math.cos(r)*d,m=e*e,h=i*i,f=u*u,g=p*p,y=f/m+g/h;if(y>1){var b=Math.sqrt(y);m=(e*=b)*e,h=(i*=b)*i}var v=m*g+h*f,x=(m*h-v)/v,w=Math.sqrt(Math.max(0,x));a===o&&(w=-w);var A=w*e*p/i,E=-w*i*u/e,S=Math.cos(r)*A-Math.sin(r)*E+(s.x+l.x)/2,k=Math.sin(r)*A+Math.cos(r)*E+(s.y+l.y)/2,T=n(1,0,(u-A)/e,(p-E)/i),M=n((u-A)/e,(p-E)/i,(-u-A)/e,(-p-E)/i)%(2*Math.PI);t.currentPath.absellipse(S,k,e,i,T,T+M,0===o,r)}else t.lineTo(l.x,l.y)}function n(t,e,i,r){var a=t*i+e*r,n=Math.sqrt(t*t+e*e)*Math.sqrt(i*i+r*r),o=Math.acos(Math.max(-1,Math.min(1,a/n)));return t*r-e*i<0&&(o=-o),o}function o(t,e){e=Object.assign({},e);var i={};if(t.hasAttribute("class"))for(var r=t.getAttribute("class").split(/\s/).filter(Boolean).map((function(t){return t.trim()})),a=0;a<r.length;a++)i=Object.assign(i,x["."+r[a]]);function n(r,a,n){void 0===n&&(n=function(t){return t.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),t}),t.hasAttribute(r)&&(e[a]=n(t.getAttribute(r))),i[r]&&(e[a]=n(i[r])),t.style&&""!==t.style[r]&&(e[a]=n(t.style[r]))}function o(t){return Math.max(0,Math.min(1,u(t)))}function s(t){return Math.max(0,u(t))}return t.hasAttribute("id")&&(i=Object.assign(i,x["#"+t.getAttribute("id")])),n("fill","fill"),n("fill-opacity","fillOpacity",o),n("fill-rule","fillRule"),n("opacity","opacity",o),n("stroke","stroke"),n("stroke-opacity","strokeOpacity",o),n("stroke-width","strokeWidth",s),n("stroke-linejoin","strokeLineJoin"),n("stroke-linecap","strokeLineCap"),n("stroke-miterlimit","strokeMiterLimit",s),n("visibility","visibility"),e}function s(t,e){return t-(e-t)}function l(t,i,r){if("string"!=typeof t)throw new TypeError("Invalid input: "+e(t));var a,n={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},o=0,s=!0,l="",c="",d=[];function u(t,e,i){var r=new SyntaxError('Unexpected character "'+t+'" at index '+e+".");throw r.partial=i,r}function p(){""!==l&&(""===c?d.push(Number(l)):d.push(Number(l)*Math.pow(10,Number(c)))),l="",c=""}for(var m=t.length,h=0;h<m;h++)if(a=t[h],Array.isArray(i)&&i.includes(d.length%r)&&n.FLAGS.test(a))o=1,l=a,p();else{if(0===o){if(n.WHITESPACE.test(a))continue;if(n.DIGIT.test(a)||n.SIGN.test(a)){o=1,l=a;continue}if(n.POINT.test(a)){o=2,l=a;continue}n.COMMA.test(a)&&(s&&u(a,h,d),s=!0)}if(1===o){if(n.DIGIT.test(a)){l+=a;continue}if(n.POINT.test(a)){l+=a,o=2;continue}if(n.EXP.test(a)){o=3;continue}n.SIGN.test(a)&&1===l.length&&n.SIGN.test(l[0])&&u(a,h,d)}if(2===o){if(n.DIGIT.test(a)){l+=a;continue}if(n.EXP.test(a)){o=3;continue}n.POINT.test(a)&&"."===l[l.length-1]&&u(a,h,d)}if(3===o){if(n.DIGIT.test(a)){c+=a;continue}if(n.SIGN.test(a)){if(""===c){c+=a;continue}1===c.length&&n.SIGN.test(c)&&u(a,h,d)}}n.WHITESPACE.test(a)?(p(),o=0,s=!1):n.COMMA.test(a)?(p(),o=0,s=!0):n.SIGN.test(a)?(p(),o=1,l=a):n.POINT.test(a)?(p(),o=2,l=a):u(a,h,d)}return p(),d}var c=["mm","cm","in","pt","pc","px"],d={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function u(t){var e="px";if("string"==typeof t||t instanceof String)for(var i=0,a=c.length;i<a;i++){var n=c[i];if(t.endsWith(n)){e=n,t=t.substring(0,t.length-n.length);break}}var o=void 0;return"px"===e&&"px"!==r.defaultUnit?o=d.in[r.defaultUnit]/r.defaultDPI:(o=d[e][r.defaultUnit])<0&&(o=d[e].in*r.defaultDPI),o*parseFloat(t)}function p(t){var e=t.elements;return e[0]*e[4]-e[1]*e[3]<0}function m(t){var e=t.elements,i=e[0]*e[3]+e[1]*e[4];if(0===i)return!1;var r=h(t),a=f(t);return Math.abs(i/(r*a))>Number.EPSILON}function h(t){var e=t.elements;return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function f(t){var e=t.elements;return Math.sqrt(e[3]*e[3]+e[4]*e[4])}var b=[],x={},w=[],k=new g,T=new g,M=new g,O=new g,C=new A,_=new E,N=new g,R=(new DOMParser).parseFromString(t,"image/svg+xml");return function t(e,r){if(1===e.nodeType){var n=function(t){if(!(t.hasAttribute("transform")||"use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))))return null;var e=function(t){var e=new g,i=k;if("use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))){var r=u(t.getAttribute("x")),a=u(t.getAttribute("y"));e.translate(r,a)}if(t.hasAttribute("transform"))for(var n=t.getAttribute("transform").split(")"),o=n.length-1;o>=0;o--){var s=n[o].trim();if(""!==s){var c=s.indexOf("("),d=s.length;if(c>0&&c<d){var p=s.slice(0,c),m=l(s.slice(c+1));switch(i.identity(),p){case"translate":if(m.length>=1){var h=m[0],f=0;m.length>=2&&(f=m[1]),i.translate(h,f)}break;case"rotate":if(m.length>=1){var y,b=0,v=0;y=m[0]*Math.PI/180,m.length>=3&&(b=m[1],v=m[2]),T.makeTranslation(-b,-v),M.makeRotation(y),O.multiplyMatrices(M,T),T.makeTranslation(b,v),i.multiplyMatrices(T,O)}break;case"scale":if(m.length>=1){var x=m[0],w=x;m.length>=2&&(w=m[1]),i.scale(x,w)}break;case"skewX":1===m.length&&i.set(1,Math.tan(m[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===m.length&&i.set(1,0,0,Math.tan(m[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===m.length&&i.set(m[0],m[2],m[4],m[1],m[3],m[5],0,0,1)}}e.premultiply(i)}}return e}(t);return w.length>0&&e.premultiply(w[w.length-1]),N.copy(e),w.push(e),e}(e),c=!1,d=null;switch(e.nodeName){case"svg":case"g":r=o(e,r);break;case"style":!function(t){if(t.sheet&&t.sheet.cssRules&&t.sheet.cssRules.length)for(var e=0;e<t.sheet.cssRules.length;e++){var r=t.sheet.cssRules[e];if(1===r.type)for(var a=r.selectorText.split(/,/gm).filter(Boolean).map((function(t){return t.trim()})),n=0;n<a.length;n++){var o=Object.fromEntries(Object.entries(r.style).filter((function(t){return""!==i(t,2)[1]})));x[a[n]]=Object.assign(x[a[n]]||{},o)}}}(e);break;case"path":r=o(e,r),e.hasAttribute("d")&&(d=function(t){var e=new v,i=new A,r=new A,n=new A,o=!0,c=!1,d=t.getAttribute("d");if(""===d||"none"===d)return null;for(var u=d.match(/[a-df-z][^a-df-z]*/gi),p=0,m=u.length;p<m;p++){var h=u[p],f=h.charAt(0),g=h.slice(1).trim();!0===o&&(c=!0,o=!1);var y=void 0;switch(f){case"M":for(var b=0,x=(y=l(g)).length;b<x;b+=2)i.x=y[b+0],i.y=y[b+1],r.x=i.x,r.y=i.y,0===b?e.moveTo(i.x,i.y):e.lineTo(i.x,i.y),0===b&&n.copy(i);break;case"H":for(var w=0,E=(y=l(g)).length;w<E;w++)i.x=y[w],r.x=i.x,r.y=i.y,e.lineTo(i.x,i.y),0===w&&!0===c&&n.copy(i);break;case"V":for(var S=0,k=(y=l(g)).length;S<k;S++)i.y=y[S],r.x=i.x,r.y=i.y,e.lineTo(i.x,i.y),0===S&&!0===c&&n.copy(i);break;case"L":for(var T=0,M=(y=l(g)).length;T<M;T+=2)i.x=y[T+0],i.y=y[T+1],r.x=i.x,r.y=i.y,e.lineTo(i.x,i.y),0===T&&!0===c&&n.copy(i);break;case"C":for(var O=0,C=(y=l(g)).length;O<C;O+=6)e.bezierCurveTo(y[O+0],y[O+1],y[O+2],y[O+3],y[O+4],y[O+5]),r.x=y[O+2],r.y=y[O+3],i.x=y[O+4],i.y=y[O+5],0===O&&!0===c&&n.copy(i);break;case"S":for(var _=0,N=(y=l(g)).length;_<N;_+=4)e.bezierCurveTo(s(i.x,r.x),s(i.y,r.y),y[_+0],y[_+1],y[_+2],y[_+3]),r.x=y[_+0],r.y=y[_+1],i.x=y[_+2],i.y=y[_+3],0===_&&!0===c&&n.copy(i);break;case"Q":for(var R=0,P=(y=l(g)).length;R<P;R+=4)e.quadraticCurveTo(y[R+0],y[R+1],y[R+2],y[R+3]),r.x=y[R+0],r.y=y[R+1],i.x=y[R+2],i.y=y[R+3],0===R&&!0===c&&n.copy(i);break;case"T":for(var L=0,j=(y=l(g)).length;L<j;L+=2){var I=s(i.x,r.x),B=s(i.y,r.y);e.quadraticCurveTo(I,B,y[L+0],y[L+1]),r.x=I,r.y=B,i.x=y[L+0],i.y=y[L+1],0===L&&!0===c&&n.copy(i)}break;case"A":for(var F=0,D=(y=l(g,[3,4],7)).length;F<D;F+=7)if(y[F+5]!=i.x||y[F+6]!=i.y){var H=i.clone();i.x=y[F+5],i.y=y[F+6],r.x=i.x,r.y=i.y,a(e,y[F],y[F+1],y[F+2],y[F+3],y[F+4],H,i),0===F&&!0===c&&n.copy(i)}break;case"m":for(var z=0,V=(y=l(g)).length;z<V;z+=2)i.x+=y[z+0],i.y+=y[z+1],r.x=i.x,r.y=i.y,0===z?e.moveTo(i.x,i.y):e.lineTo(i.x,i.y),0===z&&n.copy(i);break;case"h":for(var G=0,U=(y=l(g)).length;G<U;G++)i.x+=y[G],r.x=i.x,r.y=i.y,e.lineTo(i.x,i.y),0===G&&!0===c&&n.copy(i);break;case"v":for(var Y=0,q=(y=l(g)).length;Y<q;Y++)i.y+=y[Y],r.x=i.x,r.y=i.y,e.lineTo(i.x,i.y),0===Y&&!0===c&&n.copy(i);break;case"l":for(var W=0,X=(y=l(g)).length;W<X;W+=2)i.x+=y[W+0],i.y+=y[W+1],r.x=i.x,r.y=i.y,e.lineTo(i.x,i.y),0===W&&!0===c&&n.copy(i);break;case"c":for(var J=0,Q=(y=l(g)).length;J<Q;J+=6)e.bezierCurveTo(i.x+y[J+0],i.y+y[J+1],i.x+y[J+2],i.y+y[J+3],i.x+y[J+4],i.y+y[J+5]),r.x=i.x+y[J+2],r.y=i.y+y[J+3],i.x+=y[J+4],i.y+=y[J+5],0===J&&!0===c&&n.copy(i);break;case"s":for(var Z=0,K=(y=l(g)).length;Z<K;Z+=4)e.bezierCurveTo(s(i.x,r.x),s(i.y,r.y),i.x+y[Z+0],i.y+y[Z+1],i.x+y[Z+2],i.y+y[Z+3]),r.x=i.x+y[Z+0],r.y=i.y+y[Z+1],i.x+=y[Z+2],i.y+=y[Z+3],0===Z&&!0===c&&n.copy(i);break;case"q":for(var $=0,tt=(y=l(g)).length;$<tt;$+=4)e.quadraticCurveTo(i.x+y[$+0],i.y+y[$+1],i.x+y[$+2],i.y+y[$+3]),r.x=i.x+y[$+0],r.y=i.y+y[$+1],i.x+=y[$+2],i.y+=y[$+3],0===$&&!0===c&&n.copy(i);break;case"t":for(var et=0,it=(y=l(g)).length;et<it;et+=2){var rt=s(i.x,r.x),at=s(i.y,r.y);e.quadraticCurveTo(rt,at,i.x+y[et+0],i.y+y[et+1]),r.x=rt,r.y=at,i.x=i.x+y[et+0],i.y=i.y+y[et+1],0===et&&!0===c&&n.copy(i)}break;case"a":for(var nt=0,ot=(y=l(g,[3,4],7)).length;nt<ot;nt+=7)if(0!=y[nt+5]||0!=y[nt+6]){var st=i.clone();i.x+=y[nt+5],i.y+=y[nt+6],r.x=i.x,r.y=i.y,a(e,y[nt],y[nt+1],y[nt+2],y[nt+3],y[nt+4],st,i),0===nt&&!0===c&&n.copy(i)}break;case"Z":case"z":e.currentPath.autoClose=!0,e.currentPath.curves.length>0&&(i.copy(n),e.currentPath.currentPoint.copy(i),o=!0);break;default:console.warn(h)}c=!1}return e}(e));break;case"rect":r=o(e,r),d=function(t){var e=u(t.getAttribute("x")||0),i=u(t.getAttribute("y")||0),r=u(t.getAttribute("rx")||t.getAttribute("ry")||0),a=u(t.getAttribute("ry")||t.getAttribute("rx")||0),n=u(t.getAttribute("width")),o=u(t.getAttribute("height")),s=.448084975506,l=new v;return l.moveTo(e+r,i),l.lineTo(e+n-r,i),(0!==r||0!==a)&&l.bezierCurveTo(e+n-r*s,i,e+n,i+a*s,e+n,i+a),l.lineTo(e+n,i+o-a),(0!==r||0!==a)&&l.bezierCurveTo(e+n,i+o-a*s,e+n-r*s,i+o,e+n-r,i+o),l.lineTo(e+r,i+o),(0!==r||0!==a)&&l.bezierCurveTo(e+r*s,i+o,e,i+o-a*s,e,i+o-a),l.lineTo(e,i+a),(0!==r||0!==a)&&l.bezierCurveTo(e,i+a*s,e+r*s,i,e+r,i),l}(e);break;case"polygon":r=o(e,r),d=function(t){var e=new v,i=0;return t.getAttribute("points").replace(/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,(function(t,r,a){var n=u(r),o=u(a);0===i?e.moveTo(n,o):e.lineTo(n,o),i++})),e.currentPath.autoClose=!0,e}(e);break;case"polyline":r=o(e,r),d=function(t){var e=new v,i=0;return t.getAttribute("points").replace(/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,(function(t,r,a){var n=u(r),o=u(a);0===i?e.moveTo(n,o):e.lineTo(n,o),i++})),e.currentPath.autoClose=!1,e}(e);break;case"circle":r=o(e,r),d=function(t){var e=u(t.getAttribute("cx")||0),i=u(t.getAttribute("cy")||0),r=u(t.getAttribute("r")||0),a=new y;a.absarc(e,i,r,0,2*Math.PI);var n=new v;return n.subPaths.push(a),n}(e);break;case"ellipse":r=o(e,r),d=function(t){var e=u(t.getAttribute("cx")||0),i=u(t.getAttribute("cy")||0),r=u(t.getAttribute("rx")||0),a=u(t.getAttribute("ry")||0),n=new y;n.absellipse(e,i,r,a,0,2*Math.PI);var o=new v;return o.subPaths.push(n),o}(e);break;case"line":r=o(e,r),d=function(t){var e=u(t.getAttribute("x1")||0),i=u(t.getAttribute("y1")||0),r=u(t.getAttribute("x2")||0),a=u(t.getAttribute("y2")||0),n=new v;return n.moveTo(e,i),n.lineTo(r,a),n.currentPath.autoClose=!1,n}(e);break;case"defs":c=!0;break;case"use":r=o(e,r);var R=(e.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),P=e.viewportElement.getElementById(R);P?t(P,r):console.warn("SVGLoader: 'use node' references non-existent node id: "+R)}d&&(void 0!==r.fill&&"none"!==r.fill&&d.color.setStyle(r.fill,S),function(t,e){function i(t){_.set(t.x,t.y,1).applyMatrix3(e),t.set(_.x,_.y)}function r(t){var i,r,a,n,o,s,l,c,d,u,m,h=t.xRadius,f=t.yRadius,g=Math.cos(t.aRotation),y=Math.sin(t.aRotation),b=new E(h*g,h*y,0),v=new E(-f*y,f*g,0),x=b.applyMatrix3(e),w=v.applyMatrix3(e),A=k.set(x.x,w.x,0,x.y,w.y,0,0,0,1),S=T.copy(A).invert(),O=M.copy(S).transpose().multiply(S).elements,C=(i=O[0],r=O[1],d=i+(a=O[4]),u=i-a,m=Math.sqrt(u*u+4*r*r),d>0?o=i*(c=1/(n=.5*(d+m)))*a-r*c*r:d<0?o=.5*(d-m):(n=.5*m,o=-.5*m),s=u>0?u+m:u-m,Math.abs(s)>2*Math.abs(r)?s=(c=-2*r/s)*(l=1/Math.sqrt(1+c*c)):0===Math.abs(r)?(s=1,l=0):l=(c=-.5*s/r)*(s=1/Math.sqrt(1+c*c)),u>0&&(c=s,s=-l,l=c),{rt1:n,rt2:o,cs:s,sn:l}),_=Math.sqrt(C.rt1),N=Math.sqrt(C.rt2);if(t.xRadius=1/_,t.yRadius=1/N,t.aRotation=Math.atan2(C.sn,C.cs),!((t.aEndAngle-t.aStartAngle)%(2*Math.PI)<Number.EPSILON)){var R=T.set(_,0,0,0,N,0,0,0,1),P=M.set(C.cs,C.sn,0,-C.sn,C.cs,0,0,0,1),L=R.multiply(P).multiply(A),j=function(t){var e=new E(Math.cos(t),Math.sin(t),0).applyMatrix3(L),i=e.x,r=e.y;return Math.atan2(r,i)};t.aStartAngle=j(t.aStartAngle),t.aEndAngle=j(t.aEndAngle),p(e)&&(t.aClockwise=!t.aClockwise)}}function a(t){var i=h(e),r=f(e);t.xRadius*=i,t.yRadius*=r;var a=i>Number.EPSILON?Math.atan2(e.elements[1],e.elements[0]):Math.atan2(-e.elements[3],e.elements[4]);t.aRotation+=a,p(e)&&(t.aStartAngle*=-1,t.aEndAngle*=-1,t.aClockwise=!t.aClockwise)}for(var n=t.subPaths,o=0,s=n.length;o<s;o++)for(var l=n[o].curves,c=0;c<l.length;c++){var d=l[c];d.isLineCurve?(i(d.v1),i(d.v2)):d.isCubicBezierCurve?(i(d.v0),i(d.v1),i(d.v2),i(d.v3)):d.isQuadraticBezierCurve?(i(d.v0),i(d.v1),i(d.v2)):d.isEllipseCurve&&(C.set(d.aX,d.aY),i(C),d.aX=C.x,d.aY=C.y,m(e)?r(d):a(d))}}(d,N),b.push(d),d.userData={node:e,style:r});for(var L=e.childNodes,j=0;j<L.length;j++){var I=L[j];c&&"style"!==I.nodeName&&"defs"!==I.nodeName||t(I,r)}n&&(w.pop(),w.length>0?N.copy(w[w.length-1]):N.identity())}}(R.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:b,xml:R.documentElement}}}])&&a(n.prototype,s),l&&a(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,s,l}(f);t.exports={SVGLoader:k}},7866:function(t,e,i){var r,a,n,o;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}t=i.nmd(t),o=function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==s(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("cursor-teleport",{schema:{cameraHead:{type:"selector",default:""},cameraRig:{type:"selector",default:""},collisionEntities:{type:"string",default:""},ignoreEntities:{type:"string",default:""},landingMaxAngle:{default:45,min:0,max:360},landingNormal:{type:"vec3",default:{x:0,y:1,z:0}},transitionSpeed:{type:"number",default:6e-4}},init:function(){var t=this;this.mobile=AFRAME.utils.device.isMobile();var e=this.el.sceneEl;this.canvas=e.renderer.domElement,this.data.cameraHead.object3D.traverse((function(e){e instanceof THREE.Camera&&(t.cam=e)})),this.camRig=this.data.cameraRig.object3D,this.rayCaster=new THREE.Raycaster,this.referenceNormal=new THREE.Vector3,this.rayCastObjects=[],this.referenceNormal.copy(this.data.landingNormal);var i=new THREE.RingGeometry(.25,.3,32,1);i.rotateX(-Math.PI/2),i.translate(0,.02,0);var r=new THREE.MeshBasicMaterial({color:7818734}),a=new THREE.Mesh(i,r),n=new THREE.CylinderGeometry(.3,.3,.5,32,1,!0);n.translate(0,.25,0);var o=(new THREE.TextureLoader).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAQCAYAAADXnxW3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAADJJREFUeNpEx7ENgDAAAzArK0JA6f8X9oewlcWStU1wBGdwB08wgjeYm79jc2nbYH0DAC/+CORJxO5fAAAAAElFTkSuQmCC"),s=new THREE.MeshBasicMaterial({color:7818734,side:"double",map:o,transparent:!0,depthTest:!1}),l=new THREE.Mesh(n,s),c=new THREE.Group;c.add(a),c.add(l),this.teleportIndicator=c,e.object3D.add(this.teleportIndicator),this.transitioning=!1,this.transitionProgress=0,this.transitionCamPosStart=new THREE.Vector3,this.transitionCamPosEnd=new THREE.Vector3,this.updateRaycastObjects=this.updateRaycastObjects.bind(this),this.getMouseState=this.getMouseState.bind(this),this.getTeleportPosition=this.getTeleportPosition.bind(this),this.isValidNormalsAngle=this.isValidNormalsAngle.bind(this),this.transition=this.transition.bind(this),this.mouseMove=this.mouseMove.bind(this),this.mouseDown=this.mouseDown.bind(this),this.mouseUp=this.mouseUp.bind(this),this.easeInOutQuad=this.easeInOutQuad.bind(this),this.updateRaycastObjects()},remove:function(){this.cam=null,this.canvas=null,this.rayCastObjects.length=0,this.el.sceneEl.object3D.remove(this.teleportIndicator),this.teleportIndicator.children[0].material.dispose(),this.teleportIndicator.children[0].geometry.dispose(),this.teleportIndicator.children[1].material.dispose(),this.teleportIndicator.children[1].geometry.dispose(),this.teleportIndicator=null,this.collisionMesh&&(this.collisionMesh.geometry.dispose(),this.collisionMesh.material.dispose(),this.collisionMesh=null)},play:function(){var t=this.canvas;t.addEventListener("mousedown",this.mouseDown,!1),t.addEventListener("mousemove",this.mouseMove,!1),t.addEventListener("mouseup",this.mouseUp,!1),t.addEventListener("touchstart",this.mouseDown,!1),t.addEventListener("touchmove",this.mouseMove,!1),t.addEventListener("touchend",this.mouseUp,!1)},pause:function(){var t=this.canvas;t.removeEventListener("mousedown",this.mouseDown),t.removeEventListener("mousemove",this.mouseMove),t.removeEventListener("mouseup",this.mouseUp),t.removeEventListener("touchstart",this.mouseDown),t.removeEventListener("touchmove",this.mouseMove),t.removeEventListener("touchend",this.mouseUp)},updateRaycastObjects:function(){var t=this;if(this.rayCastObjects.length=0,""!==this.data.collisionEntities)this.el.sceneEl.querySelectorAll(this.data.collisionEntities).forEach((function(e){e.object3D.traverse((function(e){e.isMesh&&(e.userData.collision=!0,t.rayCastObjects.push(e))}))}));else{if(!this.collisionMesh){var e=new THREE.PlaneGeometry(500,500,1);e.rotateX(-Math.PI/2);var i=new THREE.MeshNormalMaterial,r=new THREE.Mesh(e,i);r.userData.collision=!0,this.collisionMesh=r}this.rayCastObjects.push(this.collisionMesh)}""!==this.data.ignoreEntities&&this.el.sceneEl.querySelectorAll(this.data.ignoreEntities).forEach((function(e){e.object3D.traverse((function(e){e.isMesh&&t.rayCastObjects.push(e)}))}))},getMouseState:function(){var t=new THREE.Vector2;return function(e){var i=this.canvas.getBoundingClientRect();return null!=e.clientX?(t.x=e.clientX-i.left,t.y=e.clientY-i.top,t):null!=e.touches[0]?(t.x=e.touches[0].clientX-i.left,t.y=e.touches[0].clientY-i.top,t):void 0}}(),getTeleportPosition:function(){var t=new THREE.Vector2;return function(e,i){if(0!==this.rayCastObjects.length){if(this.cam&&this.canvas){var r=this.cam,a=this.canvas.getBoundingClientRect();t.x=e/(a.right-a.left)*2-1,t.y=-i/(a.bottom-a.top)*2+1,this.rayCaster.setFromCamera(t,r);var n=this.rayCaster.intersectObjects(this.rayCastObjects);return!(0===n.length||!this.isValidNormalsAngle(n[0].face.normal))&&!0===n[0].object.userData.collision&&n[0].point}return!1}return!1}}(),isValidNormalsAngle:function(t){var e=this.referenceNormal.angleTo(t);return THREE.MathUtils.RAD2DEG*e<=this.data.landingMaxAngle},transition:function(t){this.transitionProgress=0,this.transitionCamPosEnd.copy(t),this.transitionCamPosStart.copy(this.camRig.position),this.transitioning=!0},mouseMove:function(t){var e=this.getMouseState(t);this.mouseX=e.x,this.mouseY=e.y},mouseDown:function(t){this.updateRaycastObjects();var e=this.getMouseState(t);this.mouseX=e.x,this.mouseY=e.y,this.mouseXOrig=e.x,this.mouseYOrig=e.y},mouseUp:function(t){if(this.mouseX===this.mouseXOrig&&this.mouseY===this.mouseYOrig){var e=this.getTeleportPosition(this.mouseX,this.mouseY);e&&(this.teleportIndicator.position.copy(e),this.transition(e))}},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},tick:function(t,e){if(!this.transitioning&&!this.mobile){var i=this.getTeleportPosition(this.mouseX,this.mouseY);i&&this.teleportIndicator.position.copy(i)}if(this.transitioning){this.transitionProgress+=e*this.data.transitionSpeed;var r=this.easeInOutQuad(this.transitionProgress),a=r<.5?r:1.5-1*(r+.5);this.teleportIndicator.scale.set(1+a,1,1+a);var n=this.camRig.position;n.x=this.transitionCamPosStart.x+(this.transitionCamPosEnd.x-this.transitionCamPosStart.x)*r,n.y=this.transitionCamPosStart.y+(this.transitionCamPosEnd.y-this.transitionCamPosStart.y)*r,n.z=this.transitionCamPosStart.z+(this.transitionCamPosEnd.z-this.transitionCamPosStart.z)*r,this.transitionProgress>=1&&(this.transitioning=!1,n.copy(this.transitionCamPosEnd))}}})}])},"object"==s(e)&&"object"==s(t)?t.exports=o():(a=[],void 0===(n="function"==typeof(r=o)?r.apply(e,a):r)||(t.exports=n))},3987:t=>{var e={once:THREE.LoopOnce,repeat:THREE.LoopRepeat,pingpong:THREE.LoopPingPong};function i(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}t.exports=AFRAME.registerComponent("animation-mixer",{schema:{clip:{default:"*"},duration:{default:0},clampWhenFinished:{default:!1,type:"boolean"},crossFadeDuration:{default:0},loop:{default:"repeat",oneOf:Object.keys(e)},repetitions:{default:1/0,min:0},timeScale:{default:1},startAt:{default:0}},init:function(){var t=this;this.model=null,this.mixer=null,this.activeActions=[];var e=this.el.getObject3D("mesh");e?this.load(e):this.el.addEventListener("model-loaded",(function(e){t.load(e.detail.model)}))},load:function(t){var e=this.el;this.model=t,this.mixer=new THREE.AnimationMixer(t),this.mixer.addEventListener("loop",(function(t){e.emit("animation-loop",{action:t.action,loopDelta:t.loopDelta})})),this.mixer.addEventListener("finished",(function(t){e.emit("animation-finished",{action:t.action,direction:t.direction})})),this.data.clip&&this.update({})},remove:function(){this.mixer&&this.mixer.stopAllAction()},update:function(t){if(t){var i=this.data,r=AFRAME.utils.diff(i,t);if("clip"in r)return this.stopAction(),void(i.clip&&this.playAction());this.activeActions.forEach((function(t){"duration"in r&&i.duration&&t.setDuration(i.duration),"clampWhenFinished"in r&&(t.clampWhenFinished=i.clampWhenFinished),("loop"in r||"repetitions"in r)&&t.setLoop(e[i.loop],i.repetitions),"timeScale"in r&&t.setEffectiveTimeScale(i.timeScale)}))}},stopAction:function(){for(var t=this.data,e=0;e<this.activeActions.length;e++)t.crossFadeDuration?this.activeActions[e].fadeOut(t.crossFadeDuration):this.activeActions[e].stop();this.activeActions.length=0},playAction:function(){if(this.mixer){var t=this.model,r=this.data,a=t.animations||(t.geometry||{}).animations||[];if(a.length)for(var n,o,s=(n=r.clip,new RegExp("^"+n.split(/\*+/).map(i).join(".*")+"$")),l=0;o=a[l];l++)if(o.name.match(s)){var c=this.mixer.clipAction(o,t);c.enabled=!0,c.clampWhenFinished=r.clampWhenFinished,r.duration&&c.setDuration(r.duration),1!==r.timeScale&&c.setEffectiveTimeScale(r.timeScale),c.startAt(this.mixer.time-r.startAt/1e3),c.setLoop(e[r.loop],r.repetitions).fadeIn(r.crossFadeDuration).play(),this.activeActions.push(c)}}},tick:function(t,e){this.mixer&&!isNaN(e)&&this.mixer.update(e/1e3)}})},5165:(t,e)=>{"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}Object.defineProperty(e,"__esModule",{value:!0});var r,a=function(){return a=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var a in e=arguments[i])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},a.apply(this,arguments)},n=function(){function t(t){this.options=t,this.listeners={}}return t.prototype.on=function(t,e){var i=this.listeners[t]||[];this.listeners[t]=i.concat([e])},t.prototype.triggerEvent=function(t,e){var i=this;(this.listeners[t]||[]).forEach((function(t){return t({target:i,event:e})}))},t}();(r=e.NotyfArrayEvent||(e.NotyfArrayEvent={}))[r.Add=0]="Add",r[r.Remove=1]="Remove";var o=function(){function t(){this.notifications=[]}return t.prototype.push=function(t){this.notifications.push(t),this.updateFn(t,e.NotyfArrayEvent.Add,this.notifications)},t.prototype.splice=function(t,i){var r=this.notifications.splice(t,i)[0];return this.updateFn(r,e.NotyfArrayEvent.Remove,this.notifications),r},t.prototype.indexOf=function(t){return this.notifications.indexOf(t)},t.prototype.onUpdate=function(t){this.updateFn=t},t}();!function(t){t.Dismiss="dismiss",t.Click="click"}(e.NotyfEvent||(e.NotyfEvent={}));var s={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!1},l=function(){function t(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var t=document.createDocumentFragment(),e=this._createHTMLElement({tagName:"div",className:"notyf"});t.appendChild(e),document.body.appendChild(t),this.container=e,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}return t.prototype.on=function(t,e){var i;this.events=a(a({},this.events),((i={})[t]=e,i))},t.prototype.update=function(t,i){i===e.NotyfArrayEvent.Add?this.addNotification(t):i===e.NotyfArrayEvent.Remove&&this.removeNotification(t)},t.prototype.removeNotification=function(t){var e,i,r=this,a=this._popRenderedNotification(t);a&&((e=a.node).classList.add("notyf__toast--disappear"),e.addEventListener(this.animationEndEventName,i=function(t){t.target===e&&(e.removeEventListener(r.animationEndEventName,i),r.container.removeChild(e))}))},t.prototype.addNotification=function(t){var e=this._renderNotification(t);this.notifications.push({notification:t,node:e}),this._announce(t.options.message||"Notification")},t.prototype._renderNotification=function(t){var e,i=this._buildNotificationCard(t),r=t.options.className;return r&&(e=i.classList).add.apply(e,r.split(" ")),this.container.appendChild(i),i},t.prototype._popRenderedNotification=function(t){for(var e=-1,i=0;i<this.notifications.length&&e<0;i++)this.notifications[i].notification===t&&(e=i);if(-1!==e)return this.notifications.splice(e,1)[0]},t.prototype.getXPosition=function(t){var e;return(null===(e=null==t?void 0:t.position)||void 0===e?void 0:e.x)||"right"},t.prototype.getYPosition=function(t){var e;return(null===(e=null==t?void 0:t.position)||void 0===e?void 0:e.y)||"bottom"},t.prototype.adjustContainerAlignment=function(t){var e=this.X_POSITION_FLEX_MAP[this.getXPosition(t)],i=this.Y_POSITION_FLEX_MAP[this.getYPosition(t)],r=this.container.style;r.setProperty("justify-content",i),r.setProperty("align-items",e)},t.prototype._buildNotificationCard=function(t){var r=this,a=t.options,n=a.icon;this.adjustContainerAlignment(a);var o=this._createHTMLElement({tagName:"div",className:"notyf__toast"}),s=this._createHTMLElement({tagName:"div",className:"notyf__ripple"}),l=this._createHTMLElement({tagName:"div",className:"notyf__wrapper"}),c=this._createHTMLElement({tagName:"div",className:"notyf__message"});c.innerHTML=a.message||"";var d=a.background||a.backgroundColor;if(n){var u=this._createHTMLElement({tagName:"div",className:"notyf__icon"});if(("string"==typeof n||n instanceof String)&&(u.innerHTML=new String(n).valueOf()),"object"==i(n)){var p=n.tagName,m=void 0===p?"i":p,h=n.className,f=n.text,g=n.color,y=void 0===g?d:g,b=this._createHTMLElement({tagName:m,className:h,text:f});y&&(b.style.color=y),u.appendChild(b)}l.appendChild(u)}if(l.appendChild(c),o.appendChild(l),d&&(a.ripple?(s.style.background=d,o.appendChild(s)):o.style.background=d),a.dismissible){var v=this._createHTMLElement({tagName:"div",className:"notyf__dismiss"}),x=this._createHTMLElement({tagName:"button",className:"notyf__dismiss-btn"});v.appendChild(x),l.appendChild(v),o.classList.add("notyf__toast--dismissible"),x.addEventListener("click",(function(i){var a,n;null===(n=(a=r.events)[e.NotyfEvent.Dismiss])||void 0===n||n.call(a,{target:t,event:i}),i.stopPropagation()}))}o.addEventListener("click",(function(i){var a,n;return null===(n=(a=r.events)[e.NotyfEvent.Click])||void 0===n?void 0:n.call(a,{target:t,event:i})}));var w="top"===this.getYPosition(a)?"upper":"lower";return o.classList.add("notyf__toast--"+w),o},t.prototype._createHTMLElement=function(t){var e=t.tagName,i=t.className,r=t.text,a=document.createElement(e);return i&&(a.className=i),a.textContent=r||null,a},t.prototype._createA11yContainer=function(){var t=this._createHTMLElement({tagName:"div",className:"notyf-announcer"});t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),t.style.border="0",t.style.clip="rect(0 0 0 0)",t.style.height="1px",t.style.margin="-1px",t.style.overflow="hidden",t.style.padding="0",t.style.position="absolute",t.style.width="1px",t.style.outline="0",document.body.appendChild(t),this.a11yContainer=t},t.prototype._announce=function(t){var e=this;this.a11yContainer.textContent="",setTimeout((function(){e.a11yContainer.textContent=t}),100)},t.prototype._getAnimationEndEventName=function(){var t,e=document.createElement("_fake"),i={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"};for(t in i)if(void 0!==e.style[t])return i[t];return"animationend"},t}(),c=function(){function t(t){var i=this;this.dismiss=this._removeNotification,this.notifications=new o,this.view=new l;var r=this.registerTypes(t);this.options=a(a({},s),t),this.options.types=r,this.notifications.onUpdate((function(t,e){return i.view.update(t,e)})),this.view.on(e.NotyfEvent.Dismiss,(function(t){var r=t.target,a=t.event;i._removeNotification(r),r.triggerEvent(e.NotyfEvent.Dismiss,a)})),this.view.on(e.NotyfEvent.Click,(function(t){var i=t.target,r=t.event;return i.triggerEvent(e.NotyfEvent.Click,r)}))}return t.prototype.error=function(t){var e=this.normalizeOptions("error",t);return this.open(e)},t.prototype.success=function(t){var e=this.normalizeOptions("success",t);return this.open(e)},t.prototype.open=function(t){var e=this.options.types.find((function(e){return e.type===t.type}))||{},i=a(a({},e),t);this.assignProps(["ripple","position","dismissible"],i);var r=new n(i);return this._pushNotification(r),r},t.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},t.prototype.assignProps=function(t,e){var i=this;t.forEach((function(t){e[t]=null==e[t]?i.options[t]:e[t]}))},t.prototype._pushNotification=function(t){var e=this;this.notifications.push(t);var i=void 0!==t.options.duration?t.options.duration:this.options.duration;i&&setTimeout((function(){return e._removeNotification(t)}),i)},t.prototype._removeNotification=function(t){var e=this.notifications.indexOf(t);-1!==e&&this.notifications.splice(e,1)},t.prototype.normalizeOptions=function(t,e){var r={type:t};return"string"==typeof e?r.message=e:"object"==i(e)&&(r=a(a({},r),e)),r},t.prototype.registerTypes=function(t){var e=(t&&t.types||[]).slice();return s.types.map((function(t){var i=-1;e.forEach((function(e,r){e.type===t.type&&(i=r)}));var r=-1!==i?e.splice(i,1)[0]:{};return a(a({},t),r)})).concat(e)},t}();e.DEFAULT_OPTIONS=s,e.Notyf=c,e.NotyfArray=o,e.NotyfNotification=n,e.NotyfView=l},4594:t=>{t.exports.segmentVariants={sidewalk:["empty","sparse","normal","dense"],"sidewalk-wayfinding":["large"],"sidewalk-bench":["left","right","center"],"sidewalk-bike-rack":["left|sidewalk-parallel","right|sidewalk-parallel","left|sidewalk","right|sidewalk"],"sidewalk-tree":["big","palm-tree"],utilities:["left","right"],"sidewalk-lamp":["right|modern","both|modern","left|modern","right|traditional","both|traditional","left|traditional","right|pride","both|pride","left|pride"],parklet:["left","right"],"outdoor-dining":["empty|sidewalk","empty|road"],bikeshare:["left|road","right|road","left|sidewalk","right|sidewalk"],"bike-lane":["inbound|green|sidewalk","inbound|green|road","outbound|green|sidewalk","outbound|green|road","inbound|regular|sidewalk","inbound|regular|road","outbound|regular|sidewalk","outbound|regular|road","inbound|red|sidewalk","inbound|red|road","outbound|red|sidewalk","outbound|red|road"],scooter:["inbound|regular","inbound|green","inbound|red","outbound|regular","outbound|green","outbound|red"],"bus-lane":["inbound|colored|typical","outbound|colored|typical","inbound|regular|typical","outbound|regular|typical","inbound|red|typical","outbound|red|typical"],"drive-lane":["inbound|car","outbound|car","inbound|truck","outbound|truck","outbound|av","inbound|av","outbound|pedestrian","inbound|pedestrian","inbound|sharrow","outbound|sharrow"],"turn-lane":["inbound|left","inbound|right","inbound|left-right-straight","inbound|shared","inbound|both","inbound|left-straight","inbound|right-straight","inbound|straight","outbound|left","outbound|right","outbound|left-right-straight","outbound|shared","outbound|both","outbound|left-straight","outbound|right-straight","outbound|straight"],"parking-lane":["sideways|right","sideways|left","inbound|right","inbound|left","outbound|left","outbound|right","angled-front-left|left","angled-front-right|left","angled-rear-left|left","angled-rear-right|left","angled-front-left|right","angled-front-right|right","angled-rear-left|right","angled-rear-right|right"],"food-truck":["left","right"],"flex-zone":["taxi|inbound|right","taxi|inbound|left","taxi|outbound|right","taxi|outbound|left","rideshare|outbound|right","rideshare|outbound|right","rideshare|inbound|right","rideshare|inbound|left"],streetcar:["inbound|regular","inbound|colored","inbound|grass","outbound|regular","outbound|colored","outbound|grass"],"light-rail":["inbound|regular","inbound|colored","inbound|grass","outbound|regular","outbound|colored","outbound|grass"],"brt-station":["center"],"transit-shelter":["left|street-level","right|street-level","right|light-rail","left|light-rail"],divider:["buffer","flowers","planting-strip","planter-box","palm-tree","big-tree","bush","dome","bollard","striped-buffer"],temporary:["barricade","traffic-cone","jersey-barrier-plastic","jersey-barrier-concrete"],"magic-carpet":["aladdin"]}},1339:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}var i={Setback:{"":{type:"sidewalk",variantString:"empty"},Trees:{type:"sidewalk-tree",variantString:"big"},tree:{type:"divider",variantString:"palm-tree"},Benchs:{type:"sidewalk-bench",variantStringAdd:"side"}},Walkways:{"":{type:"sidewalk",variantString:"empty"},Trees:{type:"sidewalk-tree",variantString:"big"},pedestrian:{type:"sidewalk",variantString:"dense"},Benchs:{type:"sidewalk-bench",variantStringAdd:"side"},Tables:{type:"outdoor-dining",variantString:"occupied|sidewalk"}},Furniture:{"":{type:"sidewalk",variantString:"empty"},Trees:{type:"sidewalk-tree",variantString:"big"},season_tree:{type:"sidewalk-tree",variantString:"big"},Shelters:{type:"transit-shelter",variantString:"street-level",variantStringAdd:"side|variantString"},Pedestrian:{type:"sidewalk",variantString:"dense"}},Curbside:{"":{type:"sidewalk",variantString:"empty"},Lights:{type:"sidewalk-lamp",tagToVariantMap:{"Historic Lights":"traditional","Regular Lights":"modern"},variantStringAdd:"side|variantString"},Poles:{type:"utilities",variantStringAdd:"side"},BikeRacks:{type:"sidewalk-bike-rack",nameToVariantMap:{"Sideview Modern":"sidewalk-parallel",Sideview:"sidewalk-parallel","NYC Bike Rack":"sidewalk"},variantStringAdd:"side|variantString"}},BikesPaths:{"":{type:"bike-lane",variantString:"sidewalk"},Bikes:{type:"bike-lane",variantString:"sidewalk",variantStringAdd:"direction|material|variantString"}},Gutter:{"":{type:"divider",variantString:"median"},Gutter:{type:"divider",variantString:"median"}},Transit:{"":{tag:"Bus Vehicles",type:"bus-lane",variantString:"typical",variantStringAdd:"direction|material|variantString"},Transit:[{tag:"Rail Vehicles",type:"streetcar",names:["StreetCar Yellow","StreetCar Blue","StreetCar Red 1","StreetCar Red 2"],variantStringAdd:"direction|material"},{tag:"Rail Vehicles",type:"light-rail",names:["UTA LightRail"],variantStringAdd:"direction|material"},{tag:"Rail Vehicles Reversed",type:"light-rail",variantStringAdd:"direction|material"},{tag:"Bus Vehicles",type:"bus-lane",variantString:"typical",variantStringAdd:"direction|material|variantString"}]},Cars:{"":{type:"drive-lane",variantString:"car",variantStringAdd:"direction|variantString"},Autos:{type:"drive-lane",variantString:"car",variantStringAdd:"direction|variantString"},Truck:{type:"drive-lane",variantString:"truck",variantStringAdd:"direction|variantString"}},Parking:{"":{tag:"Parking - Parallel",type:"parking-lane",variantStringAdd:"direction|side"},Parallel:{tag:"Parking - Parallel",type:"parking-lane",variantStringAdd:"direction|side"},AngleNormal:{tag:"Parking - Angle",type:"parking-lane",nameToVariantMap:{"Away, L. Park, Head In":"angled-rear-left","Toward, R. Park, Head In":"angled-front-right","Toward, L. Park, Head In":"angled-front-left","Away, R. Park, Head In":"angled-rear-right"},variantStringAdd:"side"},Perpendicular:{type:"parking-lane",variantString:"sideways",variantStringAdd:"variantString|side"}},Buffers:{"":{type:"divider",variantString:"median"},Trees:{type:"divider",variantString:"big-tree"},tree:{type:"divider",variantString:"palm-tree"},season_tree:{type:"divider",variantString:"big-tree"},median:{type:"divider",variantString:"planting-strip"},planter:{type:"divider",variantString:"planting-strip"}}};i.Buffers.AngleNormal=i.Parking.AngleNormal,i.Buffers.Autos=i.Cars.Autos,i.Buffers.Purpendicular=i.Parking.Perpendicular,i["Median/Buffer"]=i.Buffers,i.Setback.tree=i.Buffers.tree,i.Setback.Trees=i.Buffers.Trees,i.Setback.season_tree=i.Buffers.season_tree,i.Parking.Purpendicular=i.Parking.Perpendicular,i.Setback.Purpendicular=i.Parking.Perpendicular,i.Setback.AngleNormal=i.Parking.AngleNormal,i.Setback.planter=i.Buffers.planter,i.Setback.BikeRacks=i.Curbside.BikeRacks,i.Setback.Tables=i.Walkways.Tables,i.Setback.Poles=i.Curbside.Poles,i.Curbside.Shelters=i.Furniture.Shelters,i.Curbside.Benchs=i.Walkways.Benchs,i.Furniture.planter=i.Buffers.planter,i.Furniture.Benchs=i.Walkways.Benchs,i.Furniture.BikeRacks=i.Curbside.BikeRacks,i.Furniture.Tables=i.Walkways.Tables;var r={Coming:"inbound",Going:"outbound",Both:"both",NA:""},a={"Asphalt Black":"regular","Asphalt Blue":"blue","Asphalt Red 1":"red","Asphalt Red 2":"red","Asphalt Green":"green","Asphalt Old":"regular",Grass:"grass","Grass Dead":"grass"};function n(t,e){return t.split("|").map((function(t){return e[t]})).join("|")}t.exports.convertSegment=function(t){var o={},s=t.Type,l=t.Subtype,c=i[s];if(o.elevation=t.MaterialH/.5,o.width=t.width,o.direction=r[t.Direction],t.side&&(o.side=t.side),t.Material&&(o.material=a[t.Material]),c){var d=c[l];d?o=function(t,i,r){if("string"==typeof t)i.type=t;else if(Array.isArray(t)){var a=t.find((function(t){var e=t.tag===r["O1-Tags"];return e&&t.names?t.names.includes(r["O1-Name"]):e}));i.variantString="";var o=a.variantString;o&&"string"==typeof o&&(i.variantString=o),i.type=a.type;var s=a.variantStringAdd;s&&(i.variantString=n(s,i))}else if("object"===e(t)){i.type=t.type,i.variantString="";var l=t.variantString;l&&"string"==typeof l&&(i.variantString=l);var c=t.nameToVariantMap;c&&c[r["O1-Name"]]&&(i.variantString=c[r["O1-Name"]]);var d=t.tagToVariantMap;d&&d[r["O1-Tags"]]&&(i.variantString=d[r["O1-Tags"]]);var u=t.variantStringAdd;u&&(i.variantString=n(u,i))}return i}(d,o,t):(o.type=s,console.log("The '".concat(l,"' subtype of StreetPlan segment '").concat(s,"' is not yet supported in 3DStreet")))}else o.type=s,console.log("The '".concat(s,"' StreetPlan segment type is not yet supported in 3DStreet"));return o}},2480:(t,e,i)=>{mappingUtils=i(1339),t.exports.convertStreetStruct=function(t){var e,i={},r=Object.keys(t)[0],a=Object.keys(t[r])[0];return i.name=r,i.altName=a,i.segments=Object.values(t[r][a].segments),i.segments.forEach((function(t){t.width*=.3048})),i.segments=(e=i.segments,e.map(mappingUtils.convertSegment)).filter((function(t){return!["Buildings","setback"].includes(t.type)})),console.log("TEST. Converted JSON structure: ",i),i}},5384:t=>{t.exports.isSidewalk=function(t){return t.startsWith("sidewalk")||["utilities","scooter-drop-zone","bikeshare","flex-zone-curb","transit-shelter","brt-station","street-vendor"].includes(t)},t.exports.createBuildingsArray=function(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:150,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"narrow";if("narrow"===r||"wide"===r)t=[{id:"SM3D_Bld_Mixed_4fl",width:5.251},{id:"SM3D_Bld_Mixed_Double_5fl",width:10.9041},{id:"SM3D_Bld_Mixed_4fl_2",width:5.309},{id:"SM3D_Bld_Mixed_5fl",width:5.903},{id:"SM3D_Bld_Mixed_Corner_4fl",width:5.644}],e="41431323432402434130303230234102402341";else if("residential"===r)t=[{id:"SM_Bld_House_Preset_03_1800",width:20},{id:"SM_Bld_House_Preset_08_1809",width:20},{id:"SM_Bld_House_Preset_09_1845",width:20}],e="12021201210101212021201012012021201210";else{if("arcade"!==r)return[];t=[{id:"arched-building-01",width:9.191},{id:"arched-building-02",width:11.19},{id:"arched-building-03",width:13.191},{id:"arched-building-04",width:15.191}],e="03120223130210321203123023103201232013"}for(var a=0,n=0,o=[];n<i;){var s=t[parseInt(e[a])],l={tag:"a-entity",mixin:s.id,position:n+s.width/2+" 0 0"};"SM_Bld_House_Preset_08_1809"===l.mixin&&(l.child={tag:"a-plane",class:"driveway",material:"roughness:0.8",position:"-6.25 0.6 -8.75",rotation:"-90 0 0",src:"#asphalt-texture",width:4,height:4.6}),"SM_Bld_House_Preset_09_1845"===l.mixin&&(l.child={tag:"a-plane",class:"driveway",material:"roughness:0.8",position:"-2.5 0.6 -7",rotation:"-90 0 0",src:"#asphalt-texture",width:4,height:8}),s.width+n<=i&&o.push(l),n+=s.width,a++}return o},t.exports.filterBuildingsArrayByMixin=function(t,e){var i=[];return t.forEach((function(t,r){t.mixin===e&&i.push(t)})),i},t.exports.removePropertyFromArray=function(t,e){return t.forEach((function(t,i){delete t[e]})),t},t.exports.createClonedEntitiesArray=function(t){for(var e=t.mixin,i=void 0===e?"":e,r=t.step,a=void 0===r?15:r,n=t.radius,o=void 0===n?60:n,s=t.rotation,l=void 0===s?"0 0 0":s,c=t.positionXYString,d=void 0===c?"0 0":c,u=t.randomY,p=void 0!==u&&u,m=[],h=-1*o;h<=o;h+=a){var f={tag:"a-entity",position:d+" "+h};i&&(f.class=i,f.mixin=i),f.rotation=p?"0 "+Math.floor(361*randomTestable())+" 0":l,m.push(f)}return m},t.exports.getAmbientSoundJSON=function(t){var e={fence:"#suburbs-mp3",grass:"#suburbs-mp3","parking-lot":"#parking-lot-mp3",waterfront:"#waterfront",residential:"#suburbs2-mp3",narrow:"#ambientmp3",wide:"#ambientmp3"},i=[],r=null;return t.forEach((function(t,a){if(!r||r!==e[t]){var n={tag:"a-entity",class:"playme",sound:"src: "+e[t]+"; positional: false; loop: true"};i.push(n),r=e[t]}})),i}},4001:t=>{function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,a,n,o,s=[],l=!0,c=!1;try{if(n=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(r=n.call(i)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,a=t}finally{try{if(!l&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=document.createElement(t.tag);delete t.tag;for(var r=0,a=Object.entries(t);r<a.length;r++){var n=e(a[r],2),o=n[0],s=n[1];if("child"===o){for(var l=document.createElement(s.tag),c=0,d=Object.entries(s);c<d.length;c++){var u=e(d[c],2),p=u[0],m=u[1];l.setAttribute(p,m)}i.appendChild(l)}i.setAttribute(o,s)}return i}t.exports.createElementFromObject=r,t.exports.appendChildElementsFromArray=function(){var t=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(e,i){t.appendChild(r(e))})),t}},5676:t=>{t.exports.streetmixUserToAPI=function(t){var e=new URL(t).pathname.split("/"),i=e[1],r=e[2];return"-"===i?"https://streetmix.net/api/v1/streets?namespacedId="+r:"https://streetmix.net/api/v1/streets?namespacedId="+r+"&creatorId="+i},t.exports.pathStartsWithAPI=function(t){var e=document.createElement("a");return e.href=t,"api"===e.pathname.split("/")[1]},t.exports.streetmixAPIToUser=function(t){function e(t,e){for(var i=t.split("&"),r=0;r<i.length;r++){var a=i[r].split("=");if(decodeURIComponent(a[0])===e)return decodeURIComponent(a[1])}console.log("Query variable %s not found",e)}var i=new URL(t).search.substring(1),r=e(i,"namespacedId"),a=e(i,"creatorId");return void 0===a&&(a="-"),"https://streetmix.net/"+a+"/"+r},t.exports.convertStreetValues=function(t){return t.schemaVersion<30&&(t.segments.forEach((function(t){t.width*=.3048})),t.width&&(t.width*=.3048)),t}},4154:t=>{"use strict";t.exports=JSON.parse('{"status":true,"project":{"My Street":{"Boulevard Alt 1":{"segments":{"1":{"Type":"Buildings","Subtype":"Commercial","SegPos":1,"width":30,"title":"Building Blue 4floors","side":"left","Direction":"NA","Material":"Building Blue 4floors","MaterialH":"0","Markings":"Standard Concrete","O1-Name":"Building Blue 4floors","O1-Tags":"4-Story,4-Story","O2-Name":"","O2-Tags":"","O3-Name":"","O3-Tags":""},"2":{"id":2478438,"Type":"setback","Subtype":"AngleNormal","SegPos":2,"width":3,"title":"Toward, R. Park, Head In","side":"left","Direction":"NA","Material":"Asphalt Blue","MaterialH":"0.5","Markings":"Setback Small","O1-Name":"Toward, R. Park, Head In","O1-Tags":"Parking - Angle","O2-Name":"Empty place holder","O2-Tags":"Business Signs","O3-Name":"","O3-Tags":""},"3":{"id":2478439,"Type":"Walkways","Subtype":"pedestrian","SegPos":3,"width":6,"title":"3 people","side":"left","Direction":"Both","Material":"Pavers Tan","MaterialH":"0.5","Markings":"Blank","O1-Name":"3 people","O1-Tags":"Many People","O2-Name":"Empty place holder","O2-Tags":"Many People","O3-Name":"","O3-Tags":""},"4":{"id":2478440,"Type":"Furniture","Subtype":"BikeRacks","SegPos":4,"width":7,"title":"NYC Bike Rack","side":"left","Direction":"NA","Material":"Pavers Tan","MaterialH":"0.5","Markings":"Blank","O1-Name":"NYC Bike Rack","O1-Tags":"Bike Racks","O2-Name":"Empty place holder","O2-Tags":"Trees, Fall","O3-Name":"Empty place holder","O3-Tags":"Trees, Fall"},"5":{"id":2478441,"Type":"BikesPaths","Subtype":"Bikes","SegPos":5,"width":4.5,"title":"Casual woman 2","side":"left","Direction":"Coming","Material":"Asphalt Blue","MaterialH":"0.5","Markings":"Painted BufferNone NoEdge","O1-Name":"Casual woman 2","O1-Tags":"Miscellaneous","O2-Name":"Empty place holder","O2-Tags":"Parking - Reverse Angle","O3-Name":"","O3-Tags":""},"6":{"id":2478442,"Type":"Curbside","Subtype":"","SegPos":6,"width":6,"title":"Empty place holder","side":"left","Direction":"NA","Material":"Pavers Tan","MaterialH":"0.5","Markings":"Blank","O1-Name":"Empty place holder","O1-Tags":"Markings - Transit Options","O2-Name":"Shelter","O2-Tags":"0 mph","O3-Name":"","O3-Tags":""},"7":{"id":2478443,"Type":"Gutter","Subtype":"Gutter","SegPos":7,"width":2.5,"title":"Gutter Std. 2.5 ft, Left","side":"left","Direction":"NA","Material":"Standard Concrete","MaterialH":"0.5","Markings":"Blank","O1-Name":"Gutter Std. 2.5 ft, Left","O1-Tags":"Gutters","O2-Name":"Empty place holder","O2-Tags":"Markings - Transit Options","O3-Name":"Empty place holder","O3-Tags":"Markings - Transit Options"},"8":{"id":2478540,"Type":"Parking","Subtype":"Purpendicular","SegPos":8,"width":19,"title":"Purpendicular Right side, Blue","side":"left","Direction":"Coming","Material":"Asphalt Black","MaterialH":"0","Markings":"Parking Left","O1-Name":"Purpendicular Right side, Blue","O1-Tags":"Private Parking","O2-Name":"","O2-Tags":"Markings - Transit Options","O3-Name":"","O3-Tags":""},"9":{"id":2478444,"Type":"Transit","Subtype":"Transit","SegPos":9,"width":11,"title":"UTA bus","side":"left","Direction":"Coming","Material":"Asphalt Red 2","MaterialH":"0","Markings":"Thru Only","O1-Name":"UTA bus","O1-Tags":"Bus Vehicles","O2-Name":"Yellow Sedan","O2-Tags":"Miscellaneous","O3-Name":"","O3-Tags":""},"10":{"id":2478445,"Type":"Cars","Subtype":"","SegPos":10,"width":10,"title":"Empty place holder","side":"left","Direction":"Coming","Material":"Asphalt Black","MaterialH":"0","Markings":"Thru Only","O1-Name":"Empty place holder","O1-Tags":"SUVs/Pickups Reversed","O2-Name":"","O2-Tags":"Miscellaneous","O3-Name":"","O3-Tags":""},"11":{"id":2478446,"Type":"Median/Buffer","Subtype":"season_tree","SegPos":11,"width":14,"title":"Japanese Zelkova","side":"median","Direction":"median","Material":"Asphalt Black","MaterialH":"0","Markings":"Center Median","O1-Name":"Japanese Zelkova","O1-Tags":"Trees, Summer","O2-Name":"TallPlantBox (12ft)","O2-Tags":"Low-Water Xeriscape","O3-Name":"","O3-Tags":""},"12":{"id":2478447,"Type":"Cars","Subtype":"Truck","SegPos":12,"width":10,"title":"Blue Truck","side":"right","Direction":"Going","Material":"Asphalt Black","MaterialH":"0","Markings":"Thru Only","O1-Name":"Blue Truck","O1-Tags":"Miscellaneous","O2-Name":"","O2-Tags":"Low-Water Xeriscape","O3-Name":"","O3-Tags":""},"13":{"id":2478448,"Type":"Transit","Subtype":"Transit","SegPos":13,"width":11,"title":"StreetCar Yellow","side":"right","Direction":"Going","Material":"Grass","MaterialH":"0","Markings":"Thru Only","O1-Name":"StreetCar Yellow","O1-Tags":"Rail Vehicles","O2-Name":"White Sedan","O2-Tags":"Miscellaneous","O3-Name":"","O3-Tags":""},"14":{"id":2478449,"Type":"Gutter","Subtype":"Gutter","SegPos":14,"width":2.5,"title":"Gutter Std. 2.5 ft, Right","side":"right","Direction":"NA","Material":"Standard Concrete","MaterialH":"0.5","Markings":"Blank","O1-Name":"Gutter Std. 2.5 ft, Right","O1-Tags":"Gutters","O2-Name":"Empty place holder","O2-Tags":"Markings - Transit Options","O3-Name":"Empty place holder","O3-Tags":"Markings - Transit Options"},"15":{"id":2478450,"Type":"Curbside","Subtype":"Lights","SegPos":15,"width":2,"title":"Streetlight solar banners 1","side":"right","Direction":"NA","Material":"Pavers Tan","MaterialH":"0.5","Markings":"Blank","O1-Name":"Streetlight solar banners 1","O1-Tags":"Historic Lights","O2-Name":"BikeRack Bollard","O2-Tags":"30 mph","O3-Name":"","O3-Tags":""},"16":{"id":2478451,"Type":"BikesPaths","Subtype":"Bikes","SegPos":16,"width":4.5,"title":"Man Go","side":"right","Direction":"Going","Material":"Asphalt Blue","MaterialH":"0.5","Markings":"Painted BufferNone NoEdge","O1-Name":"Man Go","O1-Tags":"Miscellaneous","O2-Name":"","O2-Tags":"Bike Racks","O3-Name":"","O3-Tags":""},"17":{"id":2478452,"Type":"Furniture","Subtype":"Tables","SegPos":17,"width":7,"title":"Table","side":"right","Direction":"NA","Material":"Pavers Tan","MaterialH":"0.5","Markings":"Blank","O1-Name":"Table","O1-Tags":"Miscellaneous","O2-Name":"Table","O2-Tags":"Miscellaneous","O3-Name":"Empty place holder","O3-Tags":"Trees, Fall"},"18":{"id":2478453,"Type":"Walkways","Subtype":"pedestrian","SegPos":18,"width":6,"title":"3 people","side":"right","Direction":"Both","Material":"Pavers Tan","MaterialH":"0.5","Markings":"Blank","O1-Name":"3 people","O1-Tags":"Many People","O2-Name":"Empty place holder","O2-Tags":"Many People","O3-Name":"","O3-Tags":""},"19":{"id":2478454,"Type":"setback","Subtype":"Paths","SegPos":19,"width":3,"title":"Empty place holder","side":"right","Direction":"NA","Material":"Asphalt Blue","MaterialH":"0.5","Markings":"Setback Small","O1-Name":"Empty place holder","O1-Tags":"Business Signs","O2-Name":"Empty place holder","O2-Tags":"Business Signs","O3-Name":"","O3-Tags":""},"20":{"Type":"Buildings","Subtype":"Commercial","SegPos":20,"width":30,"title":"Building Yellow 4floors","side":"right","Direction":"NA","Material":"Building Yellow 4floors","MaterialH":"0","Markings":"Standard Concrete","O1-Name":"Building Yellow 4floors","O1-Tags":"4-Story,4-Story","O2-Name":"","O2-Tags":"","O3-Name":"","O3-Tags":""}}}}}}')}},e={};function i(r){var a=e[r];if(void 0!==a)return a.exports;var n=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}return i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}console.log("3DStreet Version: ".concat("0.4.15"));var e=i(3786),r=i(5676);i(7554),i(6023),i(2052),i(608),i(7866),i(3987),i(4956),i(4857),i(6948),i(5927),i(68),i(1394),AFRAME.registerComponent("street",{schema:{JSON:{type:"string"},type:{default:"streetmixSegmentsMetric"},left:{default:""},right:{default:""},showGround:{default:!0},showStriping:{default:!0},showVehicles:{default:!0},globalAnimated:{default:!1},length:{default:60}},update:function(t){var i=this.data;if(0!==i.JSON.length){var r=JSON.parse(i.JSON),a=this.el.querySelector(".street-parent");a&&a.remove();var n=this.el.querySelector(".buildings-parent");n&&n.remove();var o=e.processSegments(r.streetmixSegmentsMetric,i.showStriping,i.length,i.globalAnimated,i.showVehicles);if(this.el.append(o),i.left||i.right){var s=r.streetmixSegmentsMetric.reduce((function(t,e){return t+e.width}),0),l=e.processBuildings(i.left,i.right,s,i.showGround,i.length);this.el.append(l)}}else{if(void 0!==t.JSON&&0===t.JSON.length)return;console.log("[street]","No JSON provided yet, but it might be set at runtime")}}}),AFRAME.registerComponent("streetmix-loader",{dependencies:["street"],schema:{streetmixStreetURL:{type:"string"},streetmixAPIURL:{type:"string"},showBuildings:{default:!0},name:{default:""}},update:function(t){var e=this.data,i=this.el;if(t.streetmixStreetURL!==e.streetmixStreetURL||t.streetmixAPIURL!==e.streetmixAPIURL)if(0!==e.streetmixAPIURL.length){var a=new XMLHttpRequest;console.log("[streetmix-loader]","GET "+e.streetmixAPIURL),a.open("GET",e.streetmixAPIURL,!0),a.onload=function(){if(this.status>=200&&this.status<400){var t,a=JSON.parse(this.response),n=r.convertStreetValues(a.data.street),o=n.segments,s=a.name;console.log("streetmixName",s),i.setAttribute("streetmix-loader","name",s),AFRAME.scenes[0]&&AFRAME.scenes[0].getAttribute("metadata")&&(t=AFRAME.scenes[0].getAttribute("metadata").sceneTitle),t||(AFRAME.scenes[0].setAttribute("metadata","sceneTitle",s),console.log("therefore setting metadata sceneTitle as streetmixName",s)),i.setAttribute("data-layer-name","Streetmix • "+s),e.showBuildings&&(i.setAttribute("street","right",n.rightBuildingVariant),i.setAttribute("street","left",n.leftBuildingVariant)),i.setAttribute("street","type","streetmixSegmentsMetric"),i.setAttribute("street","JSON",JSON.stringify({streetmixSegmentsMetric:o})),i.emit("streetmix-loader-street-loaded")}else console.log("[streetmix-loader]","Loading Error: We reached the target server, but it returned an error")},a.onerror=function(){console.log("[streetmix-loader]","Loading Error: There was a connection error of some sort")},a.send()}else{if(e.streetmixStreetURL.length>0){var n=r.streetmixUserToAPI(e.streetmixStreetURL);return console.log("[streetmix-loader]","setting `streetmixAPIURL` to",n),void i.setAttribute("streetmix-loader","streetmixAPIURL",n)}console.log("[streetmix-loader]","Neither `streetmixAPIURL` nor `streetmixStreetURL` properties provided, please provide at least one.")}}}),AFRAME.registerComponent("intersection",{schema:{dimensions:{type:"string",default:"20 20"},sidewalk:{type:"string",default:"0 0 0 0"},northeastcurb:{type:"string",default:"0 0"},southwestcurb:{type:"string",default:"0 0"},southeastcurb:{type:"string",default:"0 0"},northwestcurb:{type:"string",default:"0 0"},stopsign:{type:"string",default:"0 0 0 0"},trafficsignal:{type:"string",default:"0 0 0 0"},crosswalk:{type:"string",default:"0 0 0 0"}},init:function(){for(var e=this.data,i=this.el;i.firstChild;)i.removeChild(i.lastChild);var r=e.dimensions.split(" ").map((function(t){return Number(t)})),a=[this.el.getAttribute("position").x,this.el.getAttribute("position").y,this.el.getAttribute("position").z],n=e.sidewalk.split(" ").map((function(t){return Number(t)})),o=e.northeastcurb.split(" ").map((function(t){return Number(t)})),s=e.southwestcurb.split(" ").map((function(t){return Number(t)})),l=e.southeastcurb.split(" ").map((function(t){return Number(t)})),c=e.northwestcurb.split(" ").map((function(t){return Number(t)})),d=e.stopsign.split(" ").map((function(t){return Number(t)})),u=e.trafficsignal.split(" ").map((function(t){return Number(t)})),p=e.crosswalk.split(" ").map((function(t){return Number(t)})),m=r[0],h=r[1];function f(t){var e=t.length,r=t.width,a=t.positionVec,n=t.scaleVec,o=void 0===n?{x:1,y:1,z:1}:n,s=t.rotationVec,l=document.createElement("a-entity"),c=[];c[0]=r/2,c[1]=parseInt(e/2),l.setAttribute("geometry","primitive","box"),l.setAttribute("geometry","height: 0.4"),l.setAttribute("position",a),l.setAttribute("scale",o),l.setAttribute("geometry","depth",e),l.setAttribute("geometry","width",r),l.setAttribute("rotation",s),l.setAttribute("mixin","sidewalk"),l.setAttribute("material","repeat: ".concat(c[0]," ").concat(c[1])),i.appendChild(l)}this.el.setAttribute("geometry","primitive:box; width: ".concat(m,"; height: ").concat(h,"; depth:0.2")),this.el.setAttribute("position",{x:a[0],y:-.1,z:a[2]}),this.el.setAttribute("rotation","-90 0 0"),this.el.setAttribute("material","src: #asphalt-texture; repeat:5 5; roughness:1");var g,y,b={west:{positionVec:{x:m/2-n[0]/2,z:.1},rotationVec:{x:90,y:0,z:0},length:h,width:n[0]},east:{positionVec:{x:-m/2+n[1]/2,z:.1},rotationVec:{x:90,y:0,z:0},length:h,width:n[1]},north:{positionVec:{y:-h/2+n[2]/2,x:n[1]/2-n[0]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:m-n[1]-n[0],width:n[2]},south:{positionVec:{y:h/2-n[3]/2,x:n[1]/2-n[0]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:m-n[1]-n[0],width:n[3]}};Object.keys(b).filter((function(t,e){return n[e]})).forEach((function(t,e){f(b[t])}));for(var v={northeast:{positionVec:{x:m/2-o[0]/2,y:h/2-o[1]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:o[0],width:o[1]},southwest:{positionVec:{x:-m/2+s[0]/2,y:-h/2+s[1]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:s[0],width:s[1]},southeast:{positionVec:{x:m/2-l[0]/2,y:-h/2+l[1]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:l[0],width:l[1]},northwest:{positionVec:{x:-m/2+c[0]/2,y:h/2-c[1]/2,z:.1},rotationVec:{x:0,y:90,z:-90},length:c[0],width:c[1]}},x=0,w=Object.entries(v);x<w.length;x++){var A=(g=w[x],y=2,function(t){if(Array.isArray(t))return t}(g)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,a,n,o,s=[],l=!0,c=!1;try{if(n=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(r=n.call(i)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,a=t}finally{try{if(!l&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(g,y)||function(e,i){if(e){if("string"==typeof e)return t(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,i):void 0}}(g,y)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=A[0],S=A[1];"0 0"!==e["".concat(E,"curb")]&&f(S)}if(d[0]){var k=document.createElement("a-entity");k.setAttribute("position",{x:m/2,y:h/3,z:.1}),k.setAttribute("rotation",{x:0,y:90,z:90}),k.setAttribute("mixin","stop_sign"),i.appendChild(k)}if(d[1]){var T=document.createElement("a-entity");T.setAttribute("position",{x:-m/2,y:-h/3,z:.1}),T.setAttribute("rotation",{x:0,y:-90,z:-90}),T.setAttribute("mixin","stop_sign"),i.appendChild(T)}if(d[2]){var M=document.createElement("a-entity");M.setAttribute("position",{x:-m/3,y:h/2,z:.1}),M.setAttribute("rotation",{x:-90,y:90,z:90}),M.setAttribute("mixin","stop_sign"),i.appendChild(M)}if(d[3]){var O=document.createElement("a-entity");O.setAttribute("position",{x:m/3,y:-h/2,z:.1}),O.setAttribute("rotation",{x:90,y:-90,z:-90}),O.setAttribute("mixin","stop_sign"),i.appendChild(O)}if(u[0]){var C=document.createElement("a-entity");C.setAttribute("position",{x:m/2,y:h/3,z:.3}),C.setAttribute("rotation",{x:210,y:90,z:90}),C.setAttribute("mixin","signal_left"),i.appendChild(C);var _=document.createElement("a-entity");_.setAttribute("position",{x:m/2,y:-h/3,z:.3}),_.setAttribute("rotation",{x:180,y:90,z:90}),_.setAttribute("mixin","signal_right"),i.appendChild(_)}if(u[1]){var N=document.createElement("a-entity");N.setAttribute("position",{x:-m/2,y:-h/3,z:.3}),N.setAttribute("rotation",{x:30,y:90,z:90}),N.setAttribute("mixin","signal_left"),i.appendChild(N);var R=document.createElement("a-entity");R.setAttribute("position",{x:-m/2,y:h/3,z:.3}),R.setAttribute("rotation",{x:0,y:90,z:90}),R.setAttribute("mixin","signal_right"),i.appendChild(R)}if(u[2]){var P=document.createElement("a-entity");P.setAttribute("position",{x:-m/3,y:h/2,z:.1}),P.setAttribute("rotation",{x:120,y:90,z:90}),P.setAttribute("mixin","signal_left"),i.appendChild(P);var L=document.createElement("a-entity");L.setAttribute("position",{x:m/3,y:h/2,z:.1}),L.setAttribute("rotation",{x:90,y:90,z:90}),L.setAttribute("mixin","signal_right"),i.appendChild(L)}if(u[3]){var j=document.createElement("a-entity");j.setAttribute("position",{x:m/3,y:-h/2,z:.1}),j.setAttribute("rotation",{x:-60,y:90,z:90}),j.setAttribute("mixin","signal_left"),i.appendChild(j);var I=document.createElement("a-entity");I.setAttribute("position",{x:-m/3,y:-h/2,z:.1}),I.setAttribute("rotation",{x:-90,y:90,z:90}),I.setAttribute("mixin","signal_right"),i.appendChild(I)}if(p[0]){var B=document.createElement("a-entity");B.setAttribute("position",{x:m/2-2,z:.11}),B.setAttribute("rotation",{x:0,y:0,z:180}),B.setAttribute("scale",{y:h/12}),B.setAttribute("mixin","markings crosswalk-zebra"),i.appendChild(B)}if(p[1]){var F=document.createElement("a-entity");F.setAttribute("position",{x:-m/2+2,z:.11}),F.setAttribute("rotation",{x:0,y:0,z:180}),F.setAttribute("scale",{y:h/12}),F.setAttribute("mixin","markings crosswalk-zebra"),i.appendChild(F)}if(p[2]){var D=document.createElement("a-entity");D.setAttribute("position",{y:-h/2+2,z:.11}),D.setAttribute("rotation",{x:0,y:0,z:90}),D.setAttribute("scale",{y:m/12}),D.setAttribute("mixin","markings crosswalk-zebra"),i.appendChild(D)}if(p[3]){var H=document.createElement("a-entity");H.setAttribute("position",{y:h/2-2,z:.11}),H.setAttribute("rotation",{x:0,y:0,z:90}),H.setAttribute("scale",{y:m/12}),H.setAttribute("mixin","markings crosswalk-zebra"),i.appendChild(H)}}}),AFRAME.registerComponent("street-environment",{schema:{preset:{type:"string",default:"day",oneOf:["day","night","color","sunny-morning","cloudy-afternoon","sunny-afternoon","sunny-noon","foggy","cloudy"]},backgroundColor:{type:"color",default:"#FFF"}},setEnvOption:function(){var t=this.sky,e=this.light1,i=this.light2,r="//assets.3dstreet.app/";"night"===this.data.preset?(e.setAttribute("light","intensity",.5),i.setAttribute("light","intensity",.15),t.setAttribute("visible",!0),t.setAttribute("color","#444"),t.setAttribute("src","#sky-night"),t.setAttribute("rotation","0 0 0")):"day"===this.data.preset?(e.setAttribute("light","intensity",.8),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","#sky"),t.setAttribute("rotation","0 20 0"),i.setAttribute("light","intensity: 2.2; castShadow: true; shadowCameraBottom: -20; shadowCameraLeft: -30; shadowCameraRight: 40; shadowCameraTop: 30; shadowMapHeight: 2048; shadowMapWidth: 2048"),i.setAttribute("position","-40 56 -16")):"sunny-morning"===this.data.preset?(e.setAttribute("light","intensity",.8),i.setAttribute("light","intensity: 2.2; castShadow: true; shadowCameraBottom: -20; shadowCameraLeft: -30; shadowCameraRight: 40; shadowCameraTop: 30; shadowMapHeight: 2048; shadowMapWidth: 2048"),i.setAttribute("position","-60 56 -16"),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(r,"images/skies/2048-polyhaven-qwantani_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):"cloudy-afternoon"===this.data.preset?(e.setAttribute("light","intensity",2),i.setAttribute("light","intensity",.6),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(r,"images/skies/2048-mud_road_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):"sunny-afternoon"===this.data.preset?(e.setAttribute("light","intensity",2),i.setAttribute("light","intensity: 2.2; castShadow: true; shadowCameraBottom: -20; shadowCameraLeft: -30; shadowCameraRight: 40; shadowCameraTop: 30; shadowMapHeight: 2048; shadowMapWidth: 2048"),i.setAttribute("position","60 56 -16"),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(r,"images/skies/2048-kloofendal_43d_clear_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):"sunny-noon"===this.data.preset?(e.setAttribute("light","intensity",2),i.setAttribute("light","intensity: 2.2; castShadow: true; shadowCameraBottom: -20; shadowCameraLeft: -30; shadowCameraRight: 40; shadowCameraTop: 30; shadowMapHeight: 2048; shadowMapWidth: 2048"),i.setAttribute("position","5 56 -16"),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(r,"images/skies/2048-kloppenheim_05_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):"foggy"===this.data.preset?(e.setAttribute("light","intensity",2),i.setAttribute("light","intensity: 0.6; castShadow: false;"),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(r,"images/skies/2048-kloofendal_misty_morning_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):"cloudy"===this.data.preset?(e.setAttribute("light","intensity",2),i.setAttribute("light","intensity",.6),t.setAttribute("visible",!0),t.setAttribute("color","#FFF"),t.setAttribute("src","url(".concat(r,"images/skies/2048-kloofendal_48d_partly_cloudy_puresky-sdr.jpeg)")),t.setAttribute("rotation","0 0 0")):(t.setAttribute("visible",!1),this.scene.setAttribute("background","color",this.data.backgroundColor))},init:function(){var t=this.el;this.scene=document.querySelector("a-scene"),this.light1=document.createElement("a-entity");var e=this.light1;e.setAttribute("id","env-light1"),e.setAttribute("light",{type:"ambient",color:"#FFF"}),t.appendChild(e),this.light2=document.createElement("a-entity");var i=this.light2;i.setAttribute("id","env-light2"),i.setAttribute("position","-60 56 -16"),i.setAttribute("light","intensity: 2.2; castShadow: true; shadowCameraBottom: -20; shadowCameraLeft: -30; shadowCameraRight: 40; shadowCameraTop: 30; shadowMapHeight: 2048; shadowMapWidth: 2048"),t.appendChild(i),this.sky=document.createElement("a-sky");var r=this.sky;r.setAttribute("id","env-sky"),r.setAttribute("data-ignore-raycaster",""),t.appendChild(r)},update:function(t){this.setEnvOption()}}),AFRAME.registerComponent("wheel",{schema:{speed:{type:"number",default:1},wheelDiameter:{type:"number",default:1}},init:function(){var t=this.el,e=this;t.addEventListener("model-loaded",(function(i){var r=t.getObject3D("mesh");r&&(e.wheel_F_L=r.getObjectByName("wheel_F_L"),e.wheel_F_R=r.getObjectByName("wheel_F_R"),e.wheel_B_L=r.getObjectByName("wheel_B_L"),e.wheel_B_R=r.getObjectByName("wheel_B_R"),e.wheel_B_L_2=r.getObjectByName("wheel_B_L_2"),e.wheel_B_R_2=r.getObjectByName("wheel_B_R_2"))}))},tick:function(t,e){var i=this.data.speed/1e3/this.data.wheelDiameter*2*e;this.wheel_F_L&&this.wheel_F_L.rotateY(i),this.wheel_F_R&&this.wheel_F_R.rotateY(i),this.wheel_B_L&&this.wheel_B_L.rotateY(i),this.wheel_B_L_2&&this.wheel_B_L_2.rotateY(i),this.wheel_B_R_2&&this.wheel_B_R_2.rotateY(i),this.wheel_B_R&&this.wheel_B_R.rotateY(i)}})})(),{}})()));
//# sourceMappingURL=aframe-street-component.js.map