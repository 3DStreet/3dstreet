<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Test Elevation Schema v33 - 3DStreet</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="./dist/3dstreet.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- Sky -->
      <a-sky color="#87CEEB"></a-sky>

      <!-- Ground -->
      <a-plane position="0 0 0" rotation="-90 0 0" width="100" height="100" color="#7BC8A4"></a-plane>

      <!-- Camera -->
      <a-entity id="cameraRig" position="0 10 30">
        <a-camera wasd-controls look-controls></a-camera>
      </a-entity>

      <!-- Test with staging URL -->
      <a-entity
        id="street-test"
        streetmix-loader="streetmixStreetURL: https://streetmix-staging.herokuapp.com/kfarr/19/test-elevation-v33">
      </a-entity>

      <!-- Instructions -->
      <a-text
        value="Testing Streetmix Schema v33 Elevation\nStaging URL: https://streetmix-staging.herokuapp.com/kfarr/19/test-elevation-v33\n\nExpected: Sidewalks at 0.15m, Road at 0m"
        position="0 15 0"
        align="center"
        color="#000000">
      </a-text>
    </a-scene>

    <div style="position: absolute; top: 10px; left: 10px; background: white; padding: 10px; font-family: monospace;">
      <h3>Elevation Test - Schema v33</h3>
      <p>Testing with Streetmix staging server</p>
      <p>Check console for debug info</p>
    </div>

    <script>
      // Add some debugging
      document.querySelector('#street-test').addEventListener('streetmix-loader-street-loaded', function(e) {
        console.log('Street loaded!');
        // Log segment elevations for debugging
        const segments = document.querySelectorAll('[street-segment]');
        segments.forEach((seg, i) => {
          const level = seg.getAttribute('street-segment').level;
          const type = seg.getAttribute('street-segment').type;
          console.log(`Segment ${i}: type=${type}, level=${level}`);
        });
      });
    </script>
  </body>
</html>