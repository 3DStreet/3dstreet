<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3DStreet | AI Image Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="/generator/favicon.png">
    <!-- Inline styles for loading screen to prevent FOUC -->
    <style>
        #app-loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #f9fafb;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        #app-loading-screen .loading-content {
            text-align: center;
        }
        #app-loading-screen .loading-spinner {
            width: 48px;
            height: 48px;
            border: 4px solid #e5e7eb;
            border-top-color: #4f46e5;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        #app-loading-screen .loading-text {
            color: #6b7280;
            font-size: 14px;
        }
        body.loaded #app-loading-screen {
            display: none;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Loading screen (shown until styles load) -->
    <div id="app-loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading...</div>
        </div>
    </div>
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <!-- AppSwitcher Mount Point -->
                <div id="app-switcher-root"></div>
                <h1 class="text-2xl font-bold text-gray-500 flex items-center gap-2">
                    <img src="/ui_assets/easel-generation.svg" alt="AI Generator" width="30" height="30" />
                    AI Image Generator
                </h1>
            </div>
            <!-- Right side: Token Display and Profile Button -->
            <div class="flex items-center space-x-4">
                <!-- Token Display Mount Point -->
                <div id="token-display-root"></div>
                <!-- React Auth Island Mount Point -->
                <div id="auth-root"></div>
            </div>
        </div>
    </header>

    <div class="bg-white shadow-sm">
        <div class="container mx-auto px-4">
            <div class="tab-navigation">
                <button class="tab-button active" data-tab="generator-tab">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    Generator
                </button>
                <button class="tab-button" data-tab="inpaint-tab">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                    </svg>
                    Inpaint
                </button>
                <button class="tab-button" data-tab="outpaint-tab">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />
                    </svg>
                    Outpaint
                </button>
                <button class="tab-button" data-tab="video-tab">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                    </svg>
                    Video
                </button>
                <button id="gallery-tab-button" class="tab-button gallery-tab-button" data-tab="gallery">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-1" fill="none" viewBox="0 0 31 31" stroke="currentColor">
                        <path d="M2.16666 23.6667L8.09024 17.7431C8.57469 17.2588 9.23165 16.9867 9.91666 16.9867C10.6017 16.9867 11.2586 17.2588 11.7431 17.7431L17.6667 23.6667M15.0833 21.0834L17.1319 19.0348C17.6164 18.5505 18.2733 18.2784 18.9583 18.2784C19.6433 18.2784 20.3003 18.5505 20.7847 19.0348L22.8333 21.0834M15.0833 13.3334H15.0962M4.74999 28.8334H20.25C20.9351 28.8334 21.5922 28.5612 22.0767 28.0767C22.5612 27.5922 22.8333 26.9352 22.8333 26.25V10.75C22.8333 10.0649 22.5612 9.4078 22.0767 8.92333C21.5922 8.43886 20.9351 8.16669 20.25 8.16669H4.74999C4.06485 8.16669 3.40777 8.43886 2.9233 8.92333C2.43883 9.4078 2.16666 10.0649 2.16666 10.75V26.25C2.16666 26.9352 2.43883 27.5922 2.9233 28.0767C3.40777 28.5612 4.06485 28.8334 4.74999 28.8334Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M23.5833 25.6667C24.2685 25.6667 24.9256 25.3945 25.41 24.91C25.8945 24.4256 26.1667 23.7685 26.1667 23.0833V7.58333C26.1667 6.89819 25.8945 6.24111 25.41 5.75664C24.9256 5.27217 24.2685 5 23.5833 5H8.08333C7.39819 5 6.74111 5.27217 6.25664 5.75664C5.77217 6.24111 5.5 6.89819 5.5 7.58333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M26.5833 22.6667C27.2685 22.6667 27.9256 22.3945 28.41 21.91C28.8945 21.4256 29.1667 20.7685 29.1667 20.0833V4.58333C29.1667 3.89819 28.8945 3.24111 28.41 2.75664C27.9256 2.27217 27.2685 2 26.5833 2H11.0833C10.3982 2 9.74111 2.27217 9.25664 2.75664C8.77217 3.24111 8.5 3.89819 8.5 4.58333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Gallery
                </button>
                <!-- More tabs will be added here -->
            </div>
        </div>
    </div>

    <main class="flex-grow container mx-auto px-4 py-6">
        <!-- Tab contents - each will be populated by its respective JS file -->
        <div id="generator-tab" class="tab-content active"></div>
        <div id="inpaint-tab" class="tab-content"></div>
        <div id="outpaint-tab" class="tab-content"></div>
        <div id="video-tab" class="tab-content"></div>
    </main>

    <!-- Notification -->
    <div id="notification" class="fixed left-4 bottom-4 bg-red-500 text-white p-4 rounded-lg shadow-lg transform transition-transform duration-300 translate-y-20 opacity-0" style="position: fixed; bottom: 1rem; left: 1rem;">
        <div class="flex items-center">
            <svg id="notification-icon" class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <span id="notification-message">Error message goes here</span>
        </div>
    </div>

    <!-- Load the bundled JavaScript -->
    <script src="/dist/generator.js"></script>
</body>
</html>